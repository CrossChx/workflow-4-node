{"version":3,"sources":["hosting/serializing.js"],"names":[],"mappings":"AAAA;;;;AAAY,CAAC;AAIb,IAAI,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACnC,IAAI,gBAAgB,GAAG,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC;AACxD,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,iBAAiB,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;AACvD,IAAI,iBAAiB,GAAG,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC;AAC1D,IAAI,UAAU,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC;AAC5D,IAAI,YAAY,GAAG,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC;AAChD,IAAI,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC;AAC/C,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,IAAI,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC;AAC/B,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC;AAC3C,IAAI,KAAK,GAAG,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC;;AAErC,IAAI,MAAM,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;;AAEtC,QAAQ,CAAC,aAAa,EAAE,YAAW;AAC/B,QAAI,MAAM,GAAG,KAAK,yBAAC,iBAAW,WAAW;YACjC,GAAG,EACH,GAAG,EACH,IAAI,EACJ,GAAG,EAKH,KAAK,EACL,IAAI,EACJ,IAAI,EACJ,OAAO,EACP,OAAO,EACP,KAAK,EAEL,EAAE,EA6HE,WAAW,EAIX,SAAS;;;;;AAhJb,2BAAG,GAAG,IAAI,IAAI,EAAE;AAChB,2BAAG,GAAG,OAAO;AACb,4BAAI,GAAG,IAAI,YAAY,CAAC,WAAW,CAAC;AACpC,2BAAG,GAAG,IAAI;;AACd,4BAAI,CAAC,EAAE,CAAC,OAAO,EAAE,UAAS,CAAC,EAAE;AACzB,+BAAG,GAAG,CAAC,CAAC;yBACX,CAAC,CAAC;;AAEC,6BAAK,GAAG,IAAI;AACZ,4BAAI,GAAG,IAAI;AACX,4BAAI,GAAG,IAAI;AACX,+BAAO,GAAG,IAAI;AACd,+BAAO,GAAG,IAAI;AACd,6BAAK,GAAG,IAAI;AAEZ,0BAAE,GAAG;AACL,uCAAW,EAAE;AACT,oCAAI,EAAE,cAAc;AACpB,qCAAK,EAAE,IAAI;AACX,oCAAI,EAAE,IAAI;AACV,oCAAI,EAAE,IAAI;AACV,uCAAO,EAAE,IAAI;AACb,uCAAO,EAAE,IAAI;AACb,wCAAQ,EAAE,iBAAW;AACjB,2CAAO,QAAQ,CAAC;iCACnB;AACD,oCAAI,EAAE;AACF,4CAAQ,EAAE;AACN,yCAAC,EAAE,gBAAgB;AACnB,4CAAI,EAAE,CACF,YAAW;AACP,kDAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,cAAc,CAAC,CAAC;yCAC1C,EACD;AACI,qDAAS,EAAE;AACP,0DAAU,EAAE,OAAO;AACnB,iEAAiB,EAAE,IAAI;AACvB,8DAAc,EAAE,KAAK;6CACxB;yCACJ,EACD;AACI,qDAAS,EAAE;AACP,kDAAE,EAAE,OAAO;AACX,qDAAK,EAAE,GAAG;6CACb;yCACJ,EACD;AACI,qDAAS,EAAE;AACP,kDAAE,EAAE,MAAM;AACV,qDAAK,EAAE,iBAAY;AACf,wDAAI,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;AACpB,uDAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AAChB,uDAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AAChB,2DAAO,GAAG,CAAC;iDACd;6CACJ;yCACJ,EACD;AACI,qDAAS,EAAE;AACP,kDAAE,EAAE,MAAM;AACV,qDAAK,EAAE,iBAAY;AACf,wDAAI,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;AACpB,uDAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACX,uDAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACX,2DAAO,GAAG,CAAC;iDACd;6CACJ;yCACJ,EACD;AACI,qDAAS,EAAE;AACP,kDAAE,EAAE,SAAS;AACb,qDAAK,EAAE,GAAG;6CACb;yCACJ,EACD;AACI,qDAAS,EAAE;AACP,0DAAU,EAAE,QAAQ;AACpB,8DAAc,EAAE,KAAK;;AAErB,sDAAM,EAAE,CACJ,cAAc,EACd,aAAa,EACb,aAAa,EACb,gBAAgB,EAChB,mBAAmB,EACnB,eAAe,CAClB;6CACJ;yCACJ,EACD;AACI,qDAAS,EAAE;AACP,0DAAU,EAAE,QAAQ;AACpB,8DAAc,EAAE,KAAK;;AAErB,sDAAM,EAAE;AACJ,yDAAK,EAAE,cAAc;AACrB,wDAAI,EAAE,aAAa;AACnB,wDAAI,EAAE,aAAa;AACnB,2DAAO,EAAE,gBAAgB;AACzB,wDAAI,EAAE,mBAAmB;AACzB,wDAAI,EAAE,eAAe;iDACxB;6CACJ;yCACJ,EACD;AACI,qDAAS,EAAE;AACP,kDAAE,EAAE,SAAS;AACb,qDAAK,EAAE;AACH,2DAAO,EAAE;AACL,4DAAI,EAAE,mBAAmB;qDAC5B;iDACJ;6CACJ;yCACJ,EACD,YAAY;AACR,iDAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AACnB,gDAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACjB,gDAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACjB,mDAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AACvB,mDAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AACvB,iDAAK,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;yCACvB,CACJ;qCACJ;iCACJ;6BACJ;yBACJ;;;AAGG,4BAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC;;;+BAEpB,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,OAAO,EAAE,GAAG,CAAC;;;AACrD,4BAAI,CAAC,QAAQ,EAAE,CAAC;;AAEhB,4BAAI,GAAG,IAAI,YAAY,CAAC,WAAW,CAAC,CAAC;AACrC,4BAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC;AAC1B,4BAAI,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC,EAAE;AAC1B,+BAAG,GAAG,CAAC,CAAC;yBACX,CAAC,CAAC;;;+BAEqB,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,QAAQ,EAAE,GAAG,CAAC;;;AAApE,mCAAW;;AACf,8BAAM,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;AAC/B,8BAAM,CAAC,WAAW,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;;;+BAEX,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,QAAQ,EAAE,GAAG,CAAC;;;AAAlE,iCAAS;;AACb,8BAAM,CAAC,CAAC,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC;AACnC,8BAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;;AAEvC,8BAAM,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;AACxB,8BAAM,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;;AAE1C,8BAAM,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjC,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,KAAK,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;;AAEnD,8BAAM,CAAC,IAAI,YAAY,GAAG,CAAC,CAAC;AAC5B,8BAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;AAC5B,8BAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;AAC5B,8BAAM,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;;AAExB,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC;AACtC,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;AACtC,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;AACtC,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;;AAElC,8BAAM,CAAC,SAAS,CAAC,IAAI,YAAY,GAAG,CAAC,CAAC;AACtC,8BAAM,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;AACtC,8BAAM,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;AACtC,8BAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;;AAElC,8BAAM,CAAC,IAAI,YAAY,GAAG,CAAC,CAAC;AAC5B,8BAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB,8BAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB,8BAAM,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;;AAExB,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC;AACtC,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9B,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9B,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;;AAElC,8BAAM,CAAC,SAAS,CAAC,IAAI,YAAY,GAAG,CAAC,CAAC;AACtC,8BAAM,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9B,8BAAM,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9B,8BAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;;AAElC,8BAAM,CAAC,OAAO,YAAY,MAAM,CAAC,CAAC;AAClC,8BAAM,CAAC,OAAO,CAAC,OAAO,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC;AACxC,8BAAM,CAAC,OAAO,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC;;AAEpC,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,YAAY,MAAM,CAAC,CAAC;AACzC,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC;AAC/C,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC;;AAE3C,8BAAM,CAAC,SAAS,CAAC,OAAO,YAAY,MAAM,CAAC,CAAC;AAC5C,8BAAM,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC;AAClD,8BAAM,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC;;AAE9C,8BAAM,CAAC,OAAO,KAAK,QAAQ,CAAC,CAAC;;AAE7B,8BAAM,CAAC,KAAK,KAAK,cAAc,CAAC,CAAC;;AAEjC,8BAAM,CAAC,CAAC,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACrC,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,KAAK,QAAQ,CAAC,CAAC;;AAEtC,8BAAM,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;AACrC,8BAAM,CAAC,SAAS,CAAC,IAAI,EAAE,KAAK,QAAQ,CAAC,CAAC;;AAEtC,8BAAM,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,cAAc,CAAC,CAAC;;AAE1C,8BAAM,CAAC,SAAS,CAAC,IAAI,KAAK,cAAc,CAAC,CAAC;;6BAEtC,GAAG;;;;;8BACG,GAAG;;;;;AAIb,4BAAI,CAAC,QAAQ,EAAE,CAAC;;;;;;;;;KAEvB,EAAC,CAAC;;AAEH,MAAE,CAAC,oEAAoE,EAAE,UAAS,IAAI,EAAE;AACpF,cAAM,CAAC;AACH,uBAAW,EAAE,IAAI,iBAAiB,EAAE;AACpC,2BAAe,EAAE,IAAI;AACrB,sBAAU,EAAE,IAAI;AAChB,2BAAe,EAAE,KAAK;SACzB,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KACpB,CAAC,CAAC;;AAEH,MAAE,CAAC,iEAAiE,EAAE,UAAS,IAAI,EAAE;AACjF,cAAM,CAAC;AACH,uBAAW,EAAE,IAAI,iBAAiB,EAAE;AACpC,2BAAe,EAAE,IAAI;AACrB,sBAAU,EAAE,IAAI,UAAU,EAAE;AAC5B,2BAAe,EAAE,KAAK;SACzB,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KACpB,CAAC,CAAC;CACN,CAAC,CAAC","file":"hosting/serializing.js","sourcesContent":["\"use strict\";\n\n/* global describe,it */\n\nlet wf4node = require(\"../../../\");\nlet InstanceIdParser = wf4node.hosting.InstanceIdParser;\nlet _ = require(\"lodash\");\nlet hostingTestCommon = require(\"./hostingTestCommon\");\nlet MemoryPersistence = wf4node.hosting.MemoryPersistence;\nlet Serializer = require(\"backpack-node\").system.Serializer;\nlet WorkflowHost = wf4node.hosting.WorkflowHost;\nlet asyncHelpers = wf4node.common.asyncHelpers;\nlet Bluebird = require(\"bluebird\");\nlet async = asyncHelpers.async;\nlet util = require(\"util\");\nlet Activity = wf4node.activities.Activity;\nlet Block = wf4node.activities.Block;\n\nlet assert = require(\"better-assert\");\n\ndescribe(\"serializing\", function() {\n    let doTest = async(function* (hostOptions) {\n        let now = new Date();\n        let rex = /abc/gi;\n        let host = new WorkflowHost(hostOptions);\n        let err = null;\n        host.on(\"error\", function(e) {\n            err = e;\n        });\n\n        let aDate = null;\n        let aMap = null;\n        let aSet = null;\n        let aResult = null;\n        let aRegExp = null;\n        let aProp = null;\n\n        let wf = {\n            \"@workflow\": {\n                name: \"serializerWF\",\n                aDate: null,\n                aMap: null,\n                aSet: null,\n                aResult: null,\n                aRegExp: null,\n                \"`aCode\": function() {\n                    return \"Hello!\";\n                },\n                args: {\n                    \"@block\": {\n                        p: \"= this.$parent\",\n                        args: [\n                            function() {\n                                assert(this.p.name === \"serializerWF\");\n                            },\n                            {\n                                \"@method\": {\n                                    methodName: \"start\",\n                                    canCreateInstance: true,\n                                    instanceIdPath: \"[0]\"\n                                }\n                            },\n                            {\n                                \"@assign\": {\n                                    to: \"aDate\",\n                                    value: now\n                                }\n                            },\n                            {\n                                \"@assign\": {\n                                    to: \"aMap\",\n                                    value: function () {\n                                        let map = new Map();\n                                        map.set(1, \"1\");\n                                        map.set(2, \"2\");\n                                        return map;\n                                    }\n                                }\n                            },\n                            {\n                                \"@assign\": {\n                                    to: \"aSet\",\n                                    value: function () {\n                                        let set = new Set();\n                                        set.add(1);\n                                        set.add(2);\n                                        return set;\n                                    }\n                                }\n                            },\n                            {\n                                \"@assign\": {\n                                    to: \"aRegExp\",\n                                    value: rex\n                                }\n                            },\n                            {\n                                \"@method\": {\n                                    methodName: \"getArr\",\n                                    instanceIdPath: \"[0]\",\n                                    //result: \"= [this.aDate, this.aMap, this.aSet, this.aRegExp, this.aCode.code, this.p.name]\"\n                                    result: [\n                                        \"= this.aDate\",\n                                        \"= this.aMap\",\n                                        \"= this.aSet\",\n                                        \"= this.aRegExp\",\n                                        \"= this.aCode.code\",\n                                        \"= this.p.name\"\n                                    ]\n                                }\n                            },\n                            {\n                                \"@method\": {\n                                    methodName: \"getObj\",\n                                    instanceIdPath: \"[0]\",\n                                    //result: \"= { aDate: this.aDate, aMap: this.aMap, aSet: this.aSet, aRegExp: this.aRegExp, code: this.aCode.code, name: this.p.name }\"\n                                    result: {\n                                        aDate: \"= this.aDate\",\n                                        aMap: \"= this.aMap\",\n                                        aSet: \"= this.aSet\",\n                                        aRegExp: \"= this.aRegExp\",\n                                        code: \"= this.aCode.code\",\n                                        name: \"= this.p.name\"\n                                    }\n                                }\n                            },\n                            {\n                                \"@assign\": {\n                                    to: \"aResult\",\n                                    value: {\n                                        \"@func\": {\n                                            code: \"= this.aCode.code\"\n                                        }\n                                    }\n                                }\n                            },\n                            function () {\n                                aDate = this.aDate;\n                                aMap = this.aMap;\n                                aSet = this.aSet;\n                                aResult = this.aResult;\n                                aRegExp = this.aRegExp;\n                                aProp = this.p.name;\n                            }\n                        ]\n                    }\n                }\n            }\n        };\n\n        try {\n            host.registerWorkflow(wf);\n\n            yield host.invokeMethod(\"serializerWF\", \"start\", \"0\");\n            host.shutdown();\n\n            host = new WorkflowHost(hostOptions);\n            host.registerWorkflow(wf);\n            host.on(\"error\", function (e) {\n                err = e;\n            });\n\n            let arrayResult = yield host.invokeMethod(\"serializerWF\", \"getArr\", \"0\");\n            assert(_.isArray(arrayResult));\n            assert(arrayResult.length === 6);\n\n            let objResult = yield host.invokeMethod(\"serializerWF\", \"getObj\", \"0\");\n            assert(_.isPlainObject(objResult));\n            assert(_.keys(objResult).length === 6);\n\n            assert(_.isDate(aDate));\n            assert(aDate.getTime() === now.getTime());\n\n            assert(_.isDate(arrayResult[0]));\n            assert(arrayResult[0].getTime() === now.getTime());\n\n            assert(aMap instanceof Map);\n            assert(aMap.get(1) === \"1\");\n            assert(aMap.get(2) === \"2\");\n            assert(aMap.size === 2);\n\n            assert(arrayResult[1] instanceof Map);\n            assert(arrayResult[1].get(1) === \"1\");\n            assert(arrayResult[1].get(2) === \"2\");\n            assert(arrayResult[1].size === 2);\n\n            assert(objResult.aMap instanceof Map);\n            assert(objResult.aMap.get(1) === \"1\");\n            assert(objResult.aMap.get(2) === \"2\");\n            assert(objResult.aMap.size === 2);\n\n            assert(aSet instanceof Set);\n            assert(aSet.has(1));\n            assert(aSet.has(2));\n            assert(aSet.size === 2);\n\n            assert(arrayResult[2] instanceof Set);\n            assert(arrayResult[2].has(1));\n            assert(arrayResult[2].has(2));\n            assert(arrayResult[2].size === 2);\n\n            assert(objResult.aSet instanceof Set);\n            assert(objResult.aSet.has(1));\n            assert(objResult.aSet.has(2));\n            assert(objResult.aSet.size === 2);\n\n            assert(aRegExp instanceof RegExp);\n            assert(aRegExp.pattern === rex.pattern);\n            assert(aRegExp.flags === rex.flags);\n\n            assert(arrayResult[3] instanceof RegExp);\n            assert(arrayResult[3].pattern === rex.pattern);\n            assert(arrayResult[3].flags === rex.flags);\n\n            assert(objResult.aRegExp instanceof RegExp);\n            assert(objResult.aRegExp.pattern === rex.pattern);\n            assert(objResult.aRegExp.flags === rex.flags);\n\n            assert(aResult === \"Hello!\");\n\n            assert(aProp === \"serializerWF\");\n\n            assert(_.isFunction(arrayResult[4]));\n            assert(arrayResult[4]() === \"Hello!\");\n\n            assert(_.isFunction(objResult.code));\n            assert(objResult.code() === \"Hello!\");\n\n            assert(arrayResult[5] === \"serializerWF\");\n\n            assert(objResult.name === \"serializerWF\");\n\n            if (err) {\n                throw err;\n            }\n        }\n        finally {\n            host.shutdown();\n        }\n    });\n\n    it(\"should serialize Date, code, Map, Set, RegExp without a serializer\", function(done) {\n        doTest({\n            persistence: new MemoryPersistence(),\n            lazyPersistence: true,\n            serializer: null,\n            alwaysLoadState: false\n        }).nodeify(done);\n    });\n\n    it(\"should serialize Date, code, Map, Set, RegExp with a serializer\", function(done) {\n        doTest({\n            persistence: new MemoryPersistence(),\n            lazyPersistence: true,\n            serializer: new Serializer(),\n            alwaysLoadState: false\n        }).nodeify(done);\n    });\n});"],"sourceRoot":"/source/"}