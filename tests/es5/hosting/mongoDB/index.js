"use strict";
var wf4node = require("../../../../");
var MongoDDPersistence = require("wf4node-mongodb-persistence").MongoDDPersistence;
var hostingTestCommon = require("../hostingTestCommon");
var Serializer = require("backpack-node").system.Serializer;
var connStr = process.env.MONGO_URL;
var persistence = connStr ? new MongoDDPersistence({connection: connStr}) : null;
if (persistence) {
  describe("WorkflowHost", function() {
    this.timeout(5000);
    this.beforeEach(function(done) {
      persistence.__clear().nodeify(done);
    });
    function getInfo(options) {
      return ("lazy: " + (options.lazyPersistence ? "yes" : "no") + ", serializer: " + (options.serializer ? "yes" : "no") + ", alwaysLoad: " + (options.alwaysLoadState ? "yes" : "no"));
    }
    function testBasic(options) {
      it("should run by: " + getInfo(options), function(done) {
        hostingTestCommon.doBasicHostTest(options).nodeify(done);
      });
    }
    function testCalc(options) {
      it("should run by: " + getInfo(options), function(done) {
        hostingTestCommon.doCalculatorTest(options).nodeify(done);
      });
    }
    function testDelayTo(options) {
      it("should run by: " + getInfo(options), function(done) {
        hostingTestCommon.doDelayTest(options).nodeify(done);
      });
    }
    var allOptions = [{
      persistence: persistence,
      lazyPersistence: false,
      serializer: null,
      alwaysLoadState: false
    }, {
      persistence: persistence,
      lazyPersistence: true,
      serializer: null,
      alwaysLoadState: false
    }, {
      persistence: persistence,
      lazyPersistence: false,
      serializer: new Serializer(),
      alwaysLoadState: false
    }, {
      persistence: persistence,
      lazyPersistence: true,
      serializer: new Serializer(),
      alwaysLoadState: false
    }, {
      persistence: persistence,
      lazyPersistence: false,
      serializer: new Serializer(),
      alwaysLoadState: true
    }, {
      persistence: persistence,
      lazyPersistence: true,
      serializer: new Serializer(),
      alwaysLoadState: true
    }];
    describe("With MongoDB Persistence", function() {
      describe("Basic Example", function() {
        var $__4 = true;
        var $__5 = false;
        var $__6 = undefined;
        try {
          for (var $__2 = void 0,
              $__1 = (allOptions)[$traceurRuntime.toProperty(Symbol.iterator)](); !($__4 = ($__2 = $__1.next()).done); $__4 = true) {
            var opt = $__2.value;
            {
              testBasic(opt);
            }
          }
        } catch ($__7) {
          $__5 = true;
          $__6 = $__7;
        } finally {
          try {
            if (!$__4 && $__1.return != null) {
              $__1.return();
            }
          } finally {
            if ($__5) {
              throw $__6;
            }
          }
        }
      });
      describe("Calculator Example", function() {
        var $__4 = true;
        var $__5 = false;
        var $__6 = undefined;
        try {
          for (var $__2 = void 0,
              $__1 = (allOptions)[$traceurRuntime.toProperty(Symbol.iterator)](); !($__4 = ($__2 = $__1.next()).done); $__4 = true) {
            var opt = $__2.value;
            {
              testCalc(opt);
            }
          }
        } catch ($__7) {
          $__5 = true;
          $__6 = $__7;
        } finally {
          try {
            if (!$__4 && $__1.return != null) {
              $__1.return();
            }
          } finally {
            if ($__5) {
              throw $__6;
            }
          }
        }
      });
      describe("DelayTo Example", function() {
        var $__4 = true;
        var $__5 = false;
        var $__6 = undefined;
        try {
          for (var $__2 = void 0,
              $__1 = (allOptions)[$traceurRuntime.toProperty(Symbol.iterator)](); !($__4 = ($__2 = $__1.next()).done); $__4 = true) {
            var opt = $__2.value;
            {
              testDelayTo(opt);
            }
          }
        } catch ($__7) {
          $__5 = true;
          $__6 = $__7;
        } finally {
          try {
            if (!$__4 && $__1.return != null) {
              $__1.return();
            }
          } finally {
            if ($__5) {
              throw $__6;
            }
          }
        }
      });
    });
  });
}
//# sourceMappingURL=data:application/json;base64,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dHMvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGdsb2JhbCBkZXNjcmliZSxpdCAqL1xuXG5sZXQgd2Y0bm9kZSA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9cIik7XG5sZXQgTW9uZ29ERFBlcnNpc3RlbmNlID0gcmVxdWlyZShcIndmNG5vZGUtbW9uZ29kYi1wZXJzaXN0ZW5jZVwiKS5Nb25nb0REUGVyc2lzdGVuY2U7XG5sZXQgaG9zdGluZ1Rlc3RDb21tb24gPSByZXF1aXJlKFwiLi4vaG9zdGluZ1Rlc3RDb21tb25cIik7XG5sZXQgU2VyaWFsaXplciA9IHJlcXVpcmUoXCJiYWNrcGFjay1ub2RlXCIpLnN5c3RlbS5TZXJpYWxpemVyO1xuXG5sZXQgY29ublN0ciA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTDtcbmxldCBwZXJzaXN0ZW5jZSA9IGNvbm5TdHIgPyBuZXcgTW9uZ29ERFBlcnNpc3RlbmNlKHtjb25uZWN0aW9uOiBjb25uU3RyfSkgOiBudWxsO1xuXG5pZiAocGVyc2lzdGVuY2UpIHtcbiAgICBkZXNjcmliZShcIldvcmtmbG93SG9zdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudGltZW91dCg1MDAwKTtcbiAgICAgICAgdGhpcy5iZWZvcmVFYWNoKGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAgIHBlcnNpc3RlbmNlLl9fY2xlYXIoKS5ub2RlaWZ5KGRvbmUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBnZXRJbmZvKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBgbGF6eTogJHtvcHRpb25zLmxhenlQZXJzaXN0ZW5jZSA/IFwieWVzXCIgOiBcIm5vXCJ9LCBzZXJpYWxpemVyOiAke29wdGlvbnMuc2VyaWFsaXplciA/IFwieWVzXCIgOiBcIm5vXCJ9LCBhbHdheXNMb2FkOiAke29wdGlvbnMuYWx3YXlzTG9hZFN0YXRlID8gXCJ5ZXNcIiA6IFwibm9cIn1gO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdGVzdEJhc2ljKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJ1biBieTogXCIgKyBnZXRJbmZvKG9wdGlvbnMpLCBmdW5jdGlvbiAoZG9uZSkge1xuICAgICAgICAgICAgICAgIGhvc3RpbmdUZXN0Q29tbW9uLmRvQmFzaWNIb3N0VGVzdChvcHRpb25zKS5ub2RlaWZ5KGRvbmUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0ZXN0Q2FsYyhvcHRpb25zKSB7XG4gICAgICAgICAgICBpdChcInNob3VsZCBydW4gYnk6IFwiICsgZ2V0SW5mbyhvcHRpb25zKSwgZnVuY3Rpb24gKGRvbmUpIHtcbiAgICAgICAgICAgICAgICBob3N0aW5nVGVzdENvbW1vbi5kb0NhbGN1bGF0b3JUZXN0KG9wdGlvbnMpLm5vZGVpZnkoZG9uZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRlc3REZWxheVRvKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJ1biBieTogXCIgKyBnZXRJbmZvKG9wdGlvbnMpLCBmdW5jdGlvbiAoZG9uZSkge1xuICAgICAgICAgICAgICAgIGhvc3RpbmdUZXN0Q29tbW9uLmRvRGVsYXlUZXN0KG9wdGlvbnMpLm5vZGVpZnkoZG9uZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhbGxPcHRpb25zID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlOiBwZXJzaXN0ZW5jZSxcbiAgICAgICAgICAgICAgICBsYXp5UGVyc2lzdGVuY2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgYWx3YXlzTG9hZFN0YXRlOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZTogcGVyc2lzdGVuY2UsXG4gICAgICAgICAgICAgICAgbGF6eVBlcnNpc3RlbmNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgYWx3YXlzTG9hZFN0YXRlOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZTogcGVyc2lzdGVuY2UsXG4gICAgICAgICAgICAgICAgbGF6eVBlcnNpc3RlbmNlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVyOiBuZXcgU2VyaWFsaXplcigpLFxuICAgICAgICAgICAgICAgIGFsd2F5c0xvYWRTdGF0ZTogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2U6IHBlcnNpc3RlbmNlLFxuICAgICAgICAgICAgICAgIGxhenlQZXJzaXN0ZW5jZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVyOiBuZXcgU2VyaWFsaXplcigpLFxuICAgICAgICAgICAgICAgIGFsd2F5c0xvYWRTdGF0ZTogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2U6IHBlcnNpc3RlbmNlLFxuICAgICAgICAgICAgICAgIGxhenlQZXJzaXN0ZW5jZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplcjogbmV3IFNlcmlhbGl6ZXIoKSxcbiAgICAgICAgICAgICAgICBhbHdheXNMb2FkU3RhdGU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2U6IHBlcnNpc3RlbmNlLFxuICAgICAgICAgICAgICAgIGxhenlQZXJzaXN0ZW5jZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVyOiBuZXcgU2VyaWFsaXplcigpLFxuICAgICAgICAgICAgICAgIGFsd2F5c0xvYWRTdGF0ZTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGRlc2NyaWJlKFwiV2l0aCBNb25nb0RCIFBlcnNpc3RlbmNlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlc2NyaWJlKFwiQmFzaWMgRXhhbXBsZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgb3B0IG9mIGFsbE9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVzdEJhc2ljKG9wdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRlc2NyaWJlKFwiQ2FsY3VsYXRvciBFeGFtcGxlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBvcHQgb2YgYWxsT3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB0ZXN0Q2FsYyhvcHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkZXNjcmliZShcIkRlbGF5VG8gRXhhbXBsZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgb3B0IG9mIGFsbE9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVzdERlbGF5VG8ob3B0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59Il19
