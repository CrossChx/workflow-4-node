"use strict";
var wf4node = require("../../../");
var Func = wf4node.activities.Func;
var activityMarkup = wf4node.activities.activityMarkup;
var ActivityExecutionEngine = wf4node.activities.ActivityExecutionEngine;
var assert = require("assert");
var Bluebird = require("bluebird");
var Block = wf4node.activities.Block;
var _ = require("lodash");
describe("Logic Operators", function() {
  describe("Truthy", function() {
    it("should work", function(done) {
      var engine = new ActivityExecutionEngine({"@block": {
          t1: {"@truthy": {value: "a"}},
          t2: {"@truthy": {value: null}},
          t3: {"@truthy": {
              value: true,
              is: "is",
              isNot: "isNot"
            }},
          t4: {"@truthy": {
              value: null,
              is: "is",
              isNot: {"@func": {code: function() {
                    return "isNot";
                  }}}
            }},
          args: [["= this.t1", "= this.t2", "= this.t3", "= this.t4"]]
        }});
      engine.invoke().then(function(result) {
        assert.ok(_.isArray(result));
        assert.equal(result[0], true);
        assert.equal(result[1], false);
        assert.equal(result[2], "is");
        assert.equal(result[3], "isNot");
      }).nodeify(done);
    });
  });
  describe("Falsy", function() {
    it("should work", function(done) {
      var engine = new ActivityExecutionEngine({"@block": {
          t1: {"@falsy": {value: "a"}},
          t2: {"@falsy": {value: null}},
          t3: {"@falsy": {
              value: true,
              is: "is",
              isNot: "isNot"
            }},
          t4: {"@falsy": {
              value: null,
              is: "= 'is'",
              isNot: {"@func": {code: function() {
                    return "isNot";
                  }}}
            }},
          args: [["= this.t1", "= this.t2", "= this.t3", "= this.t4"]]
        }});
      engine.invoke().then(function(result) {
        assert.ok(_.isArray(result));
        assert.equal(result[0], false);
        assert.equal(result[1], true);
        assert.equal(result[2], "isNot");
        assert.equal(result[3], "is");
      }).nodeify(done);
    });
  });
  describe("Equals", function() {
    it("should work", function(done) {
      var engine = new ActivityExecutionEngine({"@block": {
          a: {"@equals": {
              value: function() {
                return 42;
              },
              to: "= 40 + 2 ",
              is: function() {
                return "42";
              },
              isNot: "aba"
            }},
          b: {"@equals": {
              value: function() {
                return 42;
              },
              to: "= 40 + 1 ",
              is: function() {
                return "42";
              },
              isNot: "aba"
            }},
          args: {
            a: "= this.a",
            b: "= this.b"
          }
        }});
      engine.invoke().then(function(result) {
        assert.ok(_.isPlainObject(result));
        assert.equal(result.a, "42");
        assert.equal(result.b, "aba");
      }).nodeify(done);
    });
  });
  describe("NotEquals", function() {
    it("should work", function(done) {
      var engine = new ActivityExecutionEngine({"@block": {
          a: {"@notEquals": {
              value: function() {
                return 42;
              },
              to: "= 40 + 2 ",
              is: function() {
                return "42";
              },
              isNot: "aba"
            }},
          b: {"@notEquals": {
              value: function() {
                return 42;
              },
              to: "= 40 + 1 ",
              is: function() {
                return "42";
              },
              isNot: "aba"
            }},
          args: {
            a: "= this.a",
            b: "= this.b"
          }
        }});
      engine.invoke().then(function(result) {
        assert.ok(_.isPlainObject(result));
        assert.equal(result.a, "aba");
        assert.equal(result.b, "42");
      }).nodeify(done);
    });
  });
  describe("Not, And, Or", function() {
    it("should work", function(done) {
      var engine = new ActivityExecutionEngine({"@block": {
          a: {"@and": [true, "bubu", {"@or": ["= true", false]}, {"@not": [{"@and": [true, function() {
                  return null;
                }]}]}]},
          b: {"@and": {
              args: [{"@or": ["= true", false]}, {"@not": [{"@and": [true, "= [ 42 ]"]}]}],
              isFalse: function() {
                return Bluebird.delay(100).then(function() {
                  return 42;
                });
              }
            }},
          args: {
            a: "= this.a",
            b: "= this.b"
          }
        }});
      engine.invoke().then(function(result) {
        assert.ok(_.isPlainObject(result));
        assert.equal(result.a, true);
        assert.equal(result.b, 42);
      }).nodeify(done);
    });
  });
});
//# sourceMappingURL=data:application/json;base64,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QUFDLENBQUMsR0FBRSxDQUFDLEtBQUssQUFBQyxDQUFDLFNBQVUsQUFBRCxDQUFHO0FBQ3hDLHVCQUFPLEdBQUMsQ0FBQztnQkFDYixDQUFDLENBQUM7Y0FDTjtBQUFBLFlBQ0osQ0FDSjtBQUNBLGFBQUcsQ0FBRztBQUNGLFlBQUEsQ0FBRyxXQUFTO0FBQ1osWUFBQSxDQUFHLFdBQVM7QUFBQSxVQUNoQjtBQUFBLFFBQ0osQ0FDSixDQUFDLENBQUM7QUFFRixXQUFLLE9BQU8sQUFBQyxFQUFDLEtBQUssQUFBQyxDQUNoQixTQUFVLE1BQUssQ0FBRztBQUNkLGFBQUssR0FBRyxBQUFDLENBQUMsQ0FBQSxjQUFjLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ2xDLGFBQUssTUFBTSxBQUFDLENBQUMsTUFBSyxFQUFFLENBQUcsS0FBRyxDQUFDLENBQUM7QUFDNUIsYUFBSyxNQUFNLEFBQUMsQ0FBQyxNQUFLLEVBQUUsQ0FBRyxHQUFDLENBQUMsQ0FBQztNQUM5QixDQUFDLFFBQVEsQUFBQyxDQUFDLElBQUcsQ0FBQyxDQUFDO0lBQ3hCLENBQUMsQ0FBQztFQUNOLENBQUMsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUFBIiwiZmlsZSI6ImFjdGl2aXRpZXMvbG9naWNPcGVyYXRvcnMuanMiLCJzb3VyY2VSb290IjoidGVzdHMvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGdsb2JhbCBkZXNjcmliZSxpdCAqL1xuXG5sZXQgd2Y0bm9kZSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9cIik7XG5sZXQgRnVuYyA9IHdmNG5vZGUuYWN0aXZpdGllcy5GdW5jO1xubGV0IGFjdGl2aXR5TWFya3VwID0gd2Y0bm9kZS5hY3Rpdml0aWVzLmFjdGl2aXR5TWFya3VwO1xubGV0IEFjdGl2aXR5RXhlY3V0aW9uRW5naW5lID0gd2Y0bm9kZS5hY3Rpdml0aWVzLkFjdGl2aXR5RXhlY3V0aW9uRW5naW5lO1xubGV0IGFzc2VydCA9IHJlcXVpcmUoXCJhc3NlcnRcIik7XG5sZXQgQmx1ZWJpcmQgPSByZXF1aXJlKFwiYmx1ZWJpcmRcIik7XG5sZXQgQmxvY2sgPSB3ZjRub2RlLmFjdGl2aXRpZXMuQmxvY2s7XG5sZXQgXyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5cbmRlc2NyaWJlKFwiTG9naWMgT3BlcmF0b3JzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBkZXNjcmliZShcIlRydXRoeVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGl0KFwic2hvdWxkIHdvcmtcIiwgZnVuY3Rpb24gKGRvbmUpIHtcbiAgICAgICAgICAgIGxldCBlbmdpbmUgPSBuZXcgQWN0aXZpdHlFeGVjdXRpb25FbmdpbmUoe1xuICAgICAgICAgICAgICAgIFwiQGJsb2NrXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgdDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQHRydXRoeVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHQyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkB0cnV0aHlcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHQzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkB0cnV0aHlcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzOiBcImlzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3Q6IFwiaXNOb3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0NDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJAdHJ1dGh5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogXCJpc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQGZ1bmNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImlzTm90XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcIj0gdGhpcy50MVwiLCBcIj0gdGhpcy50MlwiLCBcIj0gdGhpcy50M1wiLCBcIj0gdGhpcy50NFwiXVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGVuZ2luZS5pbnZva2UoKS50aGVuKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0Lm9rKF8uaXNBcnJheShyZXN1bHQpKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdFswXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5lcXVhbChyZXN1bHRbMV0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdFsyXSwgXCJpc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdFszXSwgXCJpc05vdFwiKTtcbiAgICAgICAgICAgICAgICB9KS5ub2RlaWZ5KGRvbmUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiRmFsc3lcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpdChcInNob3VsZCB3b3JrXCIsIGZ1bmN0aW9uIChkb25lKSB7XG4gICAgICAgICAgICBsZXQgZW5naW5lID0gbmV3IEFjdGl2aXR5RXhlY3V0aW9uRW5naW5lKHtcbiAgICAgICAgICAgICAgICBcIkBibG9ja1wiOiB7XG4gICAgICAgICAgICAgICAgICAgIHQxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkBmYWxzeVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHQyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkBmYWxzeVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdDM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQGZhbHN5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogXCJpc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90OiBcImlzTm90XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdDQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQGZhbHN5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogXCI9ICdpcydcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc05vdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkBmdW5jXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpc05vdFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBbXCI9IHRoaXMudDFcIiwgXCI9IHRoaXMudDJcIiwgXCI9IHRoaXMudDNcIiwgXCI9IHRoaXMudDRcIl1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBlbmdpbmUuaW52b2tlKCkudGhlbihcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5vayhfLmlzQXJyYXkocmVzdWx0KSk7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5lcXVhbChyZXN1bHRbMF0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdFsxXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5lcXVhbChyZXN1bHRbMl0sIFwiaXNOb3RcIik7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5lcXVhbChyZXN1bHRbM10sIFwiaXNcIik7XG4gICAgICAgICAgICAgICAgfSkubm9kZWlmeShkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIkVxdWFsc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGl0KFwic2hvdWxkIHdvcmtcIiwgZnVuY3Rpb24gKGRvbmUpIHtcbiAgICAgICAgICAgIGxldCBlbmdpbmUgPSBuZXcgQWN0aXZpdHlFeGVjdXRpb25FbmdpbmUoe1xuICAgICAgICAgICAgICAgIFwiQGJsb2NrXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgYToge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJAZXF1YWxzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzogXCI9IDQwICsgMiBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCI0MlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3Q6IFwiYWJhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJAZXF1YWxzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzogXCI9IDQwICsgMSBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCI0MlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3Q6IFwiYWJhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXJnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYTogXCI9IHRoaXMuYVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYjogXCI9IHRoaXMuYlwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZW5naW5lLmludm9rZSgpLnRoZW4oXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQub2soXy5pc1BsYWluT2JqZWN0KHJlc3VsdCkpO1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwocmVzdWx0LmEsIFwiNDJcIik7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5lcXVhbChyZXN1bHQuYiwgXCJhYmFcIik7XG4gICAgICAgICAgICAgICAgfSkubm9kZWlmeShkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIk5vdEVxdWFsc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGl0KFwic2hvdWxkIHdvcmtcIiwgZnVuY3Rpb24gKGRvbmUpIHtcbiAgICAgICAgICAgIGxldCBlbmdpbmUgPSBuZXcgQWN0aXZpdHlFeGVjdXRpb25FbmdpbmUoe1xuICAgICAgICAgICAgICAgIFwiQGJsb2NrXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgYToge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJAbm90RXF1YWxzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzogXCI9IDQwICsgMiBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCI0MlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3Q6IFwiYWJhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJAbm90RXF1YWxzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzogXCI9IDQwICsgMSBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCI0MlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3Q6IFwiYWJhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXJnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYTogXCI9IHRoaXMuYVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYjogXCI9IHRoaXMuYlwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZW5naW5lLmludm9rZSgpLnRoZW4oXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQub2soXy5pc1BsYWluT2JqZWN0KHJlc3VsdCkpO1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwocmVzdWx0LmEsIFwiYWJhXCIpO1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwocmVzdWx0LmIsIFwiNDJcIik7XG4gICAgICAgICAgICAgICAgfSkubm9kZWlmeShkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIk5vdCwgQW5kLCBPclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGl0KFwic2hvdWxkIHdvcmtcIiwgZnVuY3Rpb24gKGRvbmUpIHtcbiAgICAgICAgICAgIGxldCBlbmdpbmUgPSBuZXcgQWN0aXZpdHlFeGVjdXRpb25FbmdpbmUoe1xuICAgICAgICAgICAgICAgIFwiQGJsb2NrXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgYToge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJAYW5kXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnVidVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJAb3JcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI9IHRydWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJAbm90XCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkBhbmRcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJAYW5kXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQG9yXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIj0gdHJ1ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQG5vdFwiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkBhbmRcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPSBbIDQyIF1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ZhbHNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCbHVlYmlyZC5kZWxheSgxMDApLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGE6IFwiPSB0aGlzLmFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGI6IFwiPSB0aGlzLmJcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGVuZ2luZS5pbnZva2UoKS50aGVuKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0Lm9rKF8uaXNQbGFpbk9iamVjdChyZXN1bHQpKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdC5hLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdC5iLCA0Mik7XG4gICAgICAgICAgICAgICAgfSkubm9kZWlmeShkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTsiXX0=
