"use strict";
"use strict";
var wf4node = require("../../../");
var Func = wf4node.activities.Func;
var activityMarkup = wf4node.activities.activityMarkup;
var ActivityExecutionEngine = wf4node.activities.ActivityExecutionEngine;
var assert = require("assert");
var Bluebird = require("bluebird");
var Block = wf4node.activities.Block;
var _ = require("lodash");
describe('Logic Operators', function() {
  describe('Truthy', function() {
    it('should work', function(done) {
      var engine = new ActivityExecutionEngine({"@block": {
          t1: {"@truthy": {value: 'a'}},
          t2: {"@truthy": {value: null}},
          t3: {"@truthy": {
              value: true,
              is: 'is',
              isNot: 'isNot'
            }},
          t4: {"@truthy": {
              value: null,
              is: 'is',
              isNot: {"@func": {code: function() {
                    return 'isNot';
                  }}}
            }},
          args: [['# this.get("t1")', '# this.get("t2")', '# this.get("t3")', '# this.get("t4")']]
        }});
      engine.invoke().then(function(result) {
        assert.ok(_.isArray(result));
        assert.equal(result[0], true);
        assert.equal(result[1], false);
        assert.equal(result[2], 'is');
        assert.equal(result[3], 'isNot');
      }).nodeify(done);
    });
  });
  describe('Falsy', function() {
    it('should work', function(done) {
      var engine = new ActivityExecutionEngine({"@block": {
          t1: {"@falsy": {value: 'a'}},
          t2: {"@falsy": {value: null}},
          t3: {"@falsy": {
              value: true,
              is: 'is',
              isNot: 'isNot'
            }},
          t4: {"@falsy": {
              value: null,
              is: '# "is"',
              isNot: {"@func": {code: function() {
                    return 'isNot';
                  }}}
            }},
          args: [['# this.get("t1")', '# this.get("t2")', '# this.get("t3")', '# this.get("t4")']]
        }});
      engine.invoke().then(function(result) {
        assert.ok(_.isArray(result));
        assert.equal(result[0], false);
        assert.equal(result[1], true);
        assert.equal(result[2], 'isNot');
        assert.equal(result[3], 'is');
      }).nodeify(done);
    });
  });
  describe('Equals', function() {
    it('should work', function(done) {
      var engine = new ActivityExecutionEngine({"@block": {
          a: {"@equals": {
              value: function() {
                return 42;
              },
              to: '# 40 + 2 ',
              is: function() {
                return '42';
              },
              isNot: 'aba'
            }},
          b: {"@equals": {
              value: function() {
                return 42;
              },
              to: '# 40 + 1 ',
              is: function() {
                return '42';
              },
              isNot: 'aba'
            }},
          args: {
            a: '# this.get("a")',
            b: '# this.get("b")'
          }
        }});
      engine.invoke().then(function(result) {
        assert.ok(_.isPlainObject(result));
        assert.equal(result.a, '42');
        assert.equal(result.b, 'aba');
      }).nodeify(done);
    });
  });
  describe('NotEquals', function() {
    it('should work', function(done) {
      var engine = new ActivityExecutionEngine({"@block": {
          a: {"@notEquals": {
              value: function() {
                return 42;
              },
              to: '# 40 + 2 ',
              is: function() {
                return '42';
              },
              isNot: 'aba'
            }},
          b: {"@notEquals": {
              value: function() {
                return 42;
              },
              to: '# 40 + 1 ',
              is: function() {
                return '42';
              },
              isNot: 'aba'
            }},
          args: {
            a: '# this.get("a")',
            b: '# this.get("b")'
          }
        }});
      engine.invoke().then(function(result) {
        assert.ok(_.isPlainObject(result));
        assert.equal(result.a, 'aba');
        assert.equal(result.b, '42');
      }).nodeify(done);
    });
  });
  describe('Not, And, Or', function() {
    it('should work', function(done) {
      var engine = new ActivityExecutionEngine({"@block": {
          a: {"@and": [true, 'bubu', {"@or": ['# true', false]}, {"@not": [{"@and": [true, function() {
                  return null;
                }]}]}]},
          b: {"@and": {
              args: [{"@or": ['# true', false]}, {"@not": [{"@and": [true, '# [ 42 ]']}]}],
              isFalse: function() {
                return Bluebird.delay(100).then(function() {
                  return 42;
                });
              }
            }},
          args: {
            a: '# this.get("a")',
            b: '# this.get("b")'
          }
        }});
      engine.invoke().then(function(result) {
        assert.ok(_.isPlainObject(result));
        assert.equal(result.a, true);
        assert.equal(result.b, 42);
      }).nodeify(done);
    });
  });
});
//# sourceMappingURL=data:application/json;base64,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QVUsQUFBRCxDQUFHO0FBQ2pCLHFCQUFPLENBQUEsUUFBTyxNQUFNLEFBQUMsQ0FBQyxHQUFFLENBQUMsS0FBSyxBQUFDLENBQUMsU0FBVSxBQUFELENBQUc7QUFDeEMsdUJBQU8sR0FBQyxDQUFDO2dCQUNiLENBQUMsQ0FBQztjQUNOO0FBQUEsWUFDSixDQUNKO0FBQ0EsYUFBRyxDQUFHO0FBQ0YsWUFBQSxDQUFHLGtCQUFnQjtBQUNuQixZQUFBLENBQUcsa0JBQWdCO0FBQUEsVUFDdkI7QUFBQSxRQUNKLENBQ0osQ0FBQyxDQUFDO0FBRUYsV0FBSyxPQUFPLEFBQUMsRUFBQyxLQUFLLEFBQUMsQ0FDaEIsU0FBVSxNQUFLLENBQUc7QUFDZCxhQUFLLEdBQUcsQUFBQyxDQUFDLENBQUEsY0FBYyxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUMsQ0FBQztBQUNsQyxhQUFLLE1BQU0sQUFBQyxDQUFDLE1BQUssRUFBRSxDQUFHLEtBQUcsQ0FBQyxDQUFDO0FBQzVCLGFBQUssTUFBTSxBQUFDLENBQUMsTUFBSyxFQUFFLENBQUcsR0FBQyxDQUFDLENBQUM7TUFDOUIsQ0FBQyxRQUFRLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztJQUN4QixDQUFDLENBQUM7RUFDTixDQUFDLENBQUM7QUFDTixDQUFDLENBQUM7QUFBQSIsImZpbGUiOiJhY3Rpdml0aWVzL2xvZ2ljT3BlcmF0b3JzLmpzIiwic291cmNlUm9vdCI6InRlc3RzL2VzNiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKiBnbG9iYWwgZGVzY3JpYmUsaXQgKi9cblxubGV0IHdmNG5vZGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vXCIpO1xubGV0IEZ1bmMgPSB3ZjRub2RlLmFjdGl2aXRpZXMuRnVuYztcbmxldCBhY3Rpdml0eU1hcmt1cCA9IHdmNG5vZGUuYWN0aXZpdGllcy5hY3Rpdml0eU1hcmt1cDtcbmxldCBBY3Rpdml0eUV4ZWN1dGlvbkVuZ2luZSA9IHdmNG5vZGUuYWN0aXZpdGllcy5BY3Rpdml0eUV4ZWN1dGlvbkVuZ2luZTtcbmxldCBhc3NlcnQgPSByZXF1aXJlKFwiYXNzZXJ0XCIpO1xubGV0IEJsdWViaXJkID0gcmVxdWlyZShcImJsdWViaXJkXCIpO1xubGV0IEJsb2NrID0gd2Y0bm9kZS5hY3Rpdml0aWVzLkJsb2NrO1xubGV0IF8gPSByZXF1aXJlKFwibG9kYXNoXCIpO1xuXG5kZXNjcmliZSgnTG9naWMgT3BlcmF0b3JzJywgZnVuY3Rpb24gKCkge1xuICAgIGRlc2NyaWJlKCdUcnV0aHknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGl0KCdzaG91bGQgd29yaycsIGZ1bmN0aW9uIChkb25lKSB7XG4gICAgICAgICAgICBsZXQgZW5naW5lID0gbmV3IEFjdGl2aXR5RXhlY3V0aW9uRW5naW5lKHtcbiAgICAgICAgICAgICAgICBcIkBibG9ja1wiOiB7XG4gICAgICAgICAgICAgICAgICAgIHQxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkB0cnV0aHlcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnYSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQHRydXRoeVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdDM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQHRydXRoeVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXM6ICdpcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3Q6ICdpc05vdCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdDQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQHRydXRoeVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXM6ICdpcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJAZnVuY1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdpc05vdCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFsnIyB0aGlzLmdldChcInQxXCIpJywgJyMgdGhpcy5nZXQoXCJ0MlwiKScsICcjIHRoaXMuZ2V0KFwidDNcIiknLCAnIyB0aGlzLmdldChcInQ0XCIpJ11cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBlbmdpbmUuaW52b2tlKCkudGhlbihcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5vayhfLmlzQXJyYXkocmVzdWx0KSk7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5lcXVhbChyZXN1bHRbMF0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwocmVzdWx0WzFdLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5lcXVhbChyZXN1bHRbMl0sICdpcycpO1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwocmVzdWx0WzNdLCAnaXNOb3QnKTtcbiAgICAgICAgICAgICAgICB9KS5ub2RlaWZ5KGRvbmUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdGYWxzeScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaXQoJ3Nob3VsZCB3b3JrJywgZnVuY3Rpb24gKGRvbmUpIHtcbiAgICAgICAgICAgIGxldCBlbmdpbmUgPSBuZXcgQWN0aXZpdHlFeGVjdXRpb25FbmdpbmUoe1xuICAgICAgICAgICAgICAgIFwiQGJsb2NrXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgdDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQGZhbHN5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ2EnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHQyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkBmYWxzeVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdDM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQGZhbHN5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogJ2lzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc05vdDogJ2lzTm90J1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0NDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJAZmFsc3lcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzOiAnIyBcImlzXCInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQGZ1bmNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnaXNOb3QnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBbJyMgdGhpcy5nZXQoXCJ0MVwiKScsICcjIHRoaXMuZ2V0KFwidDJcIiknLCAnIyB0aGlzLmdldChcInQzXCIpJywgJyMgdGhpcy5nZXQoXCJ0NFwiKSddXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZW5naW5lLmludm9rZSgpLnRoZW4oXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQub2soXy5pc0FycmF5KHJlc3VsdCkpO1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwocmVzdWx0WzBdLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5lcXVhbChyZXN1bHRbMV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwocmVzdWx0WzJdLCAnaXNOb3QnKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdFszXSwgJ2lzJyk7XG4gICAgICAgICAgICAgICAgfSkubm9kZWlmeShkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnRXF1YWxzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpdCgnc2hvdWxkIHdvcmsnLCBmdW5jdGlvbiAoZG9uZSkge1xuICAgICAgICAgICAgbGV0IGVuZ2luZSA9IG5ldyBBY3Rpdml0eUV4ZWN1dGlvbkVuZ2luZSh7XG4gICAgICAgICAgICAgICAgXCJAYmxvY2tcIjoge1xuICAgICAgICAgICAgICAgICAgICBhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkBlcXVhbHNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA0MjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAnIyA0MCArIDIgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzQyJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90OiAnYWJhJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkBlcXVhbHNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA0MjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAnIyA0MCArIDEgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzQyJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90OiAnYWJhJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhOiAnIyB0aGlzLmdldChcImFcIiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgYjogJyMgdGhpcy5nZXQoXCJiXCIpJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGVuZ2luZS5pbnZva2UoKS50aGVuKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0Lm9rKF8uaXNQbGFpbk9iamVjdChyZXN1bHQpKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdC5hLCAnNDInKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdC5iLCAnYWJhJyk7XG4gICAgICAgICAgICAgICAgfSkubm9kZWlmeShkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnTm90RXF1YWxzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpdCgnc2hvdWxkIHdvcmsnLCBmdW5jdGlvbiAoZG9uZSkge1xuICAgICAgICAgICAgbGV0IGVuZ2luZSA9IG5ldyBBY3Rpdml0eUV4ZWN1dGlvbkVuZ2luZSh7XG4gICAgICAgICAgICAgICAgXCJAYmxvY2tcIjoge1xuICAgICAgICAgICAgICAgICAgICBhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkBub3RFcXVhbHNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA0MjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAnIyA0MCArIDIgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzQyJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90OiAnYWJhJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkBub3RFcXVhbHNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA0MjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAnIyA0MCArIDEgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzQyJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90OiAnYWJhJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhOiAnIyB0aGlzLmdldChcImFcIiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgYjogJyMgdGhpcy5nZXQoXCJiXCIpJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGVuZ2luZS5pbnZva2UoKS50aGVuKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0Lm9rKF8uaXNQbGFpbk9iamVjdChyZXN1bHQpKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdC5hLCAnYWJhJyk7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydC5lcXVhbChyZXN1bHQuYiwgJzQyJyk7XG4gICAgICAgICAgICAgICAgfSkubm9kZWlmeShkb25lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnTm90LCBBbmQsIE9yJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpdCgnc2hvdWxkIHdvcmsnLCBmdW5jdGlvbiAoZG9uZSkge1xuICAgICAgICAgICAgbGV0IGVuZ2luZSA9IG5ldyBBY3Rpdml0eUV4ZWN1dGlvbkVuZ2luZSh7XG4gICAgICAgICAgICAgICAgXCJAYmxvY2tcIjoge1xuICAgICAgICAgICAgICAgICAgICBhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkBhbmRcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1YnUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJAb3JcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyMgdHJ1ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQG5vdFwiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJAYW5kXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQGFuZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkBvclwiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyMgdHJ1ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJAbm90XCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQGFuZFwiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyMgWyA0MiBdJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ZhbHNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCbHVlYmlyZC5kZWxheSgxMDApLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGE6ICcjIHRoaXMuZ2V0KFwiYVwiKScsXG4gICAgICAgICAgICAgICAgICAgICAgICBiOiAnIyB0aGlzLmdldChcImJcIiknXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZW5naW5lLmludm9rZSgpLnRoZW4oXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQub2soXy5pc1BsYWluT2JqZWN0KHJlc3VsdCkpO1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwocmVzdWx0LmEsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwocmVzdWx0LmIsIDQyKTtcbiAgICAgICAgICAgICAgICB9KS5ub2RlaWZ5KGRvbmUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pOyJdfQ==
