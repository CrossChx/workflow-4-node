"use strict";
var wf4node = require("../../../");
var activityMarkup = wf4node.activities.activityMarkup;
var ActivityExecutionEngine = wf4node.activities.ActivityExecutionEngine;
var path = require("path");
var assert = require("assert");
describe("activityMarkup", function() {
  it("should load custom activity type from string", function(done) {
    var activity = activityMarkup.parse({block: {
        "@require": path.join(__dirname, "/customActivities/adder"),
        a: 10,
        b: 20,
        c: 30,
        args: [{adder: ["#this.get('a')", "#this.get('b')", "#this.get('c')"]}]
      }});
    var engine = new ActivityExecutionEngine(activity);
    engine.invoke().then(function(result) {
      assert.equal(result, 10 + 20 + 30);
    }).nodeify(done);
  });
  it("should load custom activity type from array", function(done) {
    var activity = activityMarkup.parse({
      "@require": [path.join(__dirname, "/customActivities/adder")],
      block: {
        a: 1,
        b: 2,
        c: 3,
        args: [{adder: ["#this.get('a')", "#this.get('b')", "#this.get('c')"]}]
      }
    });
    var engine = new ActivityExecutionEngine(activity);
    engine.invoke().then(function(result) {
      assert.equal(result, 1 + 2 + 3);
    }).nodeify(done);
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcmt1cFRlc3RzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsQUFBSSxFQUFBLENBQUEsT0FBTSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsV0FBVSxDQUFDLENBQUM7QUFDbEMsQUFBSSxFQUFBLENBQUEsY0FBYSxFQUFJLENBQUEsT0FBTSxXQUFXLGVBQWUsQ0FBQztBQUN0RCxBQUFJLEVBQUEsQ0FBQSx1QkFBc0IsRUFBSSxDQUFBLE9BQU0sV0FBVyx3QkFBd0IsQ0FBQztBQUN4RSxBQUFJLEVBQUEsQ0FBQSxJQUFHLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQztBQUUxQixBQUFJLEVBQUEsQ0FBQSxNQUFLLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxRQUFPLENBQUMsQ0FBQztBQUU5QixPQUFPLEFBQUMsQ0FBQyxnQkFBZSxDQUFHLFVBQVUsQUFBRCxDQUFHO0FBQ25DLEdBQUMsQUFBQyxDQUFDLDhDQUE2QyxDQUFHLFVBQVUsSUFBRyxDQUFHO0FBQy9ELEFBQUksTUFBQSxDQUFBLFFBQU8sRUFBSSxDQUFBLGNBQWEsTUFBTSxBQUFDLENBQUMsQ0FDaEMsS0FBSSxDQUFHO0FBQ0gsaUJBQVMsQ0FBRyxDQUFBLElBQUcsS0FBSyxBQUFDLENBQUMsU0FBUSxDQUFHLDBCQUF3QixDQUFDO0FBQzFELFFBQUEsQ0FBRyxHQUFDO0FBQ0osUUFBQSxDQUFHLEdBQUM7QUFDSixRQUFBLENBQUcsR0FBQztBQUNKLFdBQUcsQ0FBRyxFQUNGLENBQ0ksS0FBSSxDQUFHLEVBQUMsZ0JBQWUsQ0FBRyxpQkFBZSxDQUFHLGlCQUFlLENBQUMsQ0FDaEUsQ0FDSjtBQUFBLE1BQ0osQ0FDSixDQUFDLENBQUM7QUFFRixBQUFJLE1BQUEsQ0FBQSxNQUFLLEVBQUksSUFBSSx3QkFBc0IsQUFBQyxDQUFDLFFBQU8sQ0FBQyxDQUFDO0FBRWxELFNBQUssT0FBTyxBQUFDLEVBQUMsS0FDTixBQUFDLENBQ0wsU0FBVSxNQUFLLENBQUc7QUFDZCxXQUFLLE1BQU0sQUFBQyxDQUFDLE1BQUssQ0FBRyxDQUFBLEVBQUMsRUFBSSxHQUFDLENBQUEsQ0FBSSxHQUFDLENBQUMsQ0FBQztJQUN0QyxDQUFDLFFBQVEsQUFBQyxDQUFDLElBQUcsQ0FBQyxDQUFDO0VBQ3hCLENBQUMsQ0FBQztBQUVGLEdBQUMsQUFBQyxDQUFDLDZDQUE0QyxDQUFHLFVBQVUsSUFBRyxDQUFHO0FBQzlELEFBQUksTUFBQSxDQUFBLFFBQU8sRUFBSSxDQUFBLGNBQWEsTUFBTSxBQUFDLENBQUM7QUFDaEMsZUFBUyxDQUFHLEVBQUUsSUFBRyxLQUFLLEFBQUMsQ0FBQyxTQUFRLENBQUcsMEJBQXdCLENBQUMsQ0FBRTtBQUM5RCxVQUFJLENBQUc7QUFDSCxRQUFBLENBQUcsRUFBQTtBQUNILFFBQUEsQ0FBRyxFQUFBO0FBQ0gsUUFBQSxDQUFHLEVBQUE7QUFDSCxXQUFHLENBQUcsRUFDRixDQUNJLEtBQUksQ0FBRyxFQUFDLGdCQUFlLENBQUcsaUJBQWUsQ0FBRyxpQkFBZSxDQUFDLENBQ2hFLENBQ0o7QUFBQSxNQUNKO0FBQUEsSUFDSixDQUFDLENBQUM7QUFFRixBQUFJLE1BQUEsQ0FBQSxNQUFLLEVBQUksSUFBSSx3QkFBc0IsQUFBQyxDQUFDLFFBQU8sQ0FBQyxDQUFDO0FBRWxELFNBQUssT0FBTyxBQUFDLEVBQUMsS0FDTixBQUFDLENBQ0wsU0FBVSxNQUFLLENBQUc7QUFDZCxXQUFLLE1BQU0sQUFBQyxDQUFDLE1BQUssQ0FBRyxDQUFBLENBQUEsRUFBSSxFQUFBLENBQUEsQ0FBSSxFQUFBLENBQUMsQ0FBQztJQUNuQyxDQUFDLFFBQVEsQUFBQyxDQUFDLElBQUcsQ0FBQyxDQUFDO0VBQ3hCLENBQUMsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUFBIiwiZmlsZSI6ImFjdGl2aXRpZXMvbWFya3VwVGVzdHMuanMiLCJzb3VyY2VSb290IjoidGVzdHMvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsidmFyIHdmNG5vZGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vXCIpO1xyXG52YXIgYWN0aXZpdHlNYXJrdXAgPSB3ZjRub2RlLmFjdGl2aXRpZXMuYWN0aXZpdHlNYXJrdXA7XHJcbnZhciBBY3Rpdml0eUV4ZWN1dGlvbkVuZ2luZSA9IHdmNG5vZGUuYWN0aXZpdGllcy5BY3Rpdml0eUV4ZWN1dGlvbkVuZ2luZTtcclxudmFyIHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcclxuXHJcbnZhciBhc3NlcnQgPSByZXF1aXJlKFwiYXNzZXJ0XCIpO1xyXG5cclxuZGVzY3JpYmUoXCJhY3Rpdml0eU1hcmt1cFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpdChcInNob3VsZCBsb2FkIGN1c3RvbSBhY3Rpdml0eSB0eXBlIGZyb20gc3RyaW5nXCIsIGZ1bmN0aW9uIChkb25lKSB7XHJcbiAgICAgICAgdmFyIGFjdGl2aXR5ID0gYWN0aXZpdHlNYXJrdXAucGFyc2Uoe1xyXG4gICAgICAgICAgICBibG9jazoge1xyXG4gICAgICAgICAgICAgICAgXCJAcmVxdWlyZVwiOiBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi9jdXN0b21BY3Rpdml0aWVzL2FkZGVyXCIpLFxyXG4gICAgICAgICAgICAgICAgYTogMTAsXHJcbiAgICAgICAgICAgICAgICBiOiAyMCxcclxuICAgICAgICAgICAgICAgIGM6IDMwLFxyXG4gICAgICAgICAgICAgICAgYXJnczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkZXI6IFtcIiN0aGlzLmdldCgnYScpXCIsIFwiI3RoaXMuZ2V0KCdiJylcIiwgXCIjdGhpcy5nZXQoJ2MnKVwiXVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgZW5naW5lID0gbmV3IEFjdGl2aXR5RXhlY3V0aW9uRW5naW5lKGFjdGl2aXR5KTtcclxuXHJcbiAgICAgICAgZW5naW5lLmludm9rZSgpXHJcbiAgICAgICAgICAgIC50aGVuKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwocmVzdWx0LCAxMCArIDIwICsgMzApO1xyXG4gICAgICAgICAgICB9KS5ub2RlaWZ5KGRvbmUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJzaG91bGQgbG9hZCBjdXN0b20gYWN0aXZpdHkgdHlwZSBmcm9tIGFycmF5XCIsIGZ1bmN0aW9uIChkb25lKSB7XHJcbiAgICAgICAgdmFyIGFjdGl2aXR5ID0gYWN0aXZpdHlNYXJrdXAucGFyc2Uoe1xyXG4gICAgICAgICAgICBcIkByZXF1aXJlXCI6IFsgcGF0aC5qb2luKF9fZGlybmFtZSwgXCIvY3VzdG9tQWN0aXZpdGllcy9hZGRlclwiKSBdLFxyXG4gICAgICAgICAgICBibG9jazoge1xyXG4gICAgICAgICAgICAgICAgYTogMSxcclxuICAgICAgICAgICAgICAgIGI6IDIsXHJcbiAgICAgICAgICAgICAgICBjOiAzLFxyXG4gICAgICAgICAgICAgICAgYXJnczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkZXI6IFtcIiN0aGlzLmdldCgnYScpXCIsIFwiI3RoaXMuZ2V0KCdiJylcIiwgXCIjdGhpcy5nZXQoJ2MnKVwiXVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgZW5naW5lID0gbmV3IEFjdGl2aXR5RXhlY3V0aW9uRW5naW5lKGFjdGl2aXR5KTtcclxuXHJcbiAgICAgICAgZW5naW5lLmludm9rZSgpXHJcbiAgICAgICAgICAgIC50aGVuKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwocmVzdWx0LCAxICsgMiArIDMpO1xyXG4gICAgICAgICAgICB9KS5ub2RlaWZ5KGRvbmUpO1xyXG4gICAgfSk7XHJcbn0pOyJdfQ==
