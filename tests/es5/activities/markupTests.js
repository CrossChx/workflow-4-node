"use strict";
var wf4node = require("../../../");
var activityMarkup = wf4node.activities.activityMarkup;
var ActivityExecutionEngine = wf4node.activities.ActivityExecutionEngine;
var path = require("path");
var assert = require("assert");
describe("activityMarkup", function() {
  it("should load custom activity type from string", function(done) {
    var activity = activityMarkup.parse({block: {
        "@require": path.join(__dirname, "/customActivities/adder"),
        a: 10,
        b: 20,
        c: 30,
        args: [{adder: ["#this.get('a')", "#this.get('b')", "#this.get('c')"]}]
      }});
    var engine = new ActivityExecutionEngine(activity);
    engine.invoke().then(function(result) {
      assert.equal(result, 10 + 20 + 30);
    }).nodeify(done);
  });
  it("should load custom activity type from array", function(done) {
    var activity = activityMarkup.parse({
      "@require": [path.join(__dirname, "/customActivities/adder")],
      block: {
        a: 1,
        b: 2,
        c: 3,
        args: [{adder: ["#this.get('a')", "#this.get('b')", "#this.get('c')"]}]
      }
    });
    var engine = new ActivityExecutionEngine(activity);
    engine.invoke().then(function(result) {
      assert.equal(result, 1 + 2 + 3);
    }).nodeify(done);
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcmt1cFRlc3RzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsQUFBSSxFQUFBLENBQUEsT0FBTSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsV0FBVSxDQUFDLENBQUM7QUFDbEMsQUFBSSxFQUFBLENBQUEsY0FBYSxFQUFJLENBQUEsT0FBTSxXQUFXLGVBQWUsQ0FBQztBQUN0RCxBQUFJLEVBQUEsQ0FBQSx1QkFBc0IsRUFBSSxDQUFBLE9BQU0sV0FBVyx3QkFBd0IsQ0FBQztBQUN4RSxBQUFJLEVBQUEsQ0FBQSxJQUFHLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQztBQUUxQixBQUFJLEVBQUEsQ0FBQSxNQUFLLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxRQUFPLENBQUMsQ0FBQztBQUU5QixPQUFPLEFBQUMsQ0FBQyxnQkFBZSxDQUFHLFVBQVUsQUFBRCxDQUFHO0FBQ25DLEdBQUMsQUFBQyxDQUFDLDhDQUE2QyxDQUFHLFVBQVUsSUFBRyxDQUFHO0FBQy9ELEFBQUksTUFBQSxDQUFBLFFBQU8sRUFBSSxDQUFBLGNBQWEsTUFBTSxBQUFDLENBQUMsQ0FDaEMsS0FBSSxDQUFHO0FBQ0gsaUJBQVMsQ0FBRyxDQUFBLElBQUcsS0FBSyxBQUFDLENBQUMsU0FBUSxDQUFHLDBCQUF3QixDQUFDO0FBQzFELFFBQUEsQ0FBRyxHQUFDO0FBQ0osUUFBQSxDQUFHLEdBQUM7QUFDSixRQUFBLENBQUcsR0FBQztBQUNKLFdBQUcsQ0FBRyxFQUNGLENBQ0ksS0FBSSxDQUFHLEVBQUMsZ0JBQWUsQ0FBRyxpQkFBZSxDQUFHLGlCQUFlLENBQUMsQ0FDaEUsQ0FDSjtBQUFBLE1BQ0osQ0FDSixDQUFDLENBQUM7QUFFRixBQUFJLE1BQUEsQ0FBQSxNQUFLLEVBQUksSUFBSSx3QkFBc0IsQUFBQyxDQUFDLFFBQU8sQ0FBQyxDQUFDO0FBRWxELFNBQUssT0FBTyxBQUFDLEVBQUMsS0FDTixBQUFDLENBQ0wsU0FBVSxNQUFLLENBQUc7QUFDZCxXQUFLLE1BQU0sQUFBQyxDQUFDLE1BQUssQ0FBRyxDQUFBLEVBQUMsRUFBSSxHQUFDLENBQUEsQ0FBSSxHQUFDLENBQUMsQ0FBQztJQUN0QyxDQUFDLFFBQVEsQUFBQyxDQUFDLElBQUcsQ0FBQyxDQUFDO0VBQ3hCLENBQUMsQ0FBQztBQUVGLEdBQUMsQUFBQyxDQUFDLDZDQUE0QyxDQUFHLFVBQVUsSUFBRyxDQUFHO0FBQzlELEFBQUksTUFBQSxDQUFBLFFBQU8sRUFBSSxDQUFBLGNBQWEsTUFBTSxBQUFDLENBQUM7QUFDaEMsZUFBUyxDQUFHLEVBQUUsSUFBRyxLQUFLLEFBQUMsQ0FBQyxTQUFRLENBQUcsMEJBQXdCLENBQUMsQ0FBRTtBQUM5RCxVQUFJLENBQUc7QUFDSCxRQUFBLENBQUcsRUFBQTtBQUNILFFBQUEsQ0FBRyxFQUFBO0FBQ0gsUUFBQSxDQUFHLEVBQUE7QUFDSCxXQUFHLENBQUcsRUFDRixDQUNJLEtBQUksQ0FBRyxFQUFDLGdCQUFlLENBQUcsaUJBQWUsQ0FBRyxpQkFBZSxDQUFDLENBQ2hFLENBQ0o7QUFBQSxNQUNKO0FBQUEsSUFDSixDQUFDLENBQUM7QUFFRixBQUFJLE1BQUEsQ0FBQSxNQUFLLEVBQUksSUFBSSx3QkFBc0IsQUFBQyxDQUFDLFFBQU8sQ0FBQyxDQUFDO0FBRWxELFNBQUssT0FBTyxBQUFDLEVBQUMsS0FDTixBQUFDLENBQ0wsU0FBVSxNQUFLLENBQUc7QUFDZCxXQUFLLE1BQU0sQUFBQyxDQUFDLE1BQUssQ0FBRyxDQUFBLENBQUEsRUFBSSxFQUFBLENBQUEsQ0FBSSxFQUFBLENBQUMsQ0FBQztJQUNuQyxDQUFDLFFBQVEsQUFBQyxDQUFDLElBQUcsQ0FBQyxDQUFDO0VBQ3hCLENBQUMsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUFBIiwiZmlsZSI6ImFjdGl2aXRpZXMvbWFya3VwVGVzdHMuanMiLCJzb3VyY2VSb290IjoidGVzdHMvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsidmFyIHdmNG5vZGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vXCIpO1xudmFyIGFjdGl2aXR5TWFya3VwID0gd2Y0bm9kZS5hY3Rpdml0aWVzLmFjdGl2aXR5TWFya3VwO1xudmFyIEFjdGl2aXR5RXhlY3V0aW9uRW5naW5lID0gd2Y0bm9kZS5hY3Rpdml0aWVzLkFjdGl2aXR5RXhlY3V0aW9uRW5naW5lO1xudmFyIHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcblxudmFyIGFzc2VydCA9IHJlcXVpcmUoXCJhc3NlcnRcIik7XG5cbmRlc2NyaWJlKFwiYWN0aXZpdHlNYXJrdXBcIiwgZnVuY3Rpb24gKCkge1xuICAgIGl0KFwic2hvdWxkIGxvYWQgY3VzdG9tIGFjdGl2aXR5IHR5cGUgZnJvbSBzdHJpbmdcIiwgZnVuY3Rpb24gKGRvbmUpIHtcbiAgICAgICAgdmFyIGFjdGl2aXR5ID0gYWN0aXZpdHlNYXJrdXAucGFyc2Uoe1xuICAgICAgICAgICAgYmxvY2s6IHtcbiAgICAgICAgICAgICAgICBcIkByZXF1aXJlXCI6IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiL2N1c3RvbUFjdGl2aXRpZXMvYWRkZXJcIiksXG4gICAgICAgICAgICAgICAgYTogMTAsXG4gICAgICAgICAgICAgICAgYjogMjAsXG4gICAgICAgICAgICAgICAgYzogMzAsXG4gICAgICAgICAgICAgICAgYXJnczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRlcjogW1wiI3RoaXMuZ2V0KCdhJylcIiwgXCIjdGhpcy5nZXQoJ2InKVwiLCBcIiN0aGlzLmdldCgnYycpXCJdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBlbmdpbmUgPSBuZXcgQWN0aXZpdHlFeGVjdXRpb25FbmdpbmUoYWN0aXZpdHkpO1xuXG4gICAgICAgIGVuZ2luZS5pbnZva2UoKVxuICAgICAgICAgICAgLnRoZW4oXG4gICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdCwgMTAgKyAyMCArIDMwKTtcbiAgICAgICAgICAgIH0pLm5vZGVpZnkoZG9uZSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBsb2FkIGN1c3RvbSBhY3Rpdml0eSB0eXBlIGZyb20gYXJyYXlcIiwgZnVuY3Rpb24gKGRvbmUpIHtcbiAgICAgICAgdmFyIGFjdGl2aXR5ID0gYWN0aXZpdHlNYXJrdXAucGFyc2Uoe1xuICAgICAgICAgICAgXCJAcmVxdWlyZVwiOiBbIHBhdGguam9pbihfX2Rpcm5hbWUsIFwiL2N1c3RvbUFjdGl2aXRpZXMvYWRkZXJcIikgXSxcbiAgICAgICAgICAgIGJsb2NrOiB7XG4gICAgICAgICAgICAgICAgYTogMSxcbiAgICAgICAgICAgICAgICBiOiAyLFxuICAgICAgICAgICAgICAgIGM6IDMsXG4gICAgICAgICAgICAgICAgYXJnczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRlcjogW1wiI3RoaXMuZ2V0KCdhJylcIiwgXCIjdGhpcy5nZXQoJ2InKVwiLCBcIiN0aGlzLmdldCgnYycpXCJdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBlbmdpbmUgPSBuZXcgQWN0aXZpdHlFeGVjdXRpb25FbmdpbmUoYWN0aXZpdHkpO1xuXG4gICAgICAgIGVuZ2luZS5pbnZva2UoKVxuICAgICAgICAgICAgLnRoZW4oXG4gICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdCwgMSArIDIgKyAzKTtcbiAgICAgICAgICAgIH0pLm5vZGVpZnkoZG9uZSk7XG4gICAgfSk7XG59KTsiXX0=
