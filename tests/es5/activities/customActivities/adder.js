"use strict";
var wf4node = require("../../../../");
var util = require("util");
var Activity = wf4node.activities.Activity;
var _ = require("lodash");
function Adder() {
  Activity.call(this);
}
util.inherits(Adder, Activity);
Adder.prototype.run = function(callContext, args) {
  callContext.schedule(args, "_argsGot");
};
Adder.prototype._argsGot = function(callContext, reason, result) {
  if (reason == Activity.states.complete) {
    var sum = 0;
    result.forEach(function(a) {
      if (_.isNumber(a)) {
        sum += a;
      } else if (_.isArray(a)) {
        sum += _.sum(a);
      }
    });
    callContext.complete(sum);
  } else {
    callContext.end(reason, result);
  }
};
module.exports = Adder;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsQUFBSSxFQUFBLENBQUEsT0FBTSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsY0FBYSxDQUFDLENBQUM7QUFDckMsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsT0FBTSxXQUFXLFNBQVMsQ0FBQztBQUMxQyxBQUFJLEVBQUEsQ0FBQSxDQUFBLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxRQUFPLENBQUMsQ0FBQztBQUV6QixPQUFTLE1BQUksQ0FBRSxBQUFELENBQUc7QUFDYixTQUFPLEtBQUssQUFBQyxDQUFDLElBQUcsQ0FBQyxDQUFDO0FBQ3ZCO0FBQUEsQUFFQSxHQUFHLFNBQVMsQUFBQyxDQUFDLEtBQUksQ0FBRyxTQUFPLENBQUMsQ0FBQztBQUU5QixJQUFJLFVBQVUsSUFBSSxFQUFJLFVBQVMsV0FBVSxDQUFHLENBQUEsSUFBRyxDQUFHO0FBQzlDLFlBQVUsU0FBUyxBQUFDLENBQUMsSUFBRyxDQUFHLFdBQVMsQ0FBQyxDQUFDO0FBQzFDLENBQUM7QUFFRCxJQUFJLFVBQVUsU0FBUyxFQUFJLFVBQVMsV0FBVSxDQUFHLENBQUEsTUFBSyxDQUFHLENBQUEsTUFBSyxDQUFHO0FBQzdELEtBQUksTUFBSyxHQUFLLENBQUEsUUFBTyxPQUFPLFNBQVMsQ0FBRztBQUNwQyxBQUFJLE1BQUEsQ0FBQSxHQUFFLEVBQUksRUFBQSxDQUFDO0FBQ1gsU0FBSyxRQUFRLEFBQUMsQ0FBQyxTQUFVLENBQUEsQ0FBRztBQUN4QixTQUFJLENBQUEsU0FBUyxBQUFDLENBQUMsQ0FBQSxDQUFDLENBQUc7QUFDZixVQUFFLEdBQUssRUFBQSxDQUFDO01BQ1osS0FDSyxLQUFJLENBQUEsUUFBUSxBQUFDLENBQUMsQ0FBQSxDQUFDLENBQUc7QUFDbkIsVUFBRSxHQUFLLENBQUEsQ0FBQSxJQUFJLEFBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztNQUNuQjtBQUFBLElBQ0osQ0FBQyxDQUFDO0FBQ0YsY0FBVSxTQUFTLEFBQUMsQ0FBQyxHQUFFLENBQUMsQ0FBQztFQUM3QixLQUNLO0FBQ0QsY0FBVSxJQUFJLEFBQUMsQ0FBQyxNQUFLLENBQUcsT0FBSyxDQUFDLENBQUM7RUFDbkM7QUFBQSxBQUNKLENBQUE7QUFFQSxLQUFLLFFBQVEsRUFBSSxNQUFJLENBQUM7QUFDdEIiLCJmaWxlIjoiYWN0aXZpdGllcy9jdXN0b21BY3Rpdml0aWVzL2FkZGVyLmpzIiwic291cmNlUm9vdCI6InRlc3RzL2VzNiIsInNvdXJjZXNDb250ZW50IjpbInZhciB3ZjRub2RlID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL1wiKTtcbnZhciB1dGlsID0gcmVxdWlyZShcInV0aWxcIik7XG52YXIgQWN0aXZpdHkgPSB3ZjRub2RlLmFjdGl2aXRpZXMuQWN0aXZpdHk7XG52YXIgXyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5cbmZ1bmN0aW9uIEFkZGVyKCkge1xuICAgIEFjdGl2aXR5LmNhbGwodGhpcyk7XG59XG5cbnV0aWwuaW5oZXJpdHMoQWRkZXIsIEFjdGl2aXR5KTtcblxuQWRkZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKGNhbGxDb250ZXh0LCBhcmdzKSB7XG4gICAgY2FsbENvbnRleHQuc2NoZWR1bGUoYXJncywgXCJfYXJnc0dvdFwiKTtcbn07XG5cbkFkZGVyLnByb3RvdHlwZS5fYXJnc0dvdCA9IGZ1bmN0aW9uKGNhbGxDb250ZXh0LCByZWFzb24sIHJlc3VsdCkge1xuICAgIGlmIChyZWFzb24gPT0gQWN0aXZpdHkuc3RhdGVzLmNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBzdW0gPSAwO1xuICAgICAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgaWYgKF8uaXNOdW1iZXIoYSkpIHtcbiAgICAgICAgICAgICAgICBzdW0gKz0gYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKF8uaXNBcnJheShhKSkge1xuICAgICAgICAgICAgICAgIHN1bSArPSBfLnN1bShhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNhbGxDb250ZXh0LmNvbXBsZXRlKHN1bSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjYWxsQ29udGV4dC5lbmQocmVhc29uLCByZXN1bHQpO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBZGRlcjtcbiJdfQ==
