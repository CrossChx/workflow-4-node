"use strict";
var Activity = require("./activity");
var util = require("util");
var Declarator = require("./declarator");
function Block() {
  Declarator.call(this);
}
util.inherits(Block, Declarator);
Block.prototype.varsDeclared = function(callContext, args) {
  var todo = [];
  this.set("_todo", todo);
  if (args.length) {
    for (var i = args.length - 1; i >= 1; i--) {
      todo.push(args[i]);
    }
    callContext.schedule(args[0], "_argGot");
  } else {
    callContext.end(Activity.states.complete, null);
  }
};
Block.prototype._argGot = function(callContext, reason, result) {
  var todo = this.get("_todo");
  if (reason === Activity.states.complete) {
    if (todo.length === 0) {
      callContext.complete(result);
    } else {
      callContext.schedule(todo.pop(), "_argGot");
    }
  } else {
    callContext.end(reason, result);
  }
};
module.exports = Block;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJsb2NrLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsQUFBSSxFQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsWUFBVyxDQUFDLENBQUM7QUFDcEMsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsVUFBUyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsY0FBYSxDQUFDLENBQUM7QUFFeEMsT0FBUyxNQUFJLENBQUUsQUFBRCxDQUFHO0FBQ2IsV0FBUyxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztBQUN6QjtBQUFBLEFBRUEsR0FBRyxTQUFTLEFBQUMsQ0FBQyxLQUFJLENBQUcsV0FBUyxDQUFDLENBQUM7QUFFaEMsSUFBSSxVQUFVLGFBQWEsRUFBSSxVQUFVLFdBQVUsQ0FBRyxDQUFBLElBQUcsQ0FBRztBQUN4RCxBQUFJLElBQUEsQ0FBQSxJQUFHLEVBQUksR0FBQyxDQUFDO0FBQ2IsS0FBRyxJQUFJLEFBQUMsQ0FBQyxPQUFNLENBQUcsS0FBRyxDQUFDLENBQUM7QUFDdkIsS0FBSSxJQUFHLE9BQU8sQ0FBRztBQUNiLFFBQVMsR0FBQSxDQUFBLENBQUEsRUFBSSxDQUFBLElBQUcsT0FBTyxFQUFJLEVBQUEsQ0FBRyxDQUFBLENBQUEsR0FBSyxFQUFBLENBQUcsQ0FBQSxDQUFBLEVBQUUsQ0FBRztBQUN2QyxTQUFHLEtBQUssQUFBQyxDQUFDLElBQUcsQ0FBRSxDQUFBLENBQUMsQ0FBQyxDQUFDO0lBQ3RCO0FBQUEsQUFDQSxjQUFVLFNBQVMsQUFBQyxDQUFDLElBQUcsQ0FBRSxDQUFBLENBQUMsQ0FBRyxVQUFRLENBQUMsQ0FBQztFQUM1QyxLQUNLO0FBQ0QsY0FBVSxJQUFJLEFBQUMsQ0FBQyxRQUFPLE9BQU8sU0FBUyxDQUFHLEtBQUcsQ0FBQyxDQUFDO0VBQ25EO0FBQUEsQUFDSixDQUFBO0FBRUEsSUFBSSxVQUFVLFFBQVEsRUFBSSxVQUFVLFdBQVUsQ0FBRyxDQUFBLE1BQUssQ0FBRyxDQUFBLE1BQUssQ0FBRztBQUM3RCxBQUFJLElBQUEsQ0FBQSxJQUFHLEVBQUksQ0FBQSxJQUFHLElBQUksQUFBQyxDQUFDLE9BQU0sQ0FBQyxDQUFDO0FBQzVCLEtBQUksTUFBSyxJQUFNLENBQUEsUUFBTyxPQUFPLFNBQVMsQ0FBRztBQUNyQyxPQUFJLElBQUcsT0FBTyxJQUFNLEVBQUEsQ0FBRztBQUNuQixnQkFBVSxTQUFTLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQztJQUNoQyxLQUNLO0FBQ0QsZ0JBQVUsU0FBUyxBQUFDLENBQUMsSUFBRyxJQUFJLEFBQUMsRUFBQyxDQUFHLFVBQVEsQ0FBQyxDQUFDO0lBQy9DO0FBQUEsRUFDSixLQUNLO0FBQ0QsY0FBVSxJQUFJLEFBQUMsQ0FBQyxNQUFLLENBQUcsT0FBSyxDQUFDLENBQUM7RUFDbkM7QUFBQSxBQUNKLENBQUE7QUFFQSxLQUFLLFFBQVEsRUFBSSxNQUFJLENBQUM7QUFBQSIsImZpbGUiOiJhY3Rpdml0aWVzL2Jsb2NrLmpzIiwic291cmNlUm9vdCI6ImxpYi9lczYiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQWN0aXZpdHkgPSByZXF1aXJlKFwiLi9hY3Rpdml0eVwiKTtcbnZhciB1dGlsID0gcmVxdWlyZShcInV0aWxcIik7XG52YXIgRGVjbGFyYXRvciA9IHJlcXVpcmUoXCIuL2RlY2xhcmF0b3JcIik7XG5cbmZ1bmN0aW9uIEJsb2NrKCkge1xuICAgIERlY2xhcmF0b3IuY2FsbCh0aGlzKTtcbn1cblxudXRpbC5pbmhlcml0cyhCbG9jaywgRGVjbGFyYXRvcik7XG5cbkJsb2NrLnByb3RvdHlwZS52YXJzRGVjbGFyZWQgPSBmdW5jdGlvbiAoY2FsbENvbnRleHQsIGFyZ3MpIHtcbiAgICB2YXIgdG9kbyA9IFtdO1xuICAgIHRoaXMuc2V0KFwiX3RvZG9cIiwgdG9kbyk7XG4gICAgaWYgKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSBhcmdzLmxlbmd0aCAtIDE7IGkgPj0gMTsgaS0tKSB7XG4gICAgICAgICAgICB0b2RvLnB1c2goYXJnc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbENvbnRleHQuc2NoZWR1bGUoYXJnc1swXSwgXCJfYXJnR290XCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2FsbENvbnRleHQuZW5kKEFjdGl2aXR5LnN0YXRlcy5jb21wbGV0ZSwgbnVsbCk7XG4gICAgfVxufVxuXG5CbG9jay5wcm90b3R5cGUuX2FyZ0dvdCA9IGZ1bmN0aW9uIChjYWxsQ29udGV4dCwgcmVhc29uLCByZXN1bHQpIHtcbiAgICB2YXIgdG9kbyA9IHRoaXMuZ2V0KFwiX3RvZG9cIik7XG4gICAgaWYgKHJlYXNvbiA9PT0gQWN0aXZpdHkuc3RhdGVzLmNvbXBsZXRlKSB7XG4gICAgICAgIGlmICh0b2RvLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY2FsbENvbnRleHQuY29tcGxldGUocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxDb250ZXh0LnNjaGVkdWxlKHRvZG8ucG9wKCksIFwiX2FyZ0dvdFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2FsbENvbnRleHQuZW5kKHJlYXNvbiwgcmVzdWx0KTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmxvY2s7Il19
