"use strict";
var Activity = require("./activity");
var util = require("util");
var Declarator = require("./declarator");
function Block() {
  Declarator.call(this);
}
util.inherits(Block, Declarator);
Block.prototype.varsDeclared = function(callContext, args) {
  var todo = [];
  this._todo = todo;
  if (args.length) {
    for (var i = args.length - 1; i >= 1; i--) {
      todo.push(args[i]);
    }
    callContext.schedule(args[0], "_argGot");
  } else {
    callContext.end(Activity.states.complete, null);
  }
};
Block.prototype._argGot = function(callContext, reason, result) {
  var todo = this._todo;
  if (reason === Activity.states.complete) {
    if (todo.length === 0) {
      callContext.complete(result);
    } else {
      callContext.schedule(todo.pop(), "_argGot");
    }
  } else {
    callContext.end(reason, result);
  }
};
module.exports = Block;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJsb2NrLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsQUFBSSxFQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsWUFBVyxDQUFDLENBQUM7QUFDcEMsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsVUFBUyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsY0FBYSxDQUFDLENBQUM7QUFFeEMsT0FBUyxNQUFJLENBQUUsQUFBRCxDQUFHO0FBQ2IsV0FBUyxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztBQUN6QjtBQUFBLEFBRUEsR0FBRyxTQUFTLEFBQUMsQ0FBQyxLQUFJLENBQUcsV0FBUyxDQUFDLENBQUM7QUFFaEMsSUFBSSxVQUFVLGFBQWEsRUFBSSxVQUFVLFdBQVUsQ0FBRyxDQUFBLElBQUcsQ0FBRztBQUN4RCxBQUFJLElBQUEsQ0FBQSxJQUFHLEVBQUksR0FBQyxDQUFDO0FBQ2IsS0FBRyxNQUFNLEVBQUksS0FBRyxDQUFDO0FBQ2pCLEtBQUksSUFBRyxPQUFPLENBQUc7QUFDYixRQUFTLEdBQUEsQ0FBQSxDQUFBLEVBQUksQ0FBQSxJQUFHLE9BQU8sRUFBSSxFQUFBLENBQUcsQ0FBQSxDQUFBLEdBQUssRUFBQSxDQUFHLENBQUEsQ0FBQSxFQUFFLENBQUc7QUFDdkMsU0FBRyxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUUsQ0FBQSxDQUFDLENBQUMsQ0FBQztJQUN0QjtBQUFBLEFBQ0EsY0FBVSxTQUFTLEFBQUMsQ0FBQyxJQUFHLENBQUUsQ0FBQSxDQUFDLENBQUcsVUFBUSxDQUFDLENBQUM7RUFDNUMsS0FDSztBQUNELGNBQVUsSUFBSSxBQUFDLENBQUMsUUFBTyxPQUFPLFNBQVMsQ0FBRyxLQUFHLENBQUMsQ0FBQztFQUNuRDtBQUFBLEFBQ0osQ0FBQTtBQUVBLElBQUksVUFBVSxRQUFRLEVBQUksVUFBVSxXQUFVLENBQUcsQ0FBQSxNQUFLLENBQUcsQ0FBQSxNQUFLLENBQUc7QUFDN0QsQUFBSSxJQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsSUFBRyxNQUFNLENBQUM7QUFDckIsS0FBSSxNQUFLLElBQU0sQ0FBQSxRQUFPLE9BQU8sU0FBUyxDQUFHO0FBQ3JDLE9BQUksSUFBRyxPQUFPLElBQU0sRUFBQSxDQUFHO0FBQ25CLGdCQUFVLFNBQVMsQUFBQyxDQUFDLE1BQUssQ0FBQyxDQUFDO0lBQ2hDLEtBQ0s7QUFDRCxnQkFBVSxTQUFTLEFBQUMsQ0FBQyxJQUFHLElBQUksQUFBQyxFQUFDLENBQUcsVUFBUSxDQUFDLENBQUM7SUFDL0M7QUFBQSxFQUNKLEtBQ0s7QUFDRCxjQUFVLElBQUksQUFBQyxDQUFDLE1BQUssQ0FBRyxPQUFLLENBQUMsQ0FBQztFQUNuQztBQUFBLEFBQ0osQ0FBQTtBQUVBLEtBQUssUUFBUSxFQUFJLE1BQUksQ0FBQztBQUFBIiwiZmlsZSI6ImFjdGl2aXRpZXMvYmxvY2suanMiLCJzb3VyY2VSb290IjoibGliL2VzNiIsInNvdXJjZXNDb250ZW50IjpbInZhciBBY3Rpdml0eSA9IHJlcXVpcmUoXCIuL2FjdGl2aXR5XCIpO1xudmFyIHV0aWwgPSByZXF1aXJlKFwidXRpbFwiKTtcbnZhciBEZWNsYXJhdG9yID0gcmVxdWlyZShcIi4vZGVjbGFyYXRvclwiKTtcblxuZnVuY3Rpb24gQmxvY2soKSB7XG4gICAgRGVjbGFyYXRvci5jYWxsKHRoaXMpO1xufVxuXG51dGlsLmluaGVyaXRzKEJsb2NrLCBEZWNsYXJhdG9yKTtcblxuQmxvY2sucHJvdG90eXBlLnZhcnNEZWNsYXJlZCA9IGZ1bmN0aW9uIChjYWxsQ29udGV4dCwgYXJncykge1xuICAgIHZhciB0b2RvID0gW107XG4gICAgdGhpcy5fdG9kbyA9IHRvZG87XG4gICAgaWYgKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSBhcmdzLmxlbmd0aCAtIDE7IGkgPj0gMTsgaS0tKSB7XG4gICAgICAgICAgICB0b2RvLnB1c2goYXJnc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbENvbnRleHQuc2NoZWR1bGUoYXJnc1swXSwgXCJfYXJnR290XCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2FsbENvbnRleHQuZW5kKEFjdGl2aXR5LnN0YXRlcy5jb21wbGV0ZSwgbnVsbCk7XG4gICAgfVxufVxuXG5CbG9jay5wcm90b3R5cGUuX2FyZ0dvdCA9IGZ1bmN0aW9uIChjYWxsQ29udGV4dCwgcmVhc29uLCByZXN1bHQpIHtcbiAgICB2YXIgdG9kbyA9IHRoaXMuX3RvZG87XG4gICAgaWYgKHJlYXNvbiA9PT0gQWN0aXZpdHkuc3RhdGVzLmNvbXBsZXRlKSB7XG4gICAgICAgIGlmICh0b2RvLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY2FsbENvbnRleHQuY29tcGxldGUocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxDb250ZXh0LnNjaGVkdWxlKHRvZG8ucG9wKCksIFwiX2FyZ0dvdFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2FsbENvbnRleHQuZW5kKHJlYXNvbiwgcmVzdWx0KTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmxvY2s7Il19
