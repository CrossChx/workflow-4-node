"use strict";
var Activity = require("./activity");
var util = require("util");
function WaitForBookmark() {
  Activity.call(this);
  this.bookmarkName = "";
}
util.inherits(WaitForBookmark, Activity);
WaitForBookmark.prototype.run = function(callContext, args) {
  var bookmarkName = this.get("bookmarkName");
  if (!bookmarkName) {
    callContext.fail(new Error("WaitForBookmark activity's property 'bookmarkName' is not a non-empty string."));
    return ;
  }
  callContext.createBookmark(bookmarkName, "_bmReached");
  callContext.idle();
};
WaitForBookmark.prototype._bmReached = function(callContext, reason, result) {
  callContext.end(reason, result);
};
module.exports = WaitForBookmark;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndhaXRGb3JCb29rbWFyay5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLEFBQUksRUFBQSxDQUFBLFFBQU8sRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFlBQVcsQ0FBQyxDQUFDO0FBQ3BDLEFBQUksRUFBQSxDQUFBLElBQUcsRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLE1BQUssQ0FBQyxDQUFDO0FBRTFCLE9BQVMsZ0JBQWMsQ0FBRSxBQUFELENBQUc7QUFDdkIsU0FBTyxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztBQUNuQixLQUFHLGFBQWEsRUFBSSxHQUFDLENBQUM7QUFDMUI7QUFBQSxBQUVBLEdBQUcsU0FBUyxBQUFDLENBQUMsZUFBYyxDQUFHLFNBQU8sQ0FBQyxDQUFDO0FBRXhDLGNBQWMsVUFBVSxJQUFJLEVBQUksVUFBVSxXQUFVLENBQUcsQ0FBQSxJQUFHLENBQUc7QUFDekQsQUFBSSxJQUFBLENBQUEsWUFBVyxFQUFJLENBQUEsSUFBRyxJQUFJLEFBQUMsQ0FBQyxjQUFhLENBQUMsQ0FBQztBQUUzQyxLQUFJLENBQUMsWUFBVyxDQUFHO0FBQ2YsY0FBVSxLQUFLLEFBQUMsQ0FBQyxHQUFJLE1BQUksQUFBQyxDQUFDLCtFQUE4RSxDQUFDLENBQUMsQ0FBQztBQUM1RyxXQUFNO0VBQ1Y7QUFBQSxBQUVBLFlBQVUsZUFBZSxBQUFDLENBQUMsWUFBVyxDQUFHLGFBQVcsQ0FBQyxDQUFDO0FBQ3RELFlBQVUsS0FBSyxBQUFDLEVBQUMsQ0FBQztBQUN0QixDQUFBO0FBRUEsY0FBYyxVQUFVLFdBQVcsRUFBSSxVQUFVLFdBQVUsQ0FBRyxDQUFBLE1BQUssQ0FBRyxDQUFBLE1BQUssQ0FBRztBQUMxRSxZQUFVLElBQUksQUFBQyxDQUFDLE1BQUssQ0FBRyxPQUFLLENBQUMsQ0FBQztBQUNuQyxDQUFBO0FBRUEsS0FBSyxRQUFRLEVBQUksZ0JBQWMsQ0FBQztBQUNoQyIsImZpbGUiOiJhY3Rpdml0aWVzL3dhaXRGb3JCb29rbWFyay5qcyIsInNvdXJjZVJvb3QiOiJsaWIvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsidmFyIEFjdGl2aXR5ID0gcmVxdWlyZShcIi4vYWN0aXZpdHlcIik7XHJcbnZhciB1dGlsID0gcmVxdWlyZShcInV0aWxcIik7XHJcblxyXG5mdW5jdGlvbiBXYWl0Rm9yQm9va21hcmsoKSB7XHJcbiAgICBBY3Rpdml0eS5jYWxsKHRoaXMpO1xyXG4gICAgdGhpcy5ib29rbWFya05hbWUgPSBcIlwiO1xyXG59XHJcblxyXG51dGlsLmluaGVyaXRzKFdhaXRGb3JCb29rbWFyaywgQWN0aXZpdHkpO1xyXG5cclxuV2FpdEZvckJvb2ttYXJrLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoY2FsbENvbnRleHQsIGFyZ3MpIHtcclxuICAgIHZhciBib29rbWFya05hbWUgPSB0aGlzLmdldChcImJvb2ttYXJrTmFtZVwiKTtcclxuXHJcbiAgICBpZiAoIWJvb2ttYXJrTmFtZSkge1xyXG4gICAgICAgIGNhbGxDb250ZXh0LmZhaWwobmV3IEVycm9yKFwiV2FpdEZvckJvb2ttYXJrIGFjdGl2aXR5J3MgcHJvcGVydHkgJ2Jvb2ttYXJrTmFtZScgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZy5cIikpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYWxsQ29udGV4dC5jcmVhdGVCb29rbWFyayhib29rbWFya05hbWUsIFwiX2JtUmVhY2hlZFwiKTtcclxuICAgIGNhbGxDb250ZXh0LmlkbGUoKTtcclxufVxyXG5cclxuV2FpdEZvckJvb2ttYXJrLnByb3RvdHlwZS5fYm1SZWFjaGVkID0gZnVuY3Rpb24gKGNhbGxDb250ZXh0LCByZWFzb24sIHJlc3VsdCkge1xyXG4gICAgY2FsbENvbnRleHQuZW5kKHJlYXNvbiwgcmVzdWx0KTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBXYWl0Rm9yQm9va21hcms7XHJcbiJdfQ==
