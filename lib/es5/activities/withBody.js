"use strict";
"use strict";
var Activity = require("./activity");
var util = require("util");
var _ = require("lodash");
var Block = require("./block");
function WithBody() {
  Activity.call(this);
  this._body = null;
}
util.inherits(WithBody, Activity);
WithBody.prototype.initializeStructure = function() {
  this._body = new Block();
  this._body.args = this.args;
  this.args = null;
};
WithBody.prototype.run = function(callContext, args) {
  var _body = args && args.length ? args : this.get("_body");
  if (_body.args && _body.args.length) {
    callContext.schedule(_body, "bodyCompleted");
  } else {
    callContext.complete();
  }
};
WithBody.prototype.bodyCompleted = function(callContext, reason, result) {
  callContext.end(reason, result);
};
module.exports = WithBody;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndpdGhCb2R5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsV0FBVyxDQUFDO0FBRVosQUFBSSxFQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsWUFBVyxDQUFDLENBQUM7QUFDcEMsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsQ0FBQSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsUUFBTyxDQUFDLENBQUM7QUFDekIsQUFBSSxFQUFBLENBQUEsS0FBSSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsU0FBUSxDQUFDLENBQUM7QUFFOUIsT0FBUyxTQUFPLENBQUUsQUFBRCxDQUFHO0FBQ2hCLFNBQU8sS0FBSyxBQUFDLENBQUMsSUFBRyxDQUFDLENBQUM7QUFFbkIsS0FBRyxNQUFNLEVBQUksS0FBRyxDQUFDO0FBQ3JCO0FBQUEsQUFFQSxHQUFHLFNBQVMsQUFBQyxDQUFDLFFBQU8sQ0FBRyxTQUFPLENBQUMsQ0FBQztBQUVqQyxPQUFPLFVBQVUsb0JBQW9CLEVBQUksVUFBUyxBQUFELENBQUc7QUFDaEQsS0FBRyxNQUFNLEVBQUksSUFBSSxNQUFJLEFBQUMsRUFBQyxDQUFDO0FBQ3hCLEtBQUcsTUFBTSxLQUFLLEVBQUksQ0FBQSxJQUFHLEtBQUssQ0FBQztBQUMzQixLQUFHLEtBQUssRUFBSSxLQUFHLENBQUM7QUFDcEIsQ0FBQztBQUVELE9BQU8sVUFBVSxJQUFJLEVBQUksVUFBVSxXQUFVLENBQUcsQ0FBQSxJQUFHLENBQUc7QUFDbEQsQUFBSSxJQUFBLENBQUEsS0FBSSxFQUFJLENBQUEsSUFBRyxHQUFLLENBQUEsSUFBRyxPQUFPLENBQUEsQ0FBSSxLQUFHLEVBQUksQ0FBQSxJQUFHLElBQUksQUFBQyxDQUFDLE9BQU0sQ0FBQyxDQUFDO0FBQzFELEtBQUksS0FBSSxLQUFLLEdBQUssQ0FBQSxLQUFJLEtBQUssT0FBTyxDQUFHO0FBQ2pDLGNBQVUsU0FBUyxBQUFDLENBQUMsS0FBSSxDQUFHLGdCQUFjLENBQUMsQ0FBQztFQUNoRCxLQUNLO0FBQ0QsY0FBVSxTQUFTLEFBQUMsRUFBQyxDQUFDO0VBQzFCO0FBQUEsQUFDSixDQUFDO0FBRUQsT0FBTyxVQUFVLGNBQWMsRUFBSSxVQUFTLFdBQVUsQ0FBRyxDQUFBLE1BQUssQ0FBRyxDQUFBLE1BQUssQ0FBRztBQUNyRSxZQUFVLElBQUksQUFBQyxDQUFDLE1BQUssQ0FBRyxPQUFLLENBQUMsQ0FBQztBQUNuQyxDQUFDO0FBRUQsS0FBSyxRQUFRLEVBQUksU0FBTyxDQUFDO0FBQUEiLCJmaWxlIjoiYWN0aXZpdGllcy93aXRoQm9keS5qcyIsInNvdXJjZVJvb3QiOiJsaWIvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmxldCBBY3Rpdml0eSA9IHJlcXVpcmUoXCIuL2FjdGl2aXR5XCIpO1xubGV0IHV0aWwgPSByZXF1aXJlKFwidXRpbFwiKTtcbmxldCBfID0gcmVxdWlyZShcImxvZGFzaFwiKTtcbmxldCBCbG9jayA9IHJlcXVpcmUoXCIuL2Jsb2NrXCIpO1xuXG5mdW5jdGlvbiBXaXRoQm9keSgpIHtcbiAgICBBY3Rpdml0eS5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5fYm9keSA9IG51bGw7XG59XG5cbnV0aWwuaW5oZXJpdHMoV2l0aEJvZHksIEFjdGl2aXR5KTtcblxuV2l0aEJvZHkucHJvdG90eXBlLmluaXRpYWxpemVTdHJ1Y3R1cmUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9ib2R5ID0gbmV3IEJsb2NrKCk7XG4gICAgdGhpcy5fYm9keS5hcmdzID0gdGhpcy5hcmdzO1xuICAgIHRoaXMuYXJncyA9IG51bGw7XG59O1xuXG5XaXRoQm9keS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKGNhbGxDb250ZXh0LCBhcmdzKSB7XG4gICAgbGV0IF9ib2R5ID0gYXJncyAmJiBhcmdzLmxlbmd0aCA/IGFyZ3MgOiB0aGlzLmdldChcIl9ib2R5XCIpO1xuICAgIGlmIChfYm9keS5hcmdzICYmIF9ib2R5LmFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhbGxDb250ZXh0LnNjaGVkdWxlKF9ib2R5LCBcImJvZHlDb21wbGV0ZWRcIik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjYWxsQ29udGV4dC5jb21wbGV0ZSgpO1xuICAgIH1cbn07XG5cbldpdGhCb2R5LnByb3RvdHlwZS5ib2R5Q29tcGxldGVkID0gZnVuY3Rpb24oY2FsbENvbnRleHQsIHJlYXNvbiwgcmVzdWx0KSB7XG4gICAgY2FsbENvbnRleHQuZW5kKHJlYXNvbiwgcmVzdWx0KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gV2l0aEJvZHk7Il19
