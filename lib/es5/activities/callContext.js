"use strict";
"use strict";
var is = require("../common/is");
var _ = require("lodash");
function CallContext(executionContext, activityOrActivityId, scope) {
  this._executionContext = executionContext;
  this._activity = activityOrActivityId ? this._asActivity(activityOrActivityId) : null;
  this._scope = scope ? scope : null;
  this._executionState = null;
  this._scopePart = null;
}
Object.defineProperties(CallContext.prototype, {
  activityInstanceId: {get: function() {
      return this._activity ? this._activity.instanceId : null;
    }},
  _parentActivityId: {get: function() {
      if (!this._activity) {
        return null;
      }
      var state = this._executionContext.getState(this.activityInstanceId);
      return state.parentActivityId;
    }},
  _scopeTree: {get: function() {
      return this._executionContext._scopeTree;
    }},
  activity: {get: function() {
      return this._activity;
    }},
  executionContext: {get: function() {
      return this._executionContext;
    }},
  executionState: {get: function() {
      return this._executionState || (this._activity ? (this._executionState = this._executionContext.getState(this._activity.instanceId)) : null);
    }},
  scope: {get: function() {
      return this._scope || (this._scope = this._scopeTree.find(this.activityInstanceId));
    }}
});
CallContext.prototype.next = function(childActivityOrActivityId, variables) {
  var child = this._asActivity(childActivityOrActivityId);
  var part = child.createScopePart();
  if (_.isObject(variables)) {
    _.extend(part, variables);
  }
  return new CallContext(this._executionContext, child, this._scopeTree.next(this.activityInstanceId, child.instanceId, part, child.id));
};
CallContext.prototype.back = function(keepScope) {
  var parentId = this._parentActivityId;
  if (parentId) {
    return new CallContext(this._executionContext, parentId, this._scopeTree.back(this.activityInstanceId, keepScope));
  } else {
    return null;
  }
};
CallContext.prototype._asActivity = function(activityOrActivityId) {
  return is.activity(activityOrActivityId) ? activityOrActivityId : this._executionContext._getKnownActivity(activityOrActivityId);
};
CallContext.prototype.complete = function(result) {
  this.activity.complete(this, result);
};
CallContext.prototype.cancel = function() {
  this.activity.cancel(this);
};
CallContext.prototype.idle = function() {
  this.activity.idle(this);
};
CallContext.prototype.fail = function(e) {
  this.activity.fail(this, e);
};
CallContext.prototype.end = function(reason, result) {
  this.activity.end(this, reason, result);
};
CallContext.prototype.schedule = function(obj, endcallback) {
  this.activity.schedule(this, obj, endcallback);
};
CallContext.prototype.createBookmark = function(name, callback) {
  return this._executionContext.createBookmark(this.activityInstanceId, name, callback);
};
CallContext.prototype.resumeBookmark = function(name, reason, result) {
  this._executionContext.resumeBookmarkInternal(this, name, reason, result);
};
module.exports = CallContext;
//# sourceMappingURL=data:application/json;base64,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cmNlUm9vdCI6ImxpYi9lczYiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxubGV0IGlzID0gcmVxdWlyZShcIi4uL2NvbW1vbi9pc1wiKTtcbmxldCBfID0gcmVxdWlyZShcImxvZGFzaFwiKTtcblxuZnVuY3Rpb24gQ2FsbENvbnRleHQoZXhlY3V0aW9uQ29udGV4dCwgYWN0aXZpdHlPckFjdGl2aXR5SWQsIHNjb3BlKSB7XG4gICAgdGhpcy5fZXhlY3V0aW9uQ29udGV4dCA9IGV4ZWN1dGlvbkNvbnRleHQ7XG4gICAgdGhpcy5fYWN0aXZpdHkgPSBhY3Rpdml0eU9yQWN0aXZpdHlJZCA/IHRoaXMuX2FzQWN0aXZpdHkoYWN0aXZpdHlPckFjdGl2aXR5SWQpIDogbnVsbDtcbiAgICB0aGlzLl9zY29wZSA9IHNjb3BlID8gc2NvcGUgOiBudWxsO1xuICAgIHRoaXMuX2V4ZWN1dGlvblN0YXRlID0gbnVsbDtcbiAgICB0aGlzLl9zY29wZVBhcnQgPSBudWxsO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhcbiAgICBDYWxsQ29udGV4dC5wcm90b3R5cGUsXG4gICAge1xuICAgICAgICBhY3Rpdml0eUluc3RhbmNlSWQ6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3Rpdml0eSA/IHRoaXMuX2FjdGl2aXR5Lmluc3RhbmNlSWQgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfcGFyZW50QWN0aXZpdHlJZDoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9hY3Rpdml0eSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5fZXhlY3V0aW9uQ29udGV4dC5nZXRTdGF0ZSh0aGlzLmFjdGl2aXR5SW5zdGFuY2VJZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnBhcmVudEFjdGl2aXR5SWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9zY29wZVRyZWU6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9leGVjdXRpb25Db250ZXh0Ll9zY29wZVRyZWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGFjdGl2aXR5OiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aXZpdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGV4ZWN1dGlvbkNvbnRleHQ6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9leGVjdXRpb25Db250ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBleGVjdXRpb25TdGF0ZToge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4ZWN1dGlvblN0YXRlIHx8ICh0aGlzLl9hY3Rpdml0eSA/ICh0aGlzLl9leGVjdXRpb25TdGF0ZSA9IHRoaXMuX2V4ZWN1dGlvbkNvbnRleHQuZ2V0U3RhdGUodGhpcy5fYWN0aXZpdHkuaW5zdGFuY2VJZCkpIDogbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2NvcGUgfHwgKHRoaXMuX3Njb3BlID0gdGhpcy5fc2NvcGVUcmVlLmZpbmQodGhpcy5hY3Rpdml0eUluc3RhbmNlSWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbik7XG5cbkNhbGxDb250ZXh0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGNoaWxkQWN0aXZpdHlPckFjdGl2aXR5SWQsIHZhcmlhYmxlcykge1xuICAgIGxldCBjaGlsZCA9IHRoaXMuX2FzQWN0aXZpdHkoY2hpbGRBY3Rpdml0eU9yQWN0aXZpdHlJZCk7XG4gICAgbGV0IHBhcnQgPSBjaGlsZC5jcmVhdGVTY29wZVBhcnQoKTtcbiAgICBpZiAoXy5pc09iamVjdCh2YXJpYWJsZXMpKSB7XG4gICAgICAgIF8uZXh0ZW5kKHBhcnQsIHZhcmlhYmxlcyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQ2FsbENvbnRleHQoXG4gICAgICAgIHRoaXMuX2V4ZWN1dGlvbkNvbnRleHQsXG4gICAgICAgIGNoaWxkLFxuICAgICAgICB0aGlzLl9zY29wZVRyZWUubmV4dCh0aGlzLmFjdGl2aXR5SW5zdGFuY2VJZCwgY2hpbGQuaW5zdGFuY2VJZCwgcGFydCwgY2hpbGQuaWQpKTtcbn07XG5cbkNhbGxDb250ZXh0LnByb3RvdHlwZS5iYWNrID0gZnVuY3Rpb24gKGtlZXBTY29wZSkge1xuICAgIGxldCBwYXJlbnRJZCA9IHRoaXMuX3BhcmVudEFjdGl2aXR5SWQ7XG4gICAgaWYgKHBhcmVudElkKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbENvbnRleHQoXG4gICAgICAgICAgICB0aGlzLl9leGVjdXRpb25Db250ZXh0LFxuICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgICAgICB0aGlzLl9zY29wZVRyZWUuYmFjayh0aGlzLmFjdGl2aXR5SW5zdGFuY2VJZCwga2VlcFNjb3BlKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59O1xuXG5DYWxsQ29udGV4dC5wcm90b3R5cGUuX2FzQWN0aXZpdHkgPSBmdW5jdGlvbiAoYWN0aXZpdHlPckFjdGl2aXR5SWQpIHtcbiAgICByZXR1cm4gaXMuYWN0aXZpdHkoYWN0aXZpdHlPckFjdGl2aXR5SWQpID8gYWN0aXZpdHlPckFjdGl2aXR5SWQgOiB0aGlzLl9leGVjdXRpb25Db250ZXh0Ll9nZXRLbm93bkFjdGl2aXR5KGFjdGl2aXR5T3JBY3Rpdml0eUlkKTtcbn07XG5cbi8qIENhbGxiYWNrcyAqL1xuXG5DYWxsQ29udGV4dC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgdGhpcy5hY3Rpdml0eS5jb21wbGV0ZSh0aGlzLCByZXN1bHQpO1xufTtcblxuQ2FsbENvbnRleHQucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmFjdGl2aXR5LmNhbmNlbCh0aGlzKTtcbn07XG5cbkNhbGxDb250ZXh0LnByb3RvdHlwZS5pZGxlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYWN0aXZpdHkuaWRsZSh0aGlzKTtcbn07XG5cbkNhbGxDb250ZXh0LnByb3RvdHlwZS5mYWlsID0gZnVuY3Rpb24gKGUpIHtcbiAgICB0aGlzLmFjdGl2aXR5LmZhaWwodGhpcywgZSk7XG59O1xuXG5DYWxsQ29udGV4dC5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKHJlYXNvbiwgcmVzdWx0KSB7XG4gICAgdGhpcy5hY3Rpdml0eS5lbmQodGhpcywgcmVhc29uLCByZXN1bHQpO1xufTtcblxuQ2FsbENvbnRleHQucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKG9iaiwgZW5kY2FsbGJhY2spIHtcbiAgICB0aGlzLmFjdGl2aXR5LnNjaGVkdWxlKHRoaXMsIG9iaiwgZW5kY2FsbGJhY2spO1xufTtcblxuQ2FsbENvbnRleHQucHJvdG90eXBlLmNyZWF0ZUJvb2ttYXJrID0gZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuX2V4ZWN1dGlvbkNvbnRleHQuY3JlYXRlQm9va21hcmsodGhpcy5hY3Rpdml0eUluc3RhbmNlSWQsIG5hbWUsIGNhbGxiYWNrKTtcbn07XG5cbkNhbGxDb250ZXh0LnByb3RvdHlwZS5yZXN1bWVCb29rbWFyayA9IGZ1bmN0aW9uIChuYW1lLCByZWFzb24sIHJlc3VsdCkge1xuICAgIHRoaXMuX2V4ZWN1dGlvbkNvbnRleHQucmVzdW1lQm9va21hcmtJbnRlcm5hbCh0aGlzLCBuYW1lLCByZWFzb24sIHJlc3VsdCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbGxDb250ZXh0O1xuIl19
