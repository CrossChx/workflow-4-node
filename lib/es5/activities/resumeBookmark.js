"use strict";
var Activity = require("./activity");
var util = require("util");
var errors = require("../common/errors");
function ResumeBookmark() {
  Activity.call(this);
  this.bookmarkName = "";
  this.reason = Activity.states.complete;
  this.mustExists = true;
}
ResumeBookmark.validReasons = [Activity.states.complete, Activity.states.fail, Activity.states.cancel];
util.inherits(ResumeBookmark, Activity);
ResumeBookmark.prototype.run = function(callContext, args) {
  var bookmarkName = this.get("bookmarkName");
  var reason = this.get("reason");
  if (!bookmarkName)
    callContext.fail(new errors.ValidationError("Bookmark name expected."));
  if (ResumeBookmark.validReasons.indexOf(reason) === -1)
    callContext.fail(new errors.ValidationError("Reason value '" + reason + "' is not valid."));
  var result = false;
  if (this.get("mustExists")) {
    callContext.resumeBookmark(bookmarkName, reason, args);
    result = true;
  } else {
    if (callContext.executionContext.isBookmarkExists(bookmarkName)) {
      callContext.resumeBookmark(bookmarkName, reason, args);
      result = true;
    }
  }
  callContext.complete(result);
};
module.exports = ResumeBookmark;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3VtZUJvb2ttYXJrLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsQUFBSSxFQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsWUFBVyxDQUFDLENBQUM7QUFDcEMsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsTUFBSyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsa0JBQWlCLENBQUMsQ0FBQztBQUV4QyxPQUFTLGVBQWEsQ0FBRSxBQUFELENBQUc7QUFDdEIsU0FBTyxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztBQUNuQixLQUFHLGFBQWEsRUFBSSxHQUFDLENBQUM7QUFDdEIsS0FBRyxPQUFPLEVBQUksQ0FBQSxRQUFPLE9BQU8sU0FBUyxDQUFDO0FBQ3RDLEtBQUcsV0FBVyxFQUFJLEtBQUcsQ0FBQztBQUMxQjtBQUFBLEFBRUEsYUFBYSxhQUFhLEVBQUksRUFBQyxRQUFPLE9BQU8sU0FBUyxDQUFHLENBQUEsUUFBTyxPQUFPLEtBQUssQ0FBRyxDQUFBLFFBQU8sT0FBTyxPQUFPLENBQUMsQ0FBQztBQUV0RyxHQUFHLFNBQVMsQUFBQyxDQUFDLGNBQWEsQ0FBRyxTQUFPLENBQUMsQ0FBQztBQUV2QyxhQUFhLFVBQVUsSUFBSSxFQUFJLFVBQVUsV0FBVSxDQUFHLENBQUEsSUFBRyxDQUFHO0FBQ3hELEFBQUksSUFBQSxDQUFBLFlBQVcsRUFBSSxDQUFBLElBQUcsSUFBSSxBQUFDLENBQUMsY0FBYSxDQUFDLENBQUM7QUFDM0MsQUFBSSxJQUFBLENBQUEsTUFBSyxFQUFJLENBQUEsSUFBRyxJQUFJLEFBQUMsQ0FBQyxRQUFPLENBQUMsQ0FBQztBQUUvQixLQUFJLENBQUMsWUFBVztBQUFHLGNBQVUsS0FBSyxBQUFDLENBQUMsR0FBSSxDQUFBLE1BQUssZ0JBQWdCLEFBQUMsQ0FBQyx5QkFBd0IsQ0FBQyxDQUFDLENBQUM7QUFBQSxBQUMxRixLQUFJLGNBQWEsYUFBYSxRQUFRLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQSxHQUFNLEVBQUMsQ0FBQTtBQUFHLGNBQVUsS0FBSyxBQUFDLENBQUMsR0FBSSxDQUFBLE1BQUssZ0JBQWdCLEFBQUMsQ0FBQyxnQkFBZSxFQUFJLE9BQUssQ0FBQSxDQUFJLGtCQUFnQixDQUFDLENBQUMsQ0FBQztBQUFBLEFBRS9JLElBQUEsQ0FBQSxNQUFLLEVBQUksTUFBSSxDQUFDO0FBQ2xCLEtBQUksSUFBRyxJQUFJLEFBQUMsQ0FBQyxZQUFXLENBQUMsQ0FBRztBQUN4QixjQUFVLGVBQWUsQUFBQyxDQUFDLFlBQVcsQ0FBRyxPQUFLLENBQUcsS0FBRyxDQUFDLENBQUM7QUFDdEQsU0FBSyxFQUFJLEtBQUcsQ0FBQztFQUNqQixLQUNLO0FBQ0QsT0FBSSxXQUFVLGlCQUFpQixpQkFBaUIsQUFBQyxDQUFDLFlBQVcsQ0FBQyxDQUFHO0FBQzdELGdCQUFVLGVBQWUsQUFBQyxDQUFDLFlBQVcsQ0FBRyxPQUFLLENBQUcsS0FBRyxDQUFDLENBQUM7QUFDdEQsV0FBSyxFQUFJLEtBQUcsQ0FBQztJQUNqQjtBQUFBLEVBQ0o7QUFBQSxBQUVBLFlBQVUsU0FBUyxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDaEMsQ0FBQTtBQUVBLEtBQUssUUFBUSxFQUFJLGVBQWEsQ0FBQztBQUMvQiIsImZpbGUiOiJhY3Rpdml0aWVzL3Jlc3VtZUJvb2ttYXJrLmpzIiwic291cmNlUm9vdCI6ImxpYi9lczYiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQWN0aXZpdHkgPSByZXF1aXJlKFwiLi9hY3Rpdml0eVwiKTtcclxudmFyIHV0aWwgPSByZXF1aXJlKFwidXRpbFwiKTtcclxudmFyIGVycm9ycyA9IHJlcXVpcmUoXCIuLi9jb21tb24vZXJyb3JzXCIpO1xyXG5cclxuZnVuY3Rpb24gUmVzdW1lQm9va21hcmsoKSB7XHJcbiAgICBBY3Rpdml0eS5jYWxsKHRoaXMpO1xyXG4gICAgdGhpcy5ib29rbWFya05hbWUgPSBcIlwiO1xyXG4gICAgdGhpcy5yZWFzb24gPSBBY3Rpdml0eS5zdGF0ZXMuY29tcGxldGU7XHJcbiAgICB0aGlzLm11c3RFeGlzdHMgPSB0cnVlO1xyXG59XHJcblxyXG5SZXN1bWVCb29rbWFyay52YWxpZFJlYXNvbnMgPSBbQWN0aXZpdHkuc3RhdGVzLmNvbXBsZXRlLCBBY3Rpdml0eS5zdGF0ZXMuZmFpbCwgQWN0aXZpdHkuc3RhdGVzLmNhbmNlbF07XHJcblxyXG51dGlsLmluaGVyaXRzKFJlc3VtZUJvb2ttYXJrLCBBY3Rpdml0eSk7XHJcblxyXG5SZXN1bWVCb29rbWFyay5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKGNhbGxDb250ZXh0LCBhcmdzKSB7XHJcbiAgICB2YXIgYm9va21hcmtOYW1lID0gdGhpcy5nZXQoXCJib29rbWFya05hbWVcIik7XHJcbiAgICB2YXIgcmVhc29uID0gdGhpcy5nZXQoXCJyZWFzb25cIik7XHJcblxyXG4gICAgaWYgKCFib29rbWFya05hbWUpIGNhbGxDb250ZXh0LmZhaWwobmV3IGVycm9ycy5WYWxpZGF0aW9uRXJyb3IoXCJCb29rbWFyayBuYW1lIGV4cGVjdGVkLlwiKSk7XHJcbiAgICBpZiAoUmVzdW1lQm9va21hcmsudmFsaWRSZWFzb25zLmluZGV4T2YocmVhc29uKSA9PT0gLTEpIGNhbGxDb250ZXh0LmZhaWwobmV3IGVycm9ycy5WYWxpZGF0aW9uRXJyb3IoXCJSZWFzb24gdmFsdWUgJ1wiICsgcmVhc29uICsgXCInIGlzIG5vdCB2YWxpZC5cIikpO1xyXG5cclxuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcclxuICAgIGlmICh0aGlzLmdldChcIm11c3RFeGlzdHNcIikpIHtcclxuICAgICAgICBjYWxsQ29udGV4dC5yZXN1bWVCb29rbWFyayhib29rbWFya05hbWUsIHJlYXNvbiwgYXJncyk7XHJcbiAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmIChjYWxsQ29udGV4dC5leGVjdXRpb25Db250ZXh0LmlzQm9va21hcmtFeGlzdHMoYm9va21hcmtOYW1lKSkge1xyXG4gICAgICAgICAgICBjYWxsQ29udGV4dC5yZXN1bWVCb29rbWFyayhib29rbWFya05hbWUsIHJlYXNvbiwgYXJncyk7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhbGxDb250ZXh0LmNvbXBsZXRlKHJlc3VsdCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUmVzdW1lQm9va21hcms7XHJcbiJdfQ==
