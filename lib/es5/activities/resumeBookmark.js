"use strict";
var Activity = require("./activity");
var util = require("util");
var errors = require("../common/errors");
function ResumeBookmark() {
  Activity.call(this);
  this.bookmarkName = "";
  this.reason = Activity.states.complete;
  this.mustExists = true;
}
ResumeBookmark.validReasons = [Activity.states.complete, Activity.states.fail, Activity.states.cancel];
util.inherits(ResumeBookmark, Activity);
ResumeBookmark.prototype.run = function(callContext, args) {
  var bookmarkName = this.bookmarkName;
  var reason = this.reason;
  if (!bookmarkName) {
    callContext.fail(new errors.ValidationError("Bookmark name expected."));
  }
  if (ResumeBookmark.validReasons.indexOf(reason) === -1) {
    callContext.fail(new errors.ValidationError("Reason value '" + reason + "' is not valid."));
  }
  var result = false;
  if (this.mustExists) {
    callContext.resumeBookmark(bookmarkName, reason, args);
    result = true;
  } else {
    if (callContext.executionContext.isBookmarkExists(bookmarkName)) {
      callContext.resumeBookmark(bookmarkName, reason, args);
      result = true;
    }
  }
  callContext.complete(result);
};
module.exports = ResumeBookmark;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3VtZUJvb2ttYXJrLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBRUEsQUFBSSxFQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsWUFBVyxDQUFDLENBQUM7QUFDcEMsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsTUFBSyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsa0JBQWlCLENBQUMsQ0FBQztBQUV4QyxPQUFTLGVBQWEsQ0FBRSxBQUFELENBQUc7QUFDdEIsU0FBTyxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztBQUNuQixLQUFHLGFBQWEsRUFBSSxHQUFDLENBQUM7QUFDdEIsS0FBRyxPQUFPLEVBQUksQ0FBQSxRQUFPLE9BQU8sU0FBUyxDQUFDO0FBQ3RDLEtBQUcsV0FBVyxFQUFJLEtBQUcsQ0FBQztBQUMxQjtBQUFBLEFBRUEsYUFBYSxhQUFhLEVBQUksRUFBQyxRQUFPLE9BQU8sU0FBUyxDQUFHLENBQUEsUUFBTyxPQUFPLEtBQUssQ0FBRyxDQUFBLFFBQU8sT0FBTyxPQUFPLENBQUMsQ0FBQztBQUV0RyxHQUFHLFNBQVMsQUFBQyxDQUFDLGNBQWEsQ0FBRyxTQUFPLENBQUMsQ0FBQztBQUV2QyxhQUFhLFVBQVUsSUFBSSxFQUFJLFVBQVUsV0FBVSxDQUFHLENBQUEsSUFBRyxDQUFHO0FBQ3hELEFBQUksSUFBQSxDQUFBLFlBQVcsRUFBSSxDQUFBLElBQUcsYUFBYSxDQUFDO0FBQ3BDLEFBQUksSUFBQSxDQUFBLE1BQUssRUFBSSxDQUFBLElBQUcsT0FBTyxDQUFDO0FBRXhCLEtBQUksQ0FBQyxZQUFXLENBQUc7QUFDZixjQUFVLEtBQUssQUFBQyxDQUFDLEdBQUksQ0FBQSxNQUFLLGdCQUFnQixBQUFDLENBQUMseUJBQXdCLENBQUMsQ0FBQyxDQUFDO0VBQzNFO0FBQUEsQUFDQSxLQUFJLGNBQWEsYUFBYSxRQUFRLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQSxHQUFNLEVBQUMsQ0FBQSxDQUFHO0FBQ3BELGNBQVUsS0FBSyxBQUFDLENBQUMsR0FBSSxDQUFBLE1BQUssZ0JBQWdCLEFBQUMsQ0FBQyxnQkFBZSxFQUFJLE9BQUssQ0FBQSxDQUFJLGtCQUFnQixDQUFDLENBQUMsQ0FBQztFQUMvRjtBQUFBLEFBRUksSUFBQSxDQUFBLE1BQUssRUFBSSxNQUFJLENBQUM7QUFDbEIsS0FBSSxJQUFHLFdBQVcsQ0FBRztBQUNqQixjQUFVLGVBQWUsQUFBQyxDQUFDLFlBQVcsQ0FBRyxPQUFLLENBQUcsS0FBRyxDQUFDLENBQUM7QUFDdEQsU0FBSyxFQUFJLEtBQUcsQ0FBQztFQUNqQixLQUNLO0FBQ0QsT0FBSSxXQUFVLGlCQUFpQixpQkFBaUIsQUFBQyxDQUFDLFlBQVcsQ0FBQyxDQUFHO0FBQzdELGdCQUFVLGVBQWUsQUFBQyxDQUFDLFlBQVcsQ0FBRyxPQUFLLENBQUcsS0FBRyxDQUFDLENBQUM7QUFDdEQsV0FBSyxFQUFJLEtBQUcsQ0FBQztJQUNqQjtBQUFBLEVBQ0o7QUFBQSxBQUVBLFlBQVUsU0FBUyxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDaEMsQ0FBQztBQUVELEtBQUssUUFBUSxFQUFJLGVBQWEsQ0FBQztBQUMvQiIsImZpbGUiOiJhY3Rpdml0aWVzL3Jlc3VtZUJvb2ttYXJrLmpzIiwic291cmNlUm9vdCI6ImxpYi9lczYiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxubGV0IEFjdGl2aXR5ID0gcmVxdWlyZShcIi4vYWN0aXZpdHlcIik7XG5sZXQgdXRpbCA9IHJlcXVpcmUoXCJ1dGlsXCIpO1xubGV0IGVycm9ycyA9IHJlcXVpcmUoXCIuLi9jb21tb24vZXJyb3JzXCIpO1xuXG5mdW5jdGlvbiBSZXN1bWVCb29rbWFyaygpIHtcbiAgICBBY3Rpdml0eS5jYWxsKHRoaXMpO1xuICAgIHRoaXMuYm9va21hcmtOYW1lID0gXCJcIjtcbiAgICB0aGlzLnJlYXNvbiA9IEFjdGl2aXR5LnN0YXRlcy5jb21wbGV0ZTtcbiAgICB0aGlzLm11c3RFeGlzdHMgPSB0cnVlO1xufVxuXG5SZXN1bWVCb29rbWFyay52YWxpZFJlYXNvbnMgPSBbQWN0aXZpdHkuc3RhdGVzLmNvbXBsZXRlLCBBY3Rpdml0eS5zdGF0ZXMuZmFpbCwgQWN0aXZpdHkuc3RhdGVzLmNhbmNlbF07XG5cbnV0aWwuaW5oZXJpdHMoUmVzdW1lQm9va21hcmssIEFjdGl2aXR5KTtcblxuUmVzdW1lQm9va21hcmsucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIChjYWxsQ29udGV4dCwgYXJncykge1xuICAgIGxldCBib29rbWFya05hbWUgPSB0aGlzLmJvb2ttYXJrTmFtZTtcbiAgICBsZXQgcmVhc29uID0gdGhpcy5yZWFzb247XG5cbiAgICBpZiAoIWJvb2ttYXJrTmFtZSkge1xuICAgICAgICBjYWxsQ29udGV4dC5mYWlsKG5ldyBlcnJvcnMuVmFsaWRhdGlvbkVycm9yKFwiQm9va21hcmsgbmFtZSBleHBlY3RlZC5cIikpO1xuICAgIH1cbiAgICBpZiAoUmVzdW1lQm9va21hcmsudmFsaWRSZWFzb25zLmluZGV4T2YocmVhc29uKSA9PT0gLTEpIHtcbiAgICAgICAgY2FsbENvbnRleHQuZmFpbChuZXcgZXJyb3JzLlZhbGlkYXRpb25FcnJvcihcIlJlYXNvbiB2YWx1ZSAnXCIgKyByZWFzb24gKyBcIicgaXMgbm90IHZhbGlkLlwiKSk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLm11c3RFeGlzdHMpIHtcbiAgICAgICAgY2FsbENvbnRleHQucmVzdW1lQm9va21hcmsoYm9va21hcmtOYW1lLCByZWFzb24sIGFyZ3MpO1xuICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKGNhbGxDb250ZXh0LmV4ZWN1dGlvbkNvbnRleHQuaXNCb29rbWFya0V4aXN0cyhib29rbWFya05hbWUpKSB7XG4gICAgICAgICAgICBjYWxsQ29udGV4dC5yZXN1bWVCb29rbWFyayhib29rbWFya05hbWUsIHJlYXNvbiwgYXJncyk7XG4gICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2FsbENvbnRleHQuY29tcGxldGUocmVzdWx0KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVzdW1lQm9va21hcms7XG4iXX0=
