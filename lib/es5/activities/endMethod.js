"use strict";
var Activity = require("./activity");
var util = require("util");
var errors = require("../common/errors");
var _ = require("lodash");
function EndMethod() {
  Activity.call(this);
  this.methodName = null;
  this.instanceIdPath = null;
  this.result = null;
}
util.inherits(EndMethod, Activity);
EndMethod.prototype.run = function(callContext, args) {
  var methodName = this.methodName;
  if (_.isString(methodName)) {
    var mn = methodName.trim();
    if (mn) {
      callContext.schedule(this.result, "_resultGot");
      return;
    }
  }
  callContext.fail(new errors.ValidationError("EndMethod activity methodName property's value must be a valid identifier."));
};
EndMethod.prototype._resultGot = function(callContext, reason, result) {
  callContext.end(reason, result);
};
module.exports = EndMethod;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZE1ldGhvZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUVBLEFBQUksRUFBQSxDQUFBLFFBQU8sRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFlBQVcsQ0FBQyxDQUFDO0FBQ3BDLEFBQUksRUFBQSxDQUFBLElBQUcsRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLE1BQUssQ0FBQyxDQUFDO0FBQzFCLEFBQUksRUFBQSxDQUFBLE1BQUssRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLGtCQUFpQixDQUFDLENBQUM7QUFDeEMsQUFBSSxFQUFBLENBQUEsQ0FBQSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsUUFBTyxDQUFDLENBQUM7QUFFekIsT0FBUyxVQUFRLENBQUUsQUFBRCxDQUFHO0FBQ2pCLFNBQU8sS0FBSyxBQUFDLENBQUMsSUFBRyxDQUFDLENBQUM7QUFDbkIsS0FBRyxXQUFXLEVBQUksS0FBRyxDQUFDO0FBQ3RCLEtBQUcsZUFBZSxFQUFJLEtBQUcsQ0FBQztBQUMxQixLQUFHLE9BQU8sRUFBSSxLQUFHLENBQUM7QUFDdEI7QUFBQSxBQUVBLEdBQUcsU0FBUyxBQUFDLENBQUMsU0FBUSxDQUFHLFNBQU8sQ0FBQyxDQUFDO0FBRWxDLFFBQVEsVUFBVSxJQUFJLEVBQUksVUFBVSxXQUFVLENBQUcsQ0FBQSxJQUFHLENBQUc7QUFDbkQsQUFBSSxJQUFBLENBQUEsVUFBUyxFQUFJLENBQUEsSUFBRyxXQUFXLENBQUM7QUFDaEMsS0FBSSxDQUFBLFNBQVMsQUFBQyxDQUFDLFVBQVMsQ0FBQyxDQUFHO0FBQ3hCLEFBQUksTUFBQSxDQUFBLEVBQUMsRUFBSSxDQUFBLFVBQVMsS0FBSyxBQUFDLEVBQUMsQ0FBQztBQUMxQixPQUFJLEVBQUMsQ0FBRztBQUNKLGdCQUFVLFNBQVMsQUFBQyxDQUFDLElBQUcsT0FBTyxDQUFHLGFBQVcsQ0FBQyxDQUFDO0FBQy9DLFlBQU07SUFDVjtBQUFBLEVBQ0o7QUFBQSxBQUNBLFlBQVUsS0FBSyxBQUFDLENBQUMsR0FBSSxDQUFBLE1BQUssZ0JBQWdCLEFBQUMsQ0FBQyw0RUFBMkUsQ0FBQyxDQUFDLENBQUM7QUFDOUgsQ0FBQztBQUVELFFBQVEsVUFBVSxXQUFXLEVBQUksVUFBVSxXQUFVLENBQUcsQ0FBQSxNQUFLLENBQUcsQ0FBQSxNQUFLLENBQUc7QUFDcEUsWUFBVSxJQUFJLEFBQUMsQ0FBQyxNQUFLLENBQUcsT0FBSyxDQUFDLENBQUM7QUFDbkMsQ0FBQztBQUVELEtBQUssUUFBUSxFQUFJLFVBQVEsQ0FBQztBQUMxQiIsImZpbGUiOiJhY3Rpdml0aWVzL2VuZE1ldGhvZC5qcyIsInNvdXJjZVJvb3QiOiJsaWIvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmxldCBBY3Rpdml0eSA9IHJlcXVpcmUoXCIuL2FjdGl2aXR5XCIpO1xubGV0IHV0aWwgPSByZXF1aXJlKFwidXRpbFwiKTtcbmxldCBlcnJvcnMgPSByZXF1aXJlKFwiLi4vY29tbW9uL2Vycm9yc1wiKTtcbmxldCBfID0gcmVxdWlyZShcImxvZGFzaFwiKTtcblxuZnVuY3Rpb24gRW5kTWV0aG9kKCkge1xuICAgIEFjdGl2aXR5LmNhbGwodGhpcyk7XG4gICAgdGhpcy5tZXRob2ROYW1lID0gbnVsbDtcbiAgICB0aGlzLmluc3RhbmNlSWRQYXRoID0gbnVsbDtcbiAgICB0aGlzLnJlc3VsdCA9IG51bGw7XG59XG5cbnV0aWwuaW5oZXJpdHMoRW5kTWV0aG9kLCBBY3Rpdml0eSk7XG5cbkVuZE1ldGhvZC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKGNhbGxDb250ZXh0LCBhcmdzKSB7XG4gICAgbGV0IG1ldGhvZE5hbWUgPSB0aGlzLm1ldGhvZE5hbWU7XG4gICAgaWYgKF8uaXNTdHJpbmcobWV0aG9kTmFtZSkpIHtcbiAgICAgICAgbGV0IG1uID0gbWV0aG9kTmFtZS50cmltKCk7XG4gICAgICAgIGlmIChtbikge1xuICAgICAgICAgICAgY2FsbENvbnRleHQuc2NoZWR1bGUodGhpcy5yZXN1bHQsIFwiX3Jlc3VsdEdvdFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYWxsQ29udGV4dC5mYWlsKG5ldyBlcnJvcnMuVmFsaWRhdGlvbkVycm9yKFwiRW5kTWV0aG9kIGFjdGl2aXR5IG1ldGhvZE5hbWUgcHJvcGVydHkncyB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllci5cIikpO1xufTtcblxuRW5kTWV0aG9kLnByb3RvdHlwZS5fcmVzdWx0R290ID0gZnVuY3Rpb24gKGNhbGxDb250ZXh0LCByZWFzb24sIHJlc3VsdCkge1xuICAgIGNhbGxDb250ZXh0LmVuZChyZWFzb24sIHJlc3VsdCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEVuZE1ldGhvZDtcbiJdfQ==
