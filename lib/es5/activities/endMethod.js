"use strict";
var Activity = require("./activity");
var util = require("util");
var errors = require("../common/errors");
var _ = require("lodash");
function EndMethod() {
  Activity.call(this);
  this.methodName = "";
  this.instanceIdPath = "";
  this.result = null;
}
util.inherits(EndMethod, Activity);
EndMethod.prototype.run = function(callContext, args) {
  var methodName = this.get("methodName");
  if (_(methodName).isString()) {
    var mn = methodName.trim();
    if (mn) {
      callContext.schedule(this.get("result"), "_resultGot");
      return ;
    }
  }
  callContext.fail(new errors.ValidationError("EndMethod activity methodName property's value must be a valid identifier."));
};
EndMethod.prototype._resultGot = function(callContext, reason, result) {
  callContext.end(reason, result);
};
module.exports = EndMethod;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZE1ldGhvZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLEFBQUksRUFBQSxDQUFBLFFBQU8sRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFlBQVcsQ0FBQyxDQUFDO0FBQ3BDLEFBQUksRUFBQSxDQUFBLElBQUcsRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLE1BQUssQ0FBQyxDQUFDO0FBQzFCLEFBQUksRUFBQSxDQUFBLE1BQUssRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLGtCQUFpQixDQUFDLENBQUM7QUFDeEMsQUFBSSxFQUFBLENBQUEsQ0FBQSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsUUFBTyxDQUFDLENBQUM7QUFFekIsT0FBUyxVQUFRLENBQUUsQUFBRCxDQUFHO0FBQ2pCLFNBQU8sS0FBSyxBQUFDLENBQUMsSUFBRyxDQUFDLENBQUM7QUFDbkIsS0FBRyxXQUFXLEVBQUksR0FBQyxDQUFDO0FBQ3BCLEtBQUcsZUFBZSxFQUFJLEdBQUMsQ0FBQztBQUN4QixLQUFHLE9BQU8sRUFBSSxLQUFHLENBQUM7QUFDdEI7QUFBQSxBQUVBLEdBQUcsU0FBUyxBQUFDLENBQUMsU0FBUSxDQUFHLFNBQU8sQ0FBQyxDQUFDO0FBRWxDLFFBQVEsVUFBVSxJQUFJLEVBQUksVUFBVSxXQUFVLENBQUcsQ0FBQSxJQUFHLENBQUc7QUFDbkQsQUFBSSxJQUFBLENBQUEsVUFBUyxFQUFJLENBQUEsSUFBRyxJQUFJLEFBQUMsQ0FBQyxZQUFXLENBQUMsQ0FBQztBQUN2QyxLQUFJLENBQUEsQUFBQyxDQUFDLFVBQVMsQ0FBQyxTQUFTLEFBQUMsRUFBQyxDQUFHO0FBQzFCLEFBQUksTUFBQSxDQUFBLEVBQUMsRUFBSSxDQUFBLFVBQVMsS0FBSyxBQUFDLEVBQUMsQ0FBQztBQUMxQixPQUFJLEVBQUMsQ0FBRztBQUNKLGdCQUFVLFNBQVMsQUFBQyxDQUFDLElBQUcsSUFBSSxBQUFDLENBQUMsUUFBTyxDQUFDLENBQUcsYUFBVyxDQUFDLENBQUM7QUFDdEQsYUFBTTtJQUNWO0FBQUEsRUFDSjtBQUFBLEFBQ0EsWUFBVSxLQUFLLEFBQUMsQ0FBQyxHQUFJLENBQUEsTUFBSyxnQkFBZ0IsQUFBQyxDQUFDLDRFQUEyRSxDQUFDLENBQUMsQ0FBQztBQUM5SCxDQUFBO0FBRUEsUUFBUSxVQUFVLFdBQVcsRUFBSSxVQUFVLFdBQVUsQ0FBRyxDQUFBLE1BQUssQ0FBRyxDQUFBLE1BQUssQ0FBRztBQUNwRSxZQUFVLElBQUksQUFBQyxDQUFDLE1BQUssQ0FBRyxPQUFLLENBQUMsQ0FBQztBQUNuQyxDQUFBO0FBRUEsS0FBSyxRQUFRLEVBQUksVUFBUSxDQUFDO0FBQzFCIiwiZmlsZSI6ImFjdGl2aXRpZXMvZW5kTWV0aG9kLmpzIiwic291cmNlUm9vdCI6ImxpYi9lczYiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQWN0aXZpdHkgPSByZXF1aXJlKFwiLi9hY3Rpdml0eVwiKTtcclxudmFyIHV0aWwgPSByZXF1aXJlKFwidXRpbFwiKTtcclxudmFyIGVycm9ycyA9IHJlcXVpcmUoXCIuLi9jb21tb24vZXJyb3JzXCIpO1xyXG52YXIgXyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XHJcblxyXG5mdW5jdGlvbiBFbmRNZXRob2QoKSB7XHJcbiAgICBBY3Rpdml0eS5jYWxsKHRoaXMpO1xyXG4gICAgdGhpcy5tZXRob2ROYW1lID0gXCJcIjtcclxuICAgIHRoaXMuaW5zdGFuY2VJZFBhdGggPSBcIlwiO1xyXG4gICAgdGhpcy5yZXN1bHQgPSBudWxsO1xyXG59XHJcblxyXG51dGlsLmluaGVyaXRzKEVuZE1ldGhvZCwgQWN0aXZpdHkpO1xyXG5cclxuRW5kTWV0aG9kLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoY2FsbENvbnRleHQsIGFyZ3MpIHtcclxuICAgIHZhciBtZXRob2ROYW1lID0gdGhpcy5nZXQoXCJtZXRob2ROYW1lXCIpO1xyXG4gICAgaWYgKF8obWV0aG9kTmFtZSkuaXNTdHJpbmcoKSkge1xyXG4gICAgICAgIHZhciBtbiA9IG1ldGhvZE5hbWUudHJpbSgpO1xyXG4gICAgICAgIGlmIChtbikge1xyXG4gICAgICAgICAgICBjYWxsQ29udGV4dC5zY2hlZHVsZSh0aGlzLmdldChcInJlc3VsdFwiKSwgXCJfcmVzdWx0R290XCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2FsbENvbnRleHQuZmFpbChuZXcgZXJyb3JzLlZhbGlkYXRpb25FcnJvcihcIkVuZE1ldGhvZCBhY3Rpdml0eSBtZXRob2ROYW1lIHByb3BlcnR5J3MgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXIuXCIpKTtcclxufVxyXG5cclxuRW5kTWV0aG9kLnByb3RvdHlwZS5fcmVzdWx0R290ID0gZnVuY3Rpb24gKGNhbGxDb250ZXh0LCByZWFzb24sIHJlc3VsdCkge1xyXG4gICAgY2FsbENvbnRleHQuZW5kKHJlYXNvbiwgcmVzdWx0KTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBFbmRNZXRob2Q7XHJcbiJdfQ==
