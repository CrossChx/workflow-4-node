"use strict";
var errors = require("../common/errors");
var StrSet = require("backpack-node").collections.StrSet;
function ResumeBookmarkQueue() {
  this._names = new StrSet();
  this._commands = [];
}
ResumeBookmarkQueue.prototype.isEmpty = function() {
  return this._commands.length === 0;
};
ResumeBookmarkQueue.prototype.enqueue = function(bookmarkName, reason, result) {
  if (!this._names.exists(bookmarkName)) {
    this._names.add(bookmarkName);
    this._commands.push({
      name: bookmarkName,
      reason: reason,
      result: result
    });
  } else {
    throw new errors.ActivityRuntimeError("The '" + bookmarkName + "' bookmark continuation already enqueued.");
  }
};
ResumeBookmarkQueue.prototype.dequeue = function() {
  var self = this;
  for (var i = 0; i < self._commands.length; i++) {
    var command = self._commands[i];
    self._commands.splice(0, 1);
    self._names.remove(command.name);
    return command;
  }
  return null;
};
ResumeBookmarkQueue.prototype.remove = function(bookmarkName) {
  if (this._names.exists(bookmarkName)) {
    var idx = -1;
    for (var i = 0; i < self._commands.length; i++) {
      var command = self._commands[i];
      if (command.name === bookmarkName) {
        idx = i;
        break;
      }
    }
    if (idx != -1)
      self._commands.splice(idx, 1);
    this._names.remove(bookmarkName);
  }
};
module.exports = ResumeBookmarkQueue;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3VtZUJvb2ttYXJrUXVldWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxBQUFJLEVBQUEsQ0FBQSxNQUFLLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxrQkFBaUIsQ0FBQyxDQUFDO0FBQ3hDLEFBQUksRUFBQSxDQUFBLE1BQUssRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLGVBQWMsQ0FBQyxZQUFZLE9BQU8sQ0FBQztBQUV4RCxPQUFTLG9CQUFrQixDQUFFLEFBQUQsQ0FBRztBQUMzQixLQUFHLE9BQU8sRUFBSSxJQUFJLE9BQUssQUFBQyxFQUFDLENBQUM7QUFDMUIsS0FBRyxVQUFVLEVBQUksR0FBQyxDQUFDO0FBQ3ZCO0FBQUEsQUFFQSxrQkFBa0IsVUFBVSxRQUFRLEVBQUksVUFBVSxBQUFELENBQUc7QUFDaEQsT0FBTyxDQUFBLElBQUcsVUFBVSxPQUFPLElBQU0sRUFBQSxDQUFDO0FBQ3RDLENBQUE7QUFFQSxrQkFBa0IsVUFBVSxRQUFRLEVBQUksVUFBVSxZQUFXLENBQUcsQ0FBQSxNQUFLLENBQUcsQ0FBQSxNQUFLLENBQUc7QUFDNUUsS0FBSSxDQUFDLElBQUcsT0FBTyxPQUFPLEFBQUMsQ0FBQyxZQUFXLENBQUMsQ0FBRztBQUNuQyxPQUFHLE9BQU8sSUFBSSxBQUFDLENBQUMsWUFBVyxDQUFDLENBQUM7QUFDN0IsT0FBRyxVQUFVLEtBQUssQUFBQyxDQUNmO0FBQ0ksU0FBRyxDQUFHLGFBQVc7QUFDakIsV0FBSyxDQUFHLE9BQUs7QUFDYixXQUFLLENBQUcsT0FBSztBQUFBLElBQ2pCLENBQUMsQ0FBQztFQUNWLEtBQ0s7QUFDRCxRQUFNLElBQUksQ0FBQSxNQUFLLHFCQUFxQixBQUFDLENBQUMsT0FBTSxFQUFJLGFBQVcsQ0FBQSxDQUFJLDRDQUEwQyxDQUFDLENBQUM7RUFDL0c7QUFBQSxBQUNKLENBQUE7QUFFQSxrQkFBa0IsVUFBVSxRQUFRLEVBQUksVUFBVSxBQUFELENBQUc7QUFDaEQsQUFBSSxJQUFBLENBQUEsSUFBRyxFQUFJLEtBQUcsQ0FBQztBQUNmLE1BQVMsR0FBQSxDQUFBLENBQUEsRUFBSSxFQUFBLENBQUcsQ0FBQSxDQUFBLEVBQUksQ0FBQSxJQUFHLFVBQVUsT0FBTyxDQUFHLENBQUEsQ0FBQSxFQUFFLENBQUc7QUFDNUMsQUFBSSxNQUFBLENBQUEsT0FBTSxFQUFJLENBQUEsSUFBRyxVQUFVLENBQUUsQ0FBQSxDQUFDLENBQUM7QUFDL0IsT0FBRyxVQUFVLE9BQU8sQUFBQyxDQUFDLENBQUEsQ0FBRyxFQUFBLENBQUMsQ0FBQztBQUMzQixPQUFHLE9BQU8sT0FBTyxBQUFDLENBQUMsT0FBTSxLQUFLLENBQUMsQ0FBQztBQUNoQyxTQUFPLFFBQU0sQ0FBQztFQUNsQjtBQUFBLEFBQ0EsT0FBTyxLQUFHLENBQUM7QUFDZixDQUFBO0FBRUEsa0JBQWtCLFVBQVUsT0FBTyxFQUFJLFVBQVUsWUFBVyxDQUFHO0FBQzNELEtBQUksSUFBRyxPQUFPLE9BQU8sQUFBQyxDQUFDLFlBQVcsQ0FBQyxDQUFHO0FBQ2xDLEFBQUksTUFBQSxDQUFBLEdBQUUsRUFBSSxFQUFDLENBQUEsQ0FBQztBQUNaLFFBQVMsR0FBQSxDQUFBLENBQUEsRUFBSSxFQUFBLENBQUcsQ0FBQSxDQUFBLEVBQUksQ0FBQSxJQUFHLFVBQVUsT0FBTyxDQUFHLENBQUEsQ0FBQSxFQUFFLENBQUc7QUFDNUMsQUFBSSxRQUFBLENBQUEsT0FBTSxFQUFJLENBQUEsSUFBRyxVQUFVLENBQUUsQ0FBQSxDQUFDLENBQUM7QUFDL0IsU0FBSSxPQUFNLEtBQUssSUFBTSxhQUFXLENBQUc7QUFDL0IsVUFBRSxFQUFJLEVBQUEsQ0FBQztBQUNQLGFBQUs7TUFDVDtBQUFBLElBQ0o7QUFBQSxBQUNBLE9BQUksR0FBRSxHQUFLLEVBQUMsQ0FBQTtBQUFHLFNBQUcsVUFBVSxPQUFPLEFBQUMsQ0FBQyxHQUFFLENBQUcsRUFBQSxDQUFDLENBQUM7QUFBQSxBQUM1QyxPQUFHLE9BQU8sT0FBTyxBQUFDLENBQUMsWUFBVyxDQUFDLENBQUM7RUFDcEM7QUFBQSxBQUNKLENBQUE7QUFFQSxLQUFLLFFBQVEsRUFBSSxvQkFBa0IsQ0FBQztBQUNwQyIsImZpbGUiOiJhY3Rpdml0aWVzL3Jlc3VtZUJvb2ttYXJrUXVldWUuanMiLCJzb3VyY2VSb290IjoibGliL2VzNiIsInNvdXJjZXNDb250ZW50IjpbInZhciBlcnJvcnMgPSByZXF1aXJlKFwiLi4vY29tbW9uL2Vycm9yc1wiKTtcclxudmFyIFN0clNldCA9IHJlcXVpcmUoXCJiYWNrcGFjay1ub2RlXCIpLmNvbGxlY3Rpb25zLlN0clNldDtcclxuXHJcbmZ1bmN0aW9uIFJlc3VtZUJvb2ttYXJrUXVldWUoKSB7XHJcbiAgICB0aGlzLl9uYW1lcyA9IG5ldyBTdHJTZXQoKTtcclxuICAgIHRoaXMuX2NvbW1hbmRzID0gW107XHJcbn1cclxuXHJcblJlc3VtZUJvb2ttYXJrUXVldWUucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY29tbWFuZHMubGVuZ3RoID09PSAwO1xyXG59XHJcblxyXG5SZXN1bWVCb29rbWFya1F1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlID0gZnVuY3Rpb24gKGJvb2ttYXJrTmFtZSwgcmVhc29uLCByZXN1bHQpIHtcclxuICAgIGlmICghdGhpcy5fbmFtZXMuZXhpc3RzKGJvb2ttYXJrTmFtZSkpIHtcclxuICAgICAgICB0aGlzLl9uYW1lcy5hZGQoYm9va21hcmtOYW1lKTtcclxuICAgICAgICB0aGlzLl9jb21tYW5kcy5wdXNoKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBib29rbWFya05hbWUsXHJcbiAgICAgICAgICAgICAgICByZWFzb246IHJlYXNvbixcclxuICAgICAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5BY3Rpdml0eVJ1bnRpbWVFcnJvcihcIlRoZSAnXCIgKyBib29rbWFya05hbWUgKyBcIicgYm9va21hcmsgY29udGludWF0aW9uIGFscmVhZHkgZW5xdWV1ZWQuXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5SZXN1bWVCb29rbWFya1F1ZXVlLnByb3RvdHlwZS5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLl9jb21tYW5kcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBjb21tYW5kID0gc2VsZi5fY29tbWFuZHNbaV07XHJcbiAgICAgICAgc2VsZi5fY29tbWFuZHMuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgIHNlbGYuX25hbWVzLnJlbW92ZShjb21tYW5kLm5hbWUpO1xyXG4gICAgICAgIHJldHVybiBjb21tYW5kO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcblJlc3VtZUJvb2ttYXJrUXVldWUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChib29rbWFya05hbWUpIHtcclxuICAgIGlmICh0aGlzLl9uYW1lcy5leGlzdHMoYm9va21hcmtOYW1lKSkge1xyXG4gICAgICAgIHZhciBpZHggPSAtMTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuX2NvbW1hbmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjb21tYW5kID0gc2VsZi5fY29tbWFuZHNbaV07XHJcbiAgICAgICAgICAgIGlmIChjb21tYW5kLm5hbWUgPT09IGJvb2ttYXJrTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWR4ID0gaTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpZHggIT0gLTEpIHNlbGYuX2NvbW1hbmRzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgIHRoaXMuX25hbWVzLnJlbW92ZShib29rbWFya05hbWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFJlc3VtZUJvb2ttYXJrUXVldWU7XHJcbiJdfQ==
