"use strict";
var Activity = require("./activity");
var util = require("util");
var is = require("../common/is");
var _ = require("lodash");
function Declarator() {
  Activity.call(this);
  this.nonScopedProperties.add("reservedProperties");
  this.nonScopedProperties.add("reserved");
  this.nonScopedProperties.add("promotedProperties");
  this.nonScopedProperties.add("promoted");
  this.nonScopedProperties.add("varsDeclared");
  this.reservedProperties = new Set();
  this.promotedProperties = new Set();
}
util.inherits(Declarator, Activity);
Declarator.prototype.reserved = function(name, value) {
  if (this.promotedProperties.has(name)) {
    throw new Error("Property '" + name + "' cannot be reserved because it's promoted.");
  }
  if (!_.isUndefined(value)) {
    this[name] = value;
  }
  this.reservedProperties.add(name);
};
Declarator.prototype.promoted = function(name, value) {
  if (this.reservedProperties.has(name)) {
    throw new Error("Property '" + name + "' cannot be promoted because it's reserved.");
  }
  if (!_.isUndefined(value)) {
    this[name] = value;
  }
  this.promotedProperties.add(name);
};
Declarator.prototype.run = function(callContext, args) {
  var activityVariables = [];
  var _activityVariableFieldNames = [];
  this._activityVariableFieldNames = _activityVariableFieldNames;
  var resProps = callContext.activity.reservedProperties;
  var $__3 = true;
  var $__4 = false;
  var $__5 = undefined;
  try {
    for (var $__1 = void 0,
        $__0 = (callContext.activity._getScopeKeys())[$traceurRuntime.toProperty(Symbol.iterator)](); !($__3 = ($__1 = $__0.next()).done); $__3 = true) {
      var fieldName = $__1.value;
      {
        if (!resProps.has(fieldName)) {
          var fieldValue = this[fieldName];
          if (fieldValue instanceof Activity) {
            activityVariables.push(fieldValue);
            _activityVariableFieldNames.push(fieldName);
          }
        }
      }
    }
  } catch ($__6) {
    $__4 = true;
    $__5 = $__6;
  } finally {
    try {
      if (!$__3 && $__0.return != null) {
        $__0.return();
      }
    } finally {
      if ($__4) {
        throw $__5;
      }
    }
  }
  if (activityVariables.length) {
    this._savedArgs = args;
    callContext.schedule(activityVariables, "_varsGot");
  } else {
    this.delete("_activityVariableFieldNames");
    callContext.activity.varsDeclared.call(this, callContext, args);
  }
};
Declarator.prototype._varsGot = function(callContext, reason, result) {
  if (reason === Activity.states.complete) {
    var idx = 0;
    var $__3 = true;
    var $__4 = false;
    var $__5 = undefined;
    try {
      for (var $__1 = void 0,
          $__0 = (this._activityVariableFieldNames)[$traceurRuntime.toProperty(Symbol.iterator)](); !($__3 = ($__1 = $__0.next()).done); $__3 = true) {
        var fieldName = $__1.value;
        {
          this[fieldName] = result[idx++];
        }
      }
    } catch ($__6) {
      $__4 = true;
      $__5 = $__6;
    } finally {
      try {
        if (!$__3 && $__0.return != null) {
          $__0.return();
        }
      } finally {
        if ($__4) {
          throw $__5;
        }
      }
    }
    var args = this._savedArgs;
    this.delete("_savedArgs");
    this.delete("_activityVariableFieldNames");
    callContext.activity.varsDeclared.call(this, callContext, args);
  } else {
    callContext.end(reason, result);
  }
};
module.exports = Declarator;
//# sourceMappingURL=data:application/json;base64,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QUFBQyxFQUFDLENBQUM7UUFDN0I7QUFBQSxNQUNGLENBQUUsT0FBUTtBQUNSLGdCQUF3QjtBQUN0QixvQkFBd0I7UUFDMUI7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUFBLEFBd0RJLE1BQUEsQ0FBQSxJQUFHLEVBQUksQ0FBQSxJQUFHLFdBQVcsQ0FBQztBQUMxQixPQUFHLE9BQU8sQUFBQyxDQUFDLFlBQVcsQ0FBQyxDQUFDO0FBQ3pCLE9BQUcsT0FBTyxBQUFDLENBQUMsNkJBQTRCLENBQUMsQ0FBQztBQUMxQyxjQUFVLFNBQVMsYUFBYSxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUcsWUFBVSxDQUFHLEtBQUcsQ0FBQyxDQUFDO0VBQ25FLEtBQ0s7QUFDRCxjQUFVLElBQUksQUFBQyxDQUFDLE1BQUssQ0FBRyxPQUFLLENBQUMsQ0FBQztFQUNuQztBQUFBLEFBQ0osQ0FBQztBQUVELEtBQUssUUFBUSxFQUFJLFdBQVMsQ0FBQztBQUFBIiwiZmlsZSI6ImFjdGl2aXRpZXMvZGVjbGFyYXRvci5qcyIsInNvdXJjZVJvb3QiOiJsaWIvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmxldCBBY3Rpdml0eSA9IHJlcXVpcmUoXCIuL2FjdGl2aXR5XCIpO1xubGV0IHV0aWwgPSByZXF1aXJlKFwidXRpbFwiKTtcbmxldCBpcyA9IHJlcXVpcmUoXCIuLi9jb21tb24vaXNcIik7XG5sZXQgXyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5cbmZ1bmN0aW9uIERlY2xhcmF0b3IoKSB7XG4gICAgQWN0aXZpdHkuY2FsbCh0aGlzKTtcbiAgICB0aGlzLm5vblNjb3BlZFByb3BlcnRpZXMuYWRkKFwicmVzZXJ2ZWRQcm9wZXJ0aWVzXCIpO1xuICAgIHRoaXMubm9uU2NvcGVkUHJvcGVydGllcy5hZGQoXCJyZXNlcnZlZFwiKTtcbiAgICB0aGlzLm5vblNjb3BlZFByb3BlcnRpZXMuYWRkKFwicHJvbW90ZWRQcm9wZXJ0aWVzXCIpO1xuICAgIHRoaXMubm9uU2NvcGVkUHJvcGVydGllcy5hZGQoXCJwcm9tb3RlZFwiKTtcbiAgICB0aGlzLm5vblNjb3BlZFByb3BlcnRpZXMuYWRkKFwidmFyc0RlY2xhcmVkXCIpO1xuXG4gICAgLy8gUHJvcGVydGllcyB0aG9zZSBjYW5ub3QgYmUgZGVjbGFyZWQgZnJlZWx5XG4gICAgdGhpcy5yZXNlcnZlZFByb3BlcnRpZXMgPSBuZXcgU2V0KCk7XG5cbiAgICAvLyBQcm9wZXJ0aWVzIHRob3NlIHdpbGwgYmUgcHJvbW90ZWQgZHVyaW5nIHNlcmlhbGl6YXRpb25cbiAgICB0aGlzLnByb21vdGVkUHJvcGVydGllcyA9IG5ldyBTZXQoKTtcbn1cblxudXRpbC5pbmhlcml0cyhEZWNsYXJhdG9yLCBBY3Rpdml0eSk7XG5cbkRlY2xhcmF0b3IucHJvdG90eXBlLnJlc2VydmVkID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKHRoaXMucHJvbW90ZWRQcm9wZXJ0aWVzLmhhcyhuYW1lKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9wZXJ0eSAnXCIgKyBuYW1lICsgXCInIGNhbm5vdCBiZSByZXNlcnZlZCBiZWNhdXNlIGl0J3MgcHJvbW90ZWQuXCIpO1xuICAgIH1cbiAgICBpZiAoIV8uaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHRoaXNbbmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgdGhpcy5yZXNlcnZlZFByb3BlcnRpZXMuYWRkKG5hbWUpO1xufTtcblxuRGVjbGFyYXRvci5wcm90b3R5cGUucHJvbW90ZWQgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICBpZiAodGhpcy5yZXNlcnZlZFByb3BlcnRpZXMuaGFzKG5hbWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3BlcnR5ICdcIiArIG5hbWUgKyBcIicgY2Fubm90IGJlIHByb21vdGVkIGJlY2F1c2UgaXQncyByZXNlcnZlZC5cIik7XG4gICAgfVxuICAgIGlmICghXy5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdGhpc1tuYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICB0aGlzLnByb21vdGVkUHJvcGVydGllcy5hZGQobmFtZSk7XG59O1xuXG5EZWNsYXJhdG9yLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoY2FsbENvbnRleHQsIGFyZ3MpIHtcbiAgICBsZXQgYWN0aXZpdHlWYXJpYWJsZXMgPSBbXTtcbiAgICBsZXQgX2FjdGl2aXR5VmFyaWFibGVGaWVsZE5hbWVzID0gW107XG4gICAgdGhpcy5fYWN0aXZpdHlWYXJpYWJsZUZpZWxkTmFtZXMgPSBfYWN0aXZpdHlWYXJpYWJsZUZpZWxkTmFtZXM7XG4gICAgbGV0IHJlc1Byb3BzID0gY2FsbENvbnRleHQuYWN0aXZpdHkucmVzZXJ2ZWRQcm9wZXJ0aWVzO1xuICAgIGZvciAobGV0IGZpZWxkTmFtZSBvZiBjYWxsQ29udGV4dC5hY3Rpdml0eS5fZ2V0U2NvcGVLZXlzKCkpIHtcbiAgICAgICAgaWYgKCFyZXNQcm9wcy5oYXMoZmllbGROYW1lKSkge1xuICAgICAgICAgICAgbGV0IGZpZWxkVmFsdWUgPSB0aGlzW2ZpZWxkTmFtZV07XG4gICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSBpbnN0YW5jZW9mIEFjdGl2aXR5KSB7XG4gICAgICAgICAgICAgICAgYWN0aXZpdHlWYXJpYWJsZXMucHVzaChmaWVsZFZhbHVlKTtcbiAgICAgICAgICAgICAgICBfYWN0aXZpdHlWYXJpYWJsZUZpZWxkTmFtZXMucHVzaChmaWVsZE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFjdGl2aXR5VmFyaWFibGVzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9zYXZlZEFyZ3MgPSBhcmdzO1xuICAgICAgICBjYWxsQ29udGV4dC5zY2hlZHVsZShhY3Rpdml0eVZhcmlhYmxlcywgXCJfdmFyc0dvdFwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuZGVsZXRlKFwiX2FjdGl2aXR5VmFyaWFibGVGaWVsZE5hbWVzXCIpO1xuICAgICAgICBjYWxsQ29udGV4dC5hY3Rpdml0eS52YXJzRGVjbGFyZWQuY2FsbCh0aGlzLCBjYWxsQ29udGV4dCwgYXJncyk7XG4gICAgfVxufTtcblxuRGVjbGFyYXRvci5wcm90b3R5cGUuX3ZhcnNHb3QgPSBmdW5jdGlvbiAoY2FsbENvbnRleHQsIHJlYXNvbiwgcmVzdWx0KSB7XG4gICAgaWYgKHJlYXNvbiA9PT0gQWN0aXZpdHkuc3RhdGVzLmNvbXBsZXRlKSB7XG4gICAgICAgIGxldCBpZHggPSAwO1xuICAgICAgICBmb3IgKGxldCBmaWVsZE5hbWUgb2YgdGhpcy5fYWN0aXZpdHlWYXJpYWJsZUZpZWxkTmFtZXMpIHtcbiAgICAgICAgICAgIHRoaXNbZmllbGROYW1lXSA9IHJlc3VsdFtpZHgrK107XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFyZ3MgPSB0aGlzLl9zYXZlZEFyZ3M7XG4gICAgICAgIHRoaXMuZGVsZXRlKFwiX3NhdmVkQXJnc1wiKTtcbiAgICAgICAgdGhpcy5kZWxldGUoXCJfYWN0aXZpdHlWYXJpYWJsZUZpZWxkTmFtZXNcIik7XG4gICAgICAgIGNhbGxDb250ZXh0LmFjdGl2aXR5LnZhcnNEZWNsYXJlZC5jYWxsKHRoaXMsIGNhbGxDb250ZXh0LCBhcmdzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNhbGxDb250ZXh0LmVuZChyZWFzb24sIHJlc3VsdCk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEZWNsYXJhdG9yOyJdfQ==
