"use strict";
var Activity = require('./activity');
var util = require('util');
var _ = require('lodash');
var fast = require('fast.js');
function And() {
  Activity.call(this);
  this.isTrue = true;
  this.isFalse = false;
}
util.inherits(And, Activity);
And.prototype.run = function(callContext, args) {
  callContext.schedule(args, '_argsGot');
};
And.prototype._argsGot = function(callContext, reason, result) {
  if (reason !== Activity.states.complete) {
    callContext.end(reason, result);
    return ;
  }
  var isTrue = false;
  if (result.length) {
    isTrue = true;
    fast.forEach(result, function(v) {
      isTrue = (v ? true : false) && isTrue;
    });
  }
  if (isTrue) {
    callContext.schedule(this.get('isTrue'), '_done');
  } else {
    callContext.schedule(this.get('isFalse'), '_done');
  }
};
And.prototype._done = function(callContext, reason, result) {
  callContext.end(reason, result);
};
module.exports = And;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLEFBQUksRUFBQSxDQUFBLFFBQU8sRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFlBQVcsQ0FBQyxDQUFDO0FBQ3BDLEFBQUksRUFBQSxDQUFBLElBQUcsRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLE1BQUssQ0FBQyxDQUFDO0FBQzFCLEFBQUksRUFBQSxDQUFBLENBQUEsRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFFBQU8sQ0FBQyxDQUFDO0FBQ3pCLEFBQUksRUFBQSxDQUFBLElBQUcsRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFNBQVEsQ0FBQyxDQUFDO0FBRTdCLE9BQVMsSUFBRSxDQUFFLEFBQUQsQ0FBRztBQUNYLFNBQU8sS0FBSyxBQUFDLENBQUMsSUFBRyxDQUFDLENBQUM7QUFFbkIsS0FBRyxPQUFPLEVBQUksS0FBRyxDQUFDO0FBQ2xCLEtBQUcsUUFBUSxFQUFJLE1BQUksQ0FBQztBQUN4QjtBQUFBLEFBRUEsR0FBRyxTQUFTLEFBQUMsQ0FBQyxHQUFFLENBQUcsU0FBTyxDQUFDLENBQUM7QUFFNUIsRUFBRSxVQUFVLElBQUksRUFBSSxVQUFVLFdBQVUsQ0FBRyxDQUFBLElBQUcsQ0FBRztBQUM3QyxZQUFVLFNBQVMsQUFBQyxDQUFDLElBQUcsQ0FBRyxXQUFTLENBQUMsQ0FBQztBQUMxQyxDQUFBO0FBRUEsRUFBRSxVQUFVLFNBQVMsRUFBSSxVQUFTLFdBQVUsQ0FBRyxDQUFBLE1BQUssQ0FBRyxDQUFBLE1BQUssQ0FBRztBQUMzRCxLQUFJLE1BQUssSUFBTSxDQUFBLFFBQU8sT0FBTyxTQUFTLENBQUc7QUFDckMsY0FBVSxJQUFJLEFBQUMsQ0FBQyxNQUFLLENBQUcsT0FBSyxDQUFDLENBQUM7QUFDL0IsV0FBTTtFQUNWO0FBQUEsQUFFSSxJQUFBLENBQUEsTUFBSyxFQUFJLE1BQUksQ0FBQztBQUNsQixLQUFJLE1BQUssT0FBTyxDQUFHO0FBQ2YsU0FBSyxFQUFJLEtBQUcsQ0FBQztBQUNiLE9BQUcsUUFBUSxBQUFDLENBQUMsTUFBSyxDQUFHLFVBQVUsQ0FBQSxDQUFHO0FBQzlCLFdBQUssRUFBSSxDQUFBLENBQUMsQ0FBQSxFQUFJLEtBQUcsRUFBSSxNQUFJLENBQUMsR0FBSyxPQUFLLENBQUM7SUFDekMsQ0FBQyxDQUFDO0VBQ047QUFBQSxBQUVBLEtBQUksTUFBSyxDQUFHO0FBQ1IsY0FBVSxTQUFTLEFBQUMsQ0FBQyxJQUFHLElBQUksQUFBQyxDQUFDLFFBQU8sQ0FBQyxDQUFHLFFBQU0sQ0FBQyxDQUFDO0VBQ3JELEtBQ0s7QUFDRCxjQUFVLFNBQVMsQUFBQyxDQUFDLElBQUcsSUFBSSxBQUFDLENBQUMsU0FBUSxDQUFDLENBQUcsUUFBTSxDQUFDLENBQUM7RUFDdEQ7QUFBQSxBQUNKLENBQUE7QUFFQSxFQUFFLFVBQVUsTUFBTSxFQUFJLFVBQVMsV0FBVSxDQUFHLENBQUEsTUFBSyxDQUFHLENBQUEsTUFBSyxDQUFHO0FBQ3hELFlBQVUsSUFBSSxBQUFDLENBQUMsTUFBSyxDQUFHLE9BQUssQ0FBQyxDQUFDO0FBQ25DLENBQUE7QUFFQSxLQUFLLFFBQVEsRUFBSSxJQUFFLENBQUM7QUFBQSIsImZpbGUiOiJhY3Rpdml0aWVzL2FuZC5qcyIsInNvdXJjZVJvb3QiOiJsaWIvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsidmFyIEFjdGl2aXR5ID0gcmVxdWlyZSgnLi9hY3Rpdml0eScpO1xyXG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIGZhc3QgPSByZXF1aXJlKCdmYXN0LmpzJyk7XHJcblxyXG5mdW5jdGlvbiBBbmQoKSB7XHJcbiAgICBBY3Rpdml0eS5jYWxsKHRoaXMpO1xyXG5cclxuICAgIHRoaXMuaXNUcnVlID0gdHJ1ZTtcclxuICAgIHRoaXMuaXNGYWxzZSA9IGZhbHNlO1xyXG59XHJcblxyXG51dGlsLmluaGVyaXRzKEFuZCwgQWN0aXZpdHkpO1xyXG5cclxuQW5kLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoY2FsbENvbnRleHQsIGFyZ3MpIHtcclxuICAgIGNhbGxDb250ZXh0LnNjaGVkdWxlKGFyZ3MsICdfYXJnc0dvdCcpO1xyXG59XHJcblxyXG5BbmQucHJvdG90eXBlLl9hcmdzR290ID0gZnVuY3Rpb24oY2FsbENvbnRleHQsIHJlYXNvbiwgcmVzdWx0KSB7XHJcbiAgICBpZiAocmVhc29uICE9PSBBY3Rpdml0eS5zdGF0ZXMuY29tcGxldGUpIHtcclxuICAgICAgICBjYWxsQ29udGV4dC5lbmQocmVhc29uLCByZXN1bHQpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaXNUcnVlID0gZmFsc2U7XHJcbiAgICBpZiAocmVzdWx0Lmxlbmd0aCkge1xyXG4gICAgICAgIGlzVHJ1ZSA9IHRydWU7XHJcbiAgICAgICAgZmFzdC5mb3JFYWNoKHJlc3VsdCwgZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICAgICAgaXNUcnVlID0gKHYgPyB0cnVlIDogZmFsc2UpICYmIGlzVHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNUcnVlKSB7XHJcbiAgICAgICAgY2FsbENvbnRleHQuc2NoZWR1bGUodGhpcy5nZXQoJ2lzVHJ1ZScpLCAnX2RvbmUnKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNhbGxDb250ZXh0LnNjaGVkdWxlKHRoaXMuZ2V0KCdpc0ZhbHNlJyksICdfZG9uZScpO1xyXG4gICAgfVxyXG59XHJcblxyXG5BbmQucHJvdG90eXBlLl9kb25lID0gZnVuY3Rpb24oY2FsbENvbnRleHQsIHJlYXNvbiwgcmVzdWx0KSB7XHJcbiAgICBjYWxsQ29udGV4dC5lbmQocmVhc29uLCByZXN1bHQpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEFuZDsiXX0=
