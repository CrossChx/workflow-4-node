"use strict";
var Activity = require('./activity');
var util = require('util');
var _ = require('lodash');
var fast = require('fast.js');
function Or() {
  Activity.call(this);
  this.isTrue = true;
  this.isFalse = false;
}
util.inherits(Or, Activity);
Or.prototype.run = function(callContext, args) {
  callContext.schedule(args, '_argsGot');
};
Or.prototype._argsGot = function(callContext, reason, result) {
  if (reason !== Activity.states.complete) {
    callContext.end(reason, result);
    return ;
  }
  var isTrue = false;
  fast.forEach(result, function(v) {
    isTrue = (v ? true : false) || isTrue;
  });
  if (isTrue) {
    callContext.schedule(this.get('isTrue'), '_done');
  } else {
    callContext.schedule(this.get('isFalse'), '_done');
  }
};
Or.prototype._done = function(callContext, reason, result) {
  callContext.end(reason, result);
};
module.exports = Or;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsQUFBSSxFQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsWUFBVyxDQUFDLENBQUM7QUFDcEMsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsQ0FBQSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsUUFBTyxDQUFDLENBQUM7QUFDekIsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsU0FBUSxDQUFDLENBQUM7QUFFN0IsT0FBUyxHQUFDLENBQUUsQUFBRCxDQUFHO0FBQ1YsU0FBTyxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztBQUVuQixLQUFHLE9BQU8sRUFBSSxLQUFHLENBQUM7QUFDbEIsS0FBRyxRQUFRLEVBQUksTUFBSSxDQUFDO0FBQ3hCO0FBQUEsQUFFQSxHQUFHLFNBQVMsQUFBQyxDQUFDLEVBQUMsQ0FBRyxTQUFPLENBQUMsQ0FBQztBQUUzQixDQUFDLFVBQVUsSUFBSSxFQUFJLFVBQVUsV0FBVSxDQUFHLENBQUEsSUFBRyxDQUFHO0FBQzVDLFlBQVUsU0FBUyxBQUFDLENBQUMsSUFBRyxDQUFHLFdBQVMsQ0FBQyxDQUFDO0FBQzFDLENBQUE7QUFFQSxDQUFDLFVBQVUsU0FBUyxFQUFJLFVBQVMsV0FBVSxDQUFHLENBQUEsTUFBSyxDQUFHLENBQUEsTUFBSyxDQUFHO0FBQzFELEtBQUksTUFBSyxJQUFNLENBQUEsUUFBTyxPQUFPLFNBQVMsQ0FBRztBQUNyQyxjQUFVLElBQUksQUFBQyxDQUFDLE1BQUssQ0FBRyxPQUFLLENBQUMsQ0FBQztBQUMvQixXQUFNO0VBQ1Y7QUFBQSxBQUVJLElBQUEsQ0FBQSxNQUFLLEVBQUksTUFBSSxDQUFDO0FBQ2xCLEtBQUcsUUFBUSxBQUFDLENBQUMsTUFBSyxDQUFHLFVBQVMsQ0FBQSxDQUFHO0FBQzdCLFNBQUssRUFBSSxDQUFBLENBQUMsQ0FBQSxFQUFJLEtBQUcsRUFBSSxNQUFJLENBQUMsR0FBSyxPQUFLLENBQUM7RUFDekMsQ0FBQyxDQUFDO0FBRUYsS0FBSSxNQUFLLENBQUc7QUFDUixjQUFVLFNBQVMsQUFBQyxDQUFDLElBQUcsSUFBSSxBQUFDLENBQUMsUUFBTyxDQUFDLENBQUcsUUFBTSxDQUFDLENBQUM7RUFDckQsS0FDSztBQUNELGNBQVUsU0FBUyxBQUFDLENBQUMsSUFBRyxJQUFJLEFBQUMsQ0FBQyxTQUFRLENBQUMsQ0FBRyxRQUFNLENBQUMsQ0FBQztFQUN0RDtBQUFBLEFBQ0osQ0FBQTtBQUVBLENBQUMsVUFBVSxNQUFNLEVBQUksVUFBUyxXQUFVLENBQUcsQ0FBQSxNQUFLLENBQUcsQ0FBQSxNQUFLLENBQUc7QUFDdkQsWUFBVSxJQUFJLEFBQUMsQ0FBQyxNQUFLLENBQUcsT0FBSyxDQUFDLENBQUM7QUFDbkMsQ0FBQTtBQUVBLEtBQUssUUFBUSxFQUFJLEdBQUMsQ0FBQztBQUFBIiwiZmlsZSI6ImFjdGl2aXRpZXMvb3IuanMiLCJzb3VyY2VSb290IjoibGliL2VzNiIsInNvdXJjZXNDb250ZW50IjpbInZhciBBY3Rpdml0eSA9IHJlcXVpcmUoJy4vYWN0aXZpdHknKTtcbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBmYXN0ID0gcmVxdWlyZSgnZmFzdC5qcycpO1xuXG5mdW5jdGlvbiBPcigpIHtcbiAgICBBY3Rpdml0eS5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5pc1RydWUgPSB0cnVlO1xuICAgIHRoaXMuaXNGYWxzZSA9IGZhbHNlO1xufVxuXG51dGlsLmluaGVyaXRzKE9yLCBBY3Rpdml0eSk7XG5cbk9yLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoY2FsbENvbnRleHQsIGFyZ3MpIHtcbiAgICBjYWxsQ29udGV4dC5zY2hlZHVsZShhcmdzLCAnX2FyZ3NHb3QnKTtcbn1cblxuT3IucHJvdG90eXBlLl9hcmdzR290ID0gZnVuY3Rpb24oY2FsbENvbnRleHQsIHJlYXNvbiwgcmVzdWx0KSB7XG4gICAgaWYgKHJlYXNvbiAhPT0gQWN0aXZpdHkuc3RhdGVzLmNvbXBsZXRlKSB7XG4gICAgICAgIGNhbGxDb250ZXh0LmVuZChyZWFzb24sIHJlc3VsdCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaXNUcnVlID0gZmFsc2U7XG4gICAgZmFzdC5mb3JFYWNoKHJlc3VsdCwgZnVuY3Rpb24odikge1xuICAgICAgICBpc1RydWUgPSAodiA/IHRydWUgOiBmYWxzZSkgfHwgaXNUcnVlO1xuICAgIH0pO1xuXG4gICAgaWYgKGlzVHJ1ZSkge1xuICAgICAgICBjYWxsQ29udGV4dC5zY2hlZHVsZSh0aGlzLmdldCgnaXNUcnVlJyksICdfZG9uZScpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2FsbENvbnRleHQuc2NoZWR1bGUodGhpcy5nZXQoJ2lzRmFsc2UnKSwgJ19kb25lJyk7XG4gICAgfVxufVxuXG5Pci5wcm90b3R5cGUuX2RvbmUgPSBmdW5jdGlvbihjYWxsQ29udGV4dCwgcmVhc29uLCByZXN1bHQpIHtcbiAgICBjYWxsQ29udGV4dC5lbmQocmVhc29uLCByZXN1bHQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE9yOyJdfQ==
