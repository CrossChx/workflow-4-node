"use strict";
"use strict";
var _ = require("lodash");
var util = require("util");
var Activity = require("./activity");
function ConsoleTracker() {}
ConsoleTracker.prototype.activityStateChanged = function(activity, reason, result) {
  var name = activity.toString();
  if (result instanceof Error) {
    result = result.message;
  } else {
    if (_.isObject(result))
      result = util.inspect(result);
    if (_.isString(result) && result.length > 100)
      result = result.substr(0, 100);
  }
  if (result)
    result = ", result: " + result;
  else
    result = "";
  var method = reason === Activity.states.fail ? "error" : "log";
  console[method]("Activity '" + name + "' state changed - reason: " + reason + result);
};
module.exports = ConsoleTracker;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnNvbGVUcmFja2VyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsV0FBVyxDQUFDO0FBRVosQUFBSSxFQUFBLENBQUEsQ0FBQSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsUUFBTyxDQUFDLENBQUM7QUFDekIsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsWUFBVyxDQUFDLENBQUM7QUFFcEMsT0FBUyxlQUFhLENBQUUsQUFBRCxDQUFHLEdBQzFCO0FBQUEsQUFFQSxhQUFhLFVBQVUscUJBQXFCLEVBQUksVUFBVSxRQUFPLENBQUcsQ0FBQSxNQUFLLENBQUcsQ0FBQSxNQUFLLENBQUc7QUFDaEYsQUFBSSxJQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsUUFBTyxTQUFTLEFBQUMsRUFBQyxDQUFDO0FBQzlCLEtBQUksTUFBSyxXQUFhLE1BQUksQ0FBRztBQUN6QixTQUFLLEVBQUksQ0FBQSxNQUFLLFFBQVEsQ0FBQztFQUMzQixLQUNLO0FBQ0QsT0FBSSxDQUFBLFNBQVMsQUFBQyxDQUFDLE1BQUssQ0FBQztBQUFHLFdBQUssRUFBSSxDQUFBLElBQUcsUUFBUSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFBQSxBQUNyRCxPQUFJLENBQUEsU0FBUyxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUEsRUFBSyxDQUFBLE1BQUssT0FBTyxFQUFJLElBQUU7QUFBRyxXQUFLLEVBQUksQ0FBQSxNQUFLLE9BQU8sQUFBQyxDQUFDLENBQUEsQ0FBRyxJQUFFLENBQUMsQ0FBQztBQUFBLEVBQ2pGO0FBQUEsQUFDQSxLQUFJLE1BQUs7QUFBRyxTQUFLLEVBQUksQ0FBQSxZQUFXLEVBQUksT0FBSyxDQUFDOztBQUFPLFNBQUssRUFBSSxHQUFDLENBQUM7QUFBQSxBQUN4RCxJQUFBLENBQUEsTUFBSyxFQUFJLENBQUEsTUFBSyxJQUFNLENBQUEsUUFBTyxPQUFPLEtBQUssQ0FBQSxDQUFHLFFBQU0sRUFBSSxNQUFJLENBQUM7QUFDN0QsUUFBTSxDQUFFLE1BQUssQ0FBQyxBQUFDLENBQUMsWUFBVyxFQUFJLEtBQUcsQ0FBQSxDQUFJLDZCQUEyQixDQUFBLENBQUksT0FBSyxDQUFBLENBQUksT0FBSyxDQUFDLENBQUM7QUFDekYsQ0FBQztBQUVELEtBQUssUUFBUSxFQUFJLGVBQWEsQ0FBQztBQUMvQiIsImZpbGUiOiJhY3Rpdml0aWVzL2NvbnNvbGVUcmFja2VyLmpzIiwic291cmNlUm9vdCI6ImxpYi9lczYiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxubGV0IF8gPSByZXF1aXJlKFwibG9kYXNoXCIpO1xubGV0IHV0aWwgPSByZXF1aXJlKFwidXRpbFwiKTtcbmxldCBBY3Rpdml0eSA9IHJlcXVpcmUoXCIuL2FjdGl2aXR5XCIpO1xuXG5mdW5jdGlvbiBDb25zb2xlVHJhY2tlcigpIHtcbn1cblxuQ29uc29sZVRyYWNrZXIucHJvdG90eXBlLmFjdGl2aXR5U3RhdGVDaGFuZ2VkID0gZnVuY3Rpb24gKGFjdGl2aXR5LCByZWFzb24sIHJlc3VsdCkge1xuICAgIGxldCBuYW1lID0gYWN0aXZpdHkudG9TdHJpbmcoKTtcbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0Lm1lc3NhZ2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoXy5pc09iamVjdChyZXN1bHQpKSByZXN1bHQgPSB1dGlsLmluc3BlY3QocmVzdWx0KTtcbiAgICAgICAgaWYgKF8uaXNTdHJpbmcocmVzdWx0KSAmJiByZXN1bHQubGVuZ3RoID4gMTAwKSByZXN1bHQgPSByZXN1bHQuc3Vic3RyKDAsIDEwMCk7XG4gICAgfVxuICAgIGlmIChyZXN1bHQpIHJlc3VsdCA9IFwiLCByZXN1bHQ6IFwiICsgcmVzdWx0OyBlbHNlIHJlc3VsdCA9IFwiXCI7XG4gICAgbGV0IG1ldGhvZCA9IHJlYXNvbiA9PT0gQWN0aXZpdHkuc3RhdGVzLmZhaWw/IFwiZXJyb3JcIiA6IFwibG9nXCI7XG4gICAgY29uc29sZVttZXRob2RdKFwiQWN0aXZpdHkgJ1wiICsgbmFtZSArIFwiJyBzdGF0ZSBjaGFuZ2VkIC0gcmVhc29uOiBcIiArIHJlYXNvbiArIHJlc3VsdCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnNvbGVUcmFja2VyO1xuIl19
