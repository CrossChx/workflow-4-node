"use strict";
var _ = require("lodash");
var util = require("util");
var Activity = require("./activity");
function ConsoleTracker() {}
ConsoleTracker.prototype.activityStateChanged = function(args) {
  var activity = args.scope.$activity;
  var reason = args.reason;
  var result = args.result;
  var name = activity.toString();
  if (result instanceof Error) {
    result = result.message;
  } else {
    if (_.isObject(result))
      result = util.inspect(result);
    if (_.isString(result) && result.length > 100)
      result = result.substr(0, 100);
  }
  if (result)
    result = ", result: " + result;
  else
    result = "";
  var method = reason === Activity.states.fail ? "error" : "log";
  console[method]("Activity '" + name + "' state changed - reason: " + reason + result);
};
module.exports = ConsoleTracker;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnNvbGVUcmFja2VyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBRUEsQUFBSSxFQUFBLENBQUEsQ0FBQSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsUUFBTyxDQUFDLENBQUM7QUFDekIsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsWUFBVyxDQUFDLENBQUM7QUFFcEMsT0FBUyxlQUFhLENBQUUsQUFBRCxDQUFHLEdBQzFCO0FBQUEsQUFFQSxhQUFhLFVBQVUscUJBQXFCLEVBQUksVUFBVSxJQUFHLENBQUc7QUFDNUQsQUFBSSxJQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsSUFBRyxNQUFNLFVBQVUsQ0FBQztBQUNuQyxBQUFJLElBQUEsQ0FBQSxNQUFLLEVBQUksQ0FBQSxJQUFHLE9BQU8sQ0FBQztBQUN4QixBQUFJLElBQUEsQ0FBQSxNQUFLLEVBQUksQ0FBQSxJQUFHLE9BQU8sQ0FBQztBQUN4QixBQUFJLElBQUEsQ0FBQSxJQUFHLEVBQUksQ0FBQSxRQUFPLFNBQVMsQUFBQyxFQUFDLENBQUM7QUFDOUIsS0FBSSxNQUFLLFdBQWEsTUFBSSxDQUFHO0FBQ3pCLFNBQUssRUFBSSxDQUFBLE1BQUssUUFBUSxDQUFDO0VBQzNCLEtBQ0s7QUFDRCxPQUFJLENBQUEsU0FBUyxBQUFDLENBQUMsTUFBSyxDQUFDO0FBQUcsV0FBSyxFQUFJLENBQUEsSUFBRyxRQUFRLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQztBQUFBLEFBQ3JELE9BQUksQ0FBQSxTQUFTLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQSxFQUFLLENBQUEsTUFBSyxPQUFPLEVBQUksSUFBRTtBQUFHLFdBQUssRUFBSSxDQUFBLE1BQUssT0FBTyxBQUFDLENBQUMsQ0FBQSxDQUFHLElBQUUsQ0FBQyxDQUFDO0FBQUEsRUFDakY7QUFBQSxBQUNBLEtBQUksTUFBSztBQUFHLFNBQUssRUFBSSxDQUFBLFlBQVcsRUFBSSxPQUFLLENBQUM7O0FBQU8sU0FBSyxFQUFJLEdBQUMsQ0FBQztBQUFBLEFBQ3hELElBQUEsQ0FBQSxNQUFLLEVBQUksQ0FBQSxNQUFLLElBQU0sQ0FBQSxRQUFPLE9BQU8sS0FBSyxDQUFBLENBQUcsUUFBTSxFQUFJLE1BQUksQ0FBQztBQUM3RCxRQUFNLENBQUUsTUFBSyxDQUFDLEFBQUMsQ0FBQyxZQUFXLEVBQUksS0FBRyxDQUFBLENBQUksNkJBQTJCLENBQUEsQ0FBSSxPQUFLLENBQUEsQ0FBSSxPQUFLLENBQUMsQ0FBQztBQUN6RixDQUFDO0FBRUQsS0FBSyxRQUFRLEVBQUksZUFBYSxDQUFDO0FBQy9CIiwiZmlsZSI6ImFjdGl2aXRpZXMvY29uc29sZVRyYWNrZXIuanMiLCJzb3VyY2VSb290IjoibGliL2VzNiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5sZXQgXyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5sZXQgdXRpbCA9IHJlcXVpcmUoXCJ1dGlsXCIpO1xubGV0IEFjdGl2aXR5ID0gcmVxdWlyZShcIi4vYWN0aXZpdHlcIik7XG5cbmZ1bmN0aW9uIENvbnNvbGVUcmFja2VyKCkge1xufVxuXG5Db25zb2xlVHJhY2tlci5wcm90b3R5cGUuYWN0aXZpdHlTdGF0ZUNoYW5nZWQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIGxldCBhY3Rpdml0eSA9IGFyZ3Muc2NvcGUuJGFjdGl2aXR5O1xuICAgIGxldCByZWFzb24gPSBhcmdzLnJlYXNvbjtcbiAgICBsZXQgcmVzdWx0ID0gYXJncy5yZXN1bHQ7XG4gICAgbGV0IG5hbWUgPSBhY3Rpdml0eS50b1N0cmluZygpO1xuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICByZXN1bHQgPSByZXN1bHQubWVzc2FnZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChfLmlzT2JqZWN0KHJlc3VsdCkpIHJlc3VsdCA9IHV0aWwuaW5zcGVjdChyZXN1bHQpO1xuICAgICAgICBpZiAoXy5pc1N0cmluZyhyZXN1bHQpICYmIHJlc3VsdC5sZW5ndGggPiAxMDApIHJlc3VsdCA9IHJlc3VsdC5zdWJzdHIoMCwgMTAwKTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdCkgcmVzdWx0ID0gXCIsIHJlc3VsdDogXCIgKyByZXN1bHQ7IGVsc2UgcmVzdWx0ID0gXCJcIjtcbiAgICBsZXQgbWV0aG9kID0gcmVhc29uID09PSBBY3Rpdml0eS5zdGF0ZXMuZmFpbD8gXCJlcnJvclwiIDogXCJsb2dcIjtcbiAgICBjb25zb2xlW21ldGhvZF0oXCJBY3Rpdml0eSAnXCIgKyBuYW1lICsgXCInIHN0YXRlIGNoYW5nZWQgLSByZWFzb246IFwiICsgcmVhc29uICsgcmVzdWx0KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ29uc29sZVRyYWNrZXI7XG4iXX0=
