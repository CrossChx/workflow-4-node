"use strict";
var _ = require("lodash");
var is = require("../common/is");
function InstanceIdParser() {
  this._cache = {};
}
InstanceIdParser.prototype.parse = function(path, obj) {
  if (!obj) {
    throw new Error("Argument 'obj' expected.");
  }
  if (!_.isString(path)) {
    throw new TypeError("Argument 'path' is not a string.");
  }
  var parser = this._cache[path];
  if (_.isUndefined(parser)) {
    this._cache[path] = parser = this._createParser(path);
  }
  return parser.call(obj);
};
InstanceIdParser.prototype._createParser = function(path) {
  if (path.indexOf("this") !== 0) {
    if (path[0] === "[") {
      path = "this" + path;
    } else {
      path = "this." + path;
    }
  }
  return new Function("return (" + path + ").toString();");
};
module.exports = InstanceIdParser;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluc3RhbmNlSWRQYXJzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7QUFFQSxBQUFJLEVBQUEsQ0FBQSxDQUFBLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxRQUFPLENBQUMsQ0FBQztBQUN6QixBQUFJLEVBQUEsQ0FBQSxFQUFDLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxjQUFhLENBQUMsQ0FBQztBQUVoQyxPQUFTLGlCQUFlLENBQUUsQUFBRCxDQUFHO0FBQ3hCLEtBQUcsT0FBTyxFQUFJLEdBQUMsQ0FBQztBQUNwQjtBQUFBLEFBRUEsZUFBZSxVQUFVLE1BQU0sRUFBSSxVQUFVLElBQUcsQ0FBRyxDQUFBLEdBQUUsQ0FBRztBQUNwRCxLQUFJLENBQUMsR0FBRSxDQUFHO0FBQ04sUUFBTSxJQUFJLE1BQUksQUFBQyxDQUFDLDBCQUF5QixDQUFDLENBQUM7RUFDL0M7QUFBQSxBQUNBLEtBQUksQ0FBQyxDQUFBLFNBQVMsQUFBQyxDQUFDLElBQUcsQ0FBQyxDQUFHO0FBQ25CLFFBQU0sSUFBSSxVQUFRLEFBQUMsQ0FBQyxrQ0FBaUMsQ0FBQyxDQUFDO0VBQzNEO0FBQUEsQUFFSSxJQUFBLENBQUEsTUFBSyxFQUFJLENBQUEsSUFBRyxPQUFPLENBQUUsSUFBRyxDQUFDLENBQUM7QUFDOUIsS0FBSSxDQUFBLFlBQVksQUFBQyxDQUFDLE1BQUssQ0FBQyxDQUFHO0FBQ3ZCLE9BQUcsT0FBTyxDQUFFLElBQUcsQ0FBQyxFQUFJLENBQUEsTUFBSyxFQUFJLENBQUEsSUFBRyxjQUFjLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztFQUN6RDtBQUFBLEFBRUEsT0FBTyxDQUFBLE1BQUssS0FBSyxBQUFDLENBQUMsR0FBRSxDQUFDLENBQUM7QUFDM0IsQ0FBQztBQUVELGVBQWUsVUFBVSxjQUFjLEVBQUksVUFBVSxJQUFHLENBQUc7QUFDdkQsS0FBSSxJQUFHLFFBQVEsQUFBQyxDQUFDLE1BQUssQ0FBQyxDQUFBLEdBQU0sRUFBQSxDQUFHO0FBQzVCLE9BQUksSUFBRyxDQUFFLENBQUEsQ0FBQyxJQUFNLElBQUUsQ0FBRztBQUNqQixTQUFHLEVBQUksQ0FBQSxNQUFLLEVBQUksS0FBRyxDQUFDO0lBQ3hCLEtBQ0s7QUFDRCxTQUFHLEVBQUksQ0FBQSxPQUFNLEVBQUksS0FBRyxDQUFDO0lBQ3pCO0FBQUEsRUFDSjtBQUFBLEFBRUEsT0FBTyxJQUFJLFNBQU8sQUFBQyxDQUFDLFVBQVMsRUFBSSxLQUFHLENBQUEsQ0FBSSxnQkFBYyxDQUFDLENBQUM7QUFDNUQsQ0FBQztBQUVELEtBQUssUUFBUSxFQUFJLGlCQUFlLENBQUM7QUFDakMiLCJmaWxlIjoiaG9zdGluZy9pbnN0YW5jZUlkUGFyc2VyLmpzIiwic291cmNlUm9vdCI6ImxpYi9lczYiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBqc2hpbnQgLVcwNTQqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmxldCBfID0gcmVxdWlyZShcImxvZGFzaFwiKTtcbmxldCBpcyA9IHJlcXVpcmUoXCIuLi9jb21tb24vaXNcIik7XG5cbmZ1bmN0aW9uIEluc3RhbmNlSWRQYXJzZXIoKSB7XG4gICAgdGhpcy5fY2FjaGUgPSB7fTtcbn1cblxuSW5zdGFuY2VJZFBhcnNlci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAocGF0aCwgb2JqKSB7XG4gICAgaWYgKCFvYmopIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnQgJ29iaicgZXhwZWN0ZWQuXCIpO1xuICAgIH1cbiAgICBpZiAoIV8uaXNTdHJpbmcocGF0aCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50ICdwYXRoJyBpcyBub3QgYSBzdHJpbmcuXCIpO1xuICAgIH1cblxuICAgIGxldCBwYXJzZXIgPSB0aGlzLl9jYWNoZVtwYXRoXTtcbiAgICBpZiAoXy5pc1VuZGVmaW5lZChwYXJzZXIpKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlW3BhdGhdID0gcGFyc2VyID0gdGhpcy5fY3JlYXRlUGFyc2VyKHBhdGgpO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJzZXIuY2FsbChvYmopO1xufTtcblxuSW5zdGFuY2VJZFBhcnNlci5wcm90b3R5cGUuX2NyZWF0ZVBhcnNlciA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgaWYgKHBhdGguaW5kZXhPZihcInRoaXNcIikgIT09IDApIHtcbiAgICAgICAgaWYgKHBhdGhbMF0gPT09IFwiW1wiKSB7XG4gICAgICAgICAgICBwYXRoID0gXCJ0aGlzXCIgKyBwYXRoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGF0aCA9IFwidGhpcy5cIiArIHBhdGg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwicmV0dXJuIChcIiArIHBhdGggKyBcIikudG9TdHJpbmcoKTtcIik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEluc3RhbmNlSWRQYXJzZXI7XG4iXX0=
