"use strict";
var guids = require("./guids");
var _ = require("lodash");
var guidLength = guids.markers.activityInstance.length;
var makeSpecString = function(guid, str) {
  return guid + ":" + str;
};
var isSpecString = function(specString) {
  if (_.isString(specString) && specString.length > guidLength + 1 && specString[guidLength] === ":") {
    var il = guids.identity.length;
    for (var i = 0; i < il; i++) {
      if (guids.identity[i] !== specString[i])
        return false;
    }
    return true;
  }
  return false;
};
var getGuid = function(specString) {
  if (!isSpecString(specString))
    return null;
  return specString.substr(0, guidLength);
};
var getString = function(specString) {
  if (!isSpecString(specString))
    return null;
  return specString.substr(guidLength + 1);
};
var splitSpecString = function(specString) {
  if (!isSpecString(specString))
    return null;
  return {
    guid: specString.substr(0, guidLength),
    str: specString.substr(guidLength + 1)
  };
};
var makSpecForActivity = function(guid, activityOrId) {
  var id = _.isString(activityOrId) ? activityOrId : activityOrId.instanceId;
  return makeSpecString(guid, id);
};
var specStrings = {
  is: isSpecString,
  getGuid: getGuid,
  getString: getString,
  split: splitSpecString,
  activities: {
    asValueToCollect: function(activityOrId) {
      return makSpecForActivity(guids.markers.valueToCollect, activityOrId);
    },
    createCollectingCompletedBMName: function(activityOrId) {
      return makSpecForActivity(guids.markers.collectingCompletedBookmark, activityOrId);
    },
    createValueCollectedBMName: function(activityOrId) {
      return makSpecForActivity(guids.markers.valueCollectedBookmark, activityOrId);
    }
  },
  hosting: {
    createBeginMethodBMName: function(methodName) {
      return makeSpecString(guids.markers.beginMethodBookmark, methodName);
    },
    createActivityPropertyPart: function(methodName) {
      return makeSpecString(guids.markers.activityProperty, methodName);
    },
    getActivityPropertyName: function(obj) {
      var parts = splitSpecString(obj);
      if (parts && parts.guid === guids.markers.activityProperty) {
        return parts.str;
      }
      return null;
    },
    createActivityInstancePart: function(activityId) {
      return guids.markers.activityInstance + ":" + activityId;
    },
    getActivityId: function(obj) {
      var parts = splitSpecString(obj);
      if (parts && parts.guid === guids.markers.activityInstance) {
        return parts.str;
      }
      return null;
    },
    doubleKeys: function(key1, key2) {
      return key1 + guids.markers.keySeparator + key2;
    }
  }
};
module.exports = specStrings;
//# sourceMappingURL=data:application/json;base64,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QUM5QyxXQUFPLENBQUEsS0FBSSxRQUFRLGlCQUFpQixFQUFJLElBQUUsQ0FBQSxDQUFJLFdBQVMsQ0FBQztJQUM1RDtBQUVBLGdCQUFZLENBQUcsVUFBVSxHQUFFLENBQUc7QUFDMUIsQUFBSSxRQUFBLENBQUEsS0FBSSxFQUFJLENBQUEsZUFBYyxBQUFDLENBQUMsR0FBRSxDQUFDLENBQUM7QUFDaEMsU0FBSSxLQUFJLEdBQUssQ0FBQSxLQUFJLEtBQUssSUFBTSxDQUFBLEtBQUksUUFBUSxpQkFBaUIsQ0FBRztBQUN4RCxhQUFPLENBQUEsS0FBSSxJQUFJLENBQUM7TUFDcEI7QUFBQSxBQUNBLFdBQU8sS0FBRyxDQUFDO0lBQ2Y7QUFFQSxhQUFTLENBQUcsVUFBVSxJQUFHLENBQUcsQ0FBQSxJQUFHLENBQUc7QUFDOUIsV0FBTyxDQUFBLElBQUcsRUFBSSxDQUFBLEtBQUksUUFBUSxhQUFhLENBQUEsQ0FBSSxLQUFHLENBQUM7SUFDbkQ7QUFBQSxFQUNKO0FBQUEsQUFDSixDQUFBO0FBRUEsS0FBSyxRQUFRLEVBQUksWUFBVSxDQUFDO0FBQzVCIiwiZmlsZSI6ImNvbW1vbi9zcGVjU3RyaW5ncy5qcyIsInNvdXJjZVJvb3QiOiJsaWIvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsidmFyIGd1aWRzID0gcmVxdWlyZShcIi4vZ3VpZHNcIik7XG52YXIgXyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5cbnZhciBndWlkTGVuZ3RoID0gZ3VpZHMubWFya2Vycy5hY3Rpdml0eUluc3RhbmNlLmxlbmd0aDtcblxudmFyIG1ha2VTcGVjU3RyaW5nID0gZnVuY3Rpb24gKGd1aWQsIHN0cikge1xuICAgIHJldHVybiBndWlkICsgXCI6XCIgKyBzdHI7XG59XG5cbnZhciBpc1NwZWNTdHJpbmcgPSBmdW5jdGlvbiAoc3BlY1N0cmluZykge1xuICAgIGlmIChfLmlzU3RyaW5nKHNwZWNTdHJpbmcpICYmIHNwZWNTdHJpbmcubGVuZ3RoID4gZ3VpZExlbmd0aCArIDEgJiYgc3BlY1N0cmluZ1tndWlkTGVuZ3RoXSA9PT0gXCI6XCIpIHtcbiAgICAgICAgdmFyIGlsID0gZ3VpZHMuaWRlbnRpdHkubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlsOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChndWlkcy5pZGVudGl0eVtpXSAhPT0gc3BlY1N0cmluZ1tpXSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBnZXRHdWlkID0gZnVuY3Rpb24gKHNwZWNTdHJpbmcpIHtcbiAgICBpZiAoIWlzU3BlY1N0cmluZyhzcGVjU3RyaW5nKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHNwZWNTdHJpbmcuc3Vic3RyKDAsIGd1aWRMZW5ndGgpO1xufVxuXG52YXIgZ2V0U3RyaW5nID0gZnVuY3Rpb24gKHNwZWNTdHJpbmcpIHtcbiAgICBpZiAoIWlzU3BlY1N0cmluZyhzcGVjU3RyaW5nKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHNwZWNTdHJpbmcuc3Vic3RyKGd1aWRMZW5ndGggKyAxKTtcbn1cblxudmFyIHNwbGl0U3BlY1N0cmluZyA9IGZ1bmN0aW9uIChzcGVjU3RyaW5nKSB7XG4gICAgaWYgKCFpc1NwZWNTdHJpbmcoc3BlY1N0cmluZykpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICAgIGd1aWQ6IHNwZWNTdHJpbmcuc3Vic3RyKDAsIGd1aWRMZW5ndGgpLFxuICAgICAgICBzdHI6IHNwZWNTdHJpbmcuc3Vic3RyKGd1aWRMZW5ndGggKyAxKVxuICAgIH07XG59XG5cbnZhciBtYWtTcGVjRm9yQWN0aXZpdHkgPSBmdW5jdGlvbiAoZ3VpZCwgYWN0aXZpdHlPcklkKSB7XG4gICAgdmFyIGlkID0gXy5pc1N0cmluZyhhY3Rpdml0eU9ySWQpID8gYWN0aXZpdHlPcklkIDogYWN0aXZpdHlPcklkLmluc3RhbmNlSWQ7XG4gICAgcmV0dXJuIG1ha2VTcGVjU3RyaW5nKGd1aWQsIGlkKTtcbn1cblxudmFyIHNwZWNTdHJpbmdzID0ge1xuICAgIGlzOiBpc1NwZWNTdHJpbmcsXG4gICAgZ2V0R3VpZDogZ2V0R3VpZCxcbiAgICBnZXRTdHJpbmc6IGdldFN0cmluZyxcbiAgICBzcGxpdDogc3BsaXRTcGVjU3RyaW5nLFxuICAgIGFjdGl2aXRpZXM6IHtcbiAgICAgICAgYXNWYWx1ZVRvQ29sbGVjdDogZnVuY3Rpb24gKGFjdGl2aXR5T3JJZCkge1xuICAgICAgICAgICAgcmV0dXJuIG1ha1NwZWNGb3JBY3Rpdml0eShndWlkcy5tYXJrZXJzLnZhbHVlVG9Db2xsZWN0LCBhY3Rpdml0eU9ySWQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNyZWF0ZUNvbGxlY3RpbmdDb21wbGV0ZWRCTU5hbWU6IGZ1bmN0aW9uIChhY3Rpdml0eU9ySWQpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtTcGVjRm9yQWN0aXZpdHkoZ3VpZHMubWFya2Vycy5jb2xsZWN0aW5nQ29tcGxldGVkQm9va21hcmssIGFjdGl2aXR5T3JJZCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlVmFsdWVDb2xsZWN0ZWRCTU5hbWU6IGZ1bmN0aW9uIChhY3Rpdml0eU9ySWQpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtTcGVjRm9yQWN0aXZpdHkoZ3VpZHMubWFya2Vycy52YWx1ZUNvbGxlY3RlZEJvb2ttYXJrLCBhY3Rpdml0eU9ySWQpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBob3N0aW5nOiB7XG5cbiAgICAgICAgY3JlYXRlQmVnaW5NZXRob2RCTU5hbWU6IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZVNwZWNTdHJpbmcoZ3VpZHMubWFya2Vycy5iZWdpbk1ldGhvZEJvb2ttYXJrLCBtZXRob2ROYW1lKTtcbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGVBY3Rpdml0eVByb3BlcnR5UGFydDogZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlU3BlY1N0cmluZyhndWlkcy5tYXJrZXJzLmFjdGl2aXR5UHJvcGVydHksIG1ldGhvZE5hbWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldEFjdGl2aXR5UHJvcGVydHlOYW1lOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBzcGxpdFNwZWNTdHJpbmcob2JqKTtcbiAgICAgICAgICAgIGlmIChwYXJ0cyAmJiBwYXJ0cy5ndWlkID09PSBndWlkcy5tYXJrZXJzLmFjdGl2aXR5UHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFydHMuc3RyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlQWN0aXZpdHlJbnN0YW5jZVBhcnQ6IGZ1bmN0aW9uIChhY3Rpdml0eUlkKSB7XG4gICAgICAgICAgICByZXR1cm4gZ3VpZHMubWFya2Vycy5hY3Rpdml0eUluc3RhbmNlICsgXCI6XCIgKyBhY3Rpdml0eUlkO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldEFjdGl2aXR5SWQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IHNwbGl0U3BlY1N0cmluZyhvYmopO1xuICAgICAgICAgICAgaWYgKHBhcnRzICYmIHBhcnRzLmd1aWQgPT09IGd1aWRzLm1hcmtlcnMuYWN0aXZpdHlJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cy5zdHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcblxuICAgICAgICBkb3VibGVLZXlzOiBmdW5jdGlvbiAoa2V5MSwga2V5Mikge1xuICAgICAgICAgICAgcmV0dXJuIGtleTEgKyBndWlkcy5tYXJrZXJzLmtleVNlcGFyYXRvciArIGtleTI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3BlY1N0cmluZ3M7XG4iXX0=
