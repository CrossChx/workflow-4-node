"use strict";
var guids = require("./guids");
var _ = require("lodash");
var guidLength = guids.markers.activityInstance.length;
var makeSpecString = function(guid, str) {
  return guid + ":" + str;
};
var isSpecString = function(specString) {
  if (_.isString(specString) && specString.length > guidLength + 1 && specString[guidLength] === ":") {
    var il = guids.identity.length;
    for (var i = 0; i < il; i++) {
      if (guids.identity[i] !== specString[i])
        return false;
    }
    return true;
  }
  return false;
};
var getGuid = function(specString) {
  if (!isSpecString(specString))
    return null;
  return specString.substr(0, guidLength);
};
var getString = function(specString) {
  if (!isSpecString(specString))
    return null;
  return specString.substr(guidLength + 1);
};
var splitSpecString = function(specString) {
  if (!isSpecString(specString))
    return null;
  return {
    guid: specString.substr(0, guidLength),
    str: specString.substr(guidLength + 1)
  };
};
var makSpecForActivity = function(guid, activityOrId) {
  var id = _.isString(activityOrId) ? activityOrId : activityOrId.id;
  return makeSpecString(guid, id);
};
var specStrings = {
  is: isSpecString,
  getGuid: getGuid,
  getString: getString,
  split: splitSpecString,
  activities: {
    asValueToCollect: function(activityOrId) {
      return makSpecForActivity(guids.markers.valueToCollect, activityOrId);
    },
    createCollectingCompletedBMName: function(activityOrId) {
      return makSpecForActivity(guids.markers.collectingCompletedBookmark, activityOrId);
    },
    createValueCollectedBMName: function(activityOrId) {
      return makSpecForActivity(guids.markers.valueCollectedBookmark, activityOrId);
    }
  },
  hosting: {
    createBeginMethodBMName: function(methodName) {
      return makeSpecString(guids.markers.beginMethodBookmark, methodName);
    },
    createActivityPropertyPart: function(methodName) {
      return makeSpecString(guids.markers.activityProperty, methodName);
    },
    getActivityPropertyName: function(obj) {
      var parts = splitSpecString(obj);
      if (parts && parts.guid === guids.markers.activityProperty) {
        return parts.str;
      }
      return null;
    },
    createActivityInstancePart: function(activityId) {
      return guids.markers.activityInstance + ":" + activityId;
    },
    getActivityId: function(obj) {
      var parts = splitSpecString(obj);
      if (parts && parts.guid === guids.markers.activityInstance) {
        return parts.str;
      }
      return null;
    },
    doubleKeys: function(key1, key2) {
      return key1 + guids.markers.keySeparator + key2;
    }
  }
};
module.exports = specStrings;
//# sourceMappingURL=data:application/json;base64,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QUM5QyxXQUFPLENBQUEsS0FBSSxRQUFRLGlCQUFpQixFQUFJLElBQUUsQ0FBQSxDQUFJLFdBQVMsQ0FBQztJQUM1RDtBQUVBLGdCQUFZLENBQUcsVUFBVSxHQUFFLENBQUc7QUFDMUIsQUFBSSxRQUFBLENBQUEsS0FBSSxFQUFJLENBQUEsZUFBYyxBQUFDLENBQUMsR0FBRSxDQUFDLENBQUM7QUFDaEMsU0FBSSxLQUFJLEdBQUssQ0FBQSxLQUFJLEtBQUssSUFBTSxDQUFBLEtBQUksUUFBUSxpQkFBaUIsQ0FBRztBQUN4RCxhQUFPLENBQUEsS0FBSSxJQUFJLENBQUM7TUFDcEI7QUFBQSxBQUNBLFdBQU8sS0FBRyxDQUFDO0lBQ2Y7QUFFQSxhQUFTLENBQUcsVUFBVSxJQUFHLENBQUcsQ0FBQSxJQUFHLENBQUc7QUFDOUIsV0FBTyxDQUFBLElBQUcsRUFBSSxDQUFBLEtBQUksUUFBUSxhQUFhLENBQUEsQ0FBSSxLQUFHLENBQUM7SUFDbkQ7QUFBQSxFQUNKO0FBQUEsQUFDSixDQUFBO0FBRUEsS0FBSyxRQUFRLEVBQUksWUFBVSxDQUFDO0FBQzVCIiwiZmlsZSI6ImNvbW1vbi9zcGVjU3RyaW5ncy5qcyIsInNvdXJjZVJvb3QiOiJsaWIvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsidmFyIGd1aWRzID0gcmVxdWlyZShcIi4vZ3VpZHNcIik7XG52YXIgXyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5cbnZhciBndWlkTGVuZ3RoID0gZ3VpZHMubWFya2Vycy5hY3Rpdml0eUluc3RhbmNlLmxlbmd0aDtcblxudmFyIG1ha2VTcGVjU3RyaW5nID0gZnVuY3Rpb24gKGd1aWQsIHN0cikge1xuICAgIHJldHVybiBndWlkICsgXCI6XCIgKyBzdHI7XG59XG5cbnZhciBpc1NwZWNTdHJpbmcgPSBmdW5jdGlvbiAoc3BlY1N0cmluZykge1xuICAgIGlmIChfLmlzU3RyaW5nKHNwZWNTdHJpbmcpICYmIHNwZWNTdHJpbmcubGVuZ3RoID4gZ3VpZExlbmd0aCArIDEgJiYgc3BlY1N0cmluZ1tndWlkTGVuZ3RoXSA9PT0gXCI6XCIpIHtcbiAgICAgICAgdmFyIGlsID0gZ3VpZHMuaWRlbnRpdHkubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlsOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChndWlkcy5pZGVudGl0eVtpXSAhPT0gc3BlY1N0cmluZ1tpXSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBnZXRHdWlkID0gZnVuY3Rpb24gKHNwZWNTdHJpbmcpIHtcbiAgICBpZiAoIWlzU3BlY1N0cmluZyhzcGVjU3RyaW5nKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHNwZWNTdHJpbmcuc3Vic3RyKDAsIGd1aWRMZW5ndGgpO1xufVxuXG52YXIgZ2V0U3RyaW5nID0gZnVuY3Rpb24gKHNwZWNTdHJpbmcpIHtcbiAgICBpZiAoIWlzU3BlY1N0cmluZyhzcGVjU3RyaW5nKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHNwZWNTdHJpbmcuc3Vic3RyKGd1aWRMZW5ndGggKyAxKTtcbn1cblxudmFyIHNwbGl0U3BlY1N0cmluZyA9IGZ1bmN0aW9uIChzcGVjU3RyaW5nKSB7XG4gICAgaWYgKCFpc1NwZWNTdHJpbmcoc3BlY1N0cmluZykpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICAgIGd1aWQ6IHNwZWNTdHJpbmcuc3Vic3RyKDAsIGd1aWRMZW5ndGgpLFxuICAgICAgICBzdHI6IHNwZWNTdHJpbmcuc3Vic3RyKGd1aWRMZW5ndGggKyAxKVxuICAgIH07XG59XG5cbnZhciBtYWtTcGVjRm9yQWN0aXZpdHkgPSBmdW5jdGlvbiAoZ3VpZCwgYWN0aXZpdHlPcklkKSB7XG4gICAgdmFyIGlkID0gXy5pc1N0cmluZyhhY3Rpdml0eU9ySWQpID8gYWN0aXZpdHlPcklkIDogYWN0aXZpdHlPcklkLmlkO1xuICAgIHJldHVybiBtYWtlU3BlY1N0cmluZyhndWlkLCBpZCk7XG59XG5cbnZhciBzcGVjU3RyaW5ncyA9IHtcbiAgICBpczogaXNTcGVjU3RyaW5nLFxuICAgIGdldEd1aWQ6IGdldEd1aWQsXG4gICAgZ2V0U3RyaW5nOiBnZXRTdHJpbmcsXG4gICAgc3BsaXQ6IHNwbGl0U3BlY1N0cmluZyxcbiAgICBhY3Rpdml0aWVzOiB7XG4gICAgICAgIGFzVmFsdWVUb0NvbGxlY3Q6IGZ1bmN0aW9uIChhY3Rpdml0eU9ySWQpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtTcGVjRm9yQWN0aXZpdHkoZ3VpZHMubWFya2Vycy52YWx1ZVRvQ29sbGVjdCwgYWN0aXZpdHlPcklkKTtcbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGVDb2xsZWN0aW5nQ29tcGxldGVkQk1OYW1lOiBmdW5jdGlvbiAoYWN0aXZpdHlPcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrU3BlY0ZvckFjdGl2aXR5KGd1aWRzLm1hcmtlcnMuY29sbGVjdGluZ0NvbXBsZXRlZEJvb2ttYXJrLCBhY3Rpdml0eU9ySWQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNyZWF0ZVZhbHVlQ29sbGVjdGVkQk1OYW1lOiBmdW5jdGlvbiAoYWN0aXZpdHlPcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrU3BlY0ZvckFjdGl2aXR5KGd1aWRzLm1hcmtlcnMudmFsdWVDb2xsZWN0ZWRCb29rbWFyaywgYWN0aXZpdHlPcklkKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaG9zdGluZzoge1xuXG4gICAgICAgIGNyZWF0ZUJlZ2luTWV0aG9kQk1OYW1lOiBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VTcGVjU3RyaW5nKGd1aWRzLm1hcmtlcnMuYmVnaW5NZXRob2RCb29rbWFyaywgbWV0aG9kTmFtZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlQWN0aXZpdHlQcm9wZXJ0eVBhcnQ6IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZVNwZWNTdHJpbmcoZ3VpZHMubWFya2Vycy5hY3Rpdml0eVByb3BlcnR5LCBtZXRob2ROYW1lKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRBY3Rpdml0eVByb3BlcnR5TmFtZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgdmFyIHBhcnRzID0gc3BsaXRTcGVjU3RyaW5nKG9iaik7XG4gICAgICAgICAgICBpZiAocGFydHMgJiYgcGFydHMuZ3VpZCA9PT0gZ3VpZHMubWFya2Vycy5hY3Rpdml0eVByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLnN0cjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNyZWF0ZUFjdGl2aXR5SW5zdGFuY2VQYXJ0OiBmdW5jdGlvbiAoYWN0aXZpdHlJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGd1aWRzLm1hcmtlcnMuYWN0aXZpdHlJbnN0YW5jZSArIFwiOlwiICsgYWN0aXZpdHlJZDtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRBY3Rpdml0eUlkOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBzcGxpdFNwZWNTdHJpbmcob2JqKTtcbiAgICAgICAgICAgIGlmIChwYXJ0cyAmJiBwYXJ0cy5ndWlkID09PSBndWlkcy5tYXJrZXJzLmFjdGl2aXR5SW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFydHMuc3RyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZG91YmxlS2V5czogZnVuY3Rpb24gKGtleTEsIGtleTIpIHtcbiAgICAgICAgICAgIHJldHVybiBrZXkxICsgZ3VpZHMubWFya2Vycy5rZXlTZXBhcmF0b3IgKyBrZXkyO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNwZWNTdHJpbmdzO1xuIl19
