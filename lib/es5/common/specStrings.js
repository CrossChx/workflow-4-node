"use strict";
var guids = require("./guids");
var _ = require("lodash");
var guidLength = guids.markers.activityInstance.length;
var makeSpecString = function(guid, str) {
  return guid + ":" + str;
};
var isSpecString = function(specString) {
  if (_.isString(specString) && specString.length > guidLength + 1 && specString[guidLength] === ":") {
    var il = guids.identity.length;
    for (var i = 0; i < il; i++) {
      if (guids.identity[i] !== specString[i])
        return false;
    }
    return true;
  }
  return false;
};
var getGuid = function(specString) {
  if (!isSpecString(specString))
    return null;
  return specString.substr(0, guidLength);
};
var getString = function(specString) {
  if (!isSpecString(specString))
    return null;
  return specString.substr(guidLength + 1);
};
var splitSpecString = function(specString) {
  if (!isSpecString(specString))
    return null;
  return {
    guid: specString.substr(0, guidLength),
    str: specString.substr(guidLength + 1)
  };
};
var makSpecForActivity = function(guid, activityOrId) {
  var id = _.isString(activityOrId) ? activityOrId : activityOrId.id;
  return makeSpecString(guid, id);
};
var specStrings = {
  is: isSpecString,
  getGuid: getGuid,
  getString: getString,
  split: splitSpecString,
  activities: {
    asValueToCollect: function(activityOrId) {
      return makSpecForActivity(guids.markers.valueToCollect, activityOrId);
    },
    createCollectingCompletedBMName: function(activityOrId) {
      return makSpecForActivity(guids.markers.collectingCompletedBookmark, activityOrId);
    },
    createValueCollectedBMName: function(activityOrId) {
      return makSpecForActivity(guids.markers.valueCollectedBookmark, activityOrId);
    }
  },
  hosting: {
    createBeginMethodBMName: function(methodName) {
      return makeSpecString(guids.markers.beginMethodBookmark, methodName);
    },
    createActivityPropertyPart: function(methodName) {
      return makeSpecString(guids.markers.activityProperty, methodName);
    },
    getActivityPropertyName: function(obj) {
      var parts = splitSpecString(obj);
      if (parts && parts.guid === guids.markers.activityProperty) {
        return parts.str;
      }
      return null;
    },
    createActivityInstancePart: function(activityId) {
      return guids.markers.activityInstance + ":" + activityId;
    },
    getActivityId: function(obj) {
      var parts = splitSpecString(obj);
      if (parts && parts.guid === guids.markers.activityInstance) {
        return parts.str;
      }
      return null;
    },
    doubleKeys: function(key1, key2) {
      return key1 + guids.markers.keySeparator + key2;
    }
  }
};
module.exports = specStrings;
//# sourceMappingURL=data:application/json;base64,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QUM5QyxXQUFPLENBQUEsS0FBSSxRQUFRLGlCQUFpQixFQUFJLElBQUUsQ0FBQSxDQUFJLFdBQVMsQ0FBQztJQUM1RDtBQUVBLGdCQUFZLENBQUcsVUFBVSxHQUFFLENBQUc7QUFDMUIsQUFBSSxRQUFBLENBQUEsS0FBSSxFQUFJLENBQUEsZUFBYyxBQUFDLENBQUMsR0FBRSxDQUFDLENBQUM7QUFDaEMsU0FBSSxLQUFJLEdBQUssQ0FBQSxLQUFJLEtBQUssSUFBTSxDQUFBLEtBQUksUUFBUSxpQkFBaUIsQ0FBRztBQUN4RCxhQUFPLENBQUEsS0FBSSxJQUFJLENBQUM7TUFDcEI7QUFBQSxBQUNBLFdBQU8sS0FBRyxDQUFDO0lBQ2Y7QUFFQSxhQUFTLENBQUcsVUFBVSxJQUFHLENBQUcsQ0FBQSxJQUFHLENBQUc7QUFDOUIsV0FBTyxDQUFBLElBQUcsRUFBSSxDQUFBLEtBQUksUUFBUSxhQUFhLENBQUEsQ0FBSSxLQUFHLENBQUM7SUFDbkQ7QUFBQSxFQUNKO0FBQUEsQUFDSixDQUFBO0FBRUEsS0FBSyxRQUFRLEVBQUksWUFBVSxDQUFDO0FBQzVCIiwiZmlsZSI6ImNvbW1vbi9zcGVjU3RyaW5ncy5qcyIsInNvdXJjZVJvb3QiOiJsaWIvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsidmFyIGd1aWRzID0gcmVxdWlyZShcIi4vZ3VpZHNcIik7XHJcbnZhciBfID0gcmVxdWlyZShcImxvZGFzaFwiKTtcclxuXHJcbnZhciBndWlkTGVuZ3RoID0gZ3VpZHMubWFya2Vycy5hY3Rpdml0eUluc3RhbmNlLmxlbmd0aDtcclxuXHJcbnZhciBtYWtlU3BlY1N0cmluZyA9IGZ1bmN0aW9uIChndWlkLCBzdHIpIHtcclxuICAgIHJldHVybiBndWlkICsgXCI6XCIgKyBzdHI7XHJcbn1cclxuXHJcbnZhciBpc1NwZWNTdHJpbmcgPSBmdW5jdGlvbiAoc3BlY1N0cmluZykge1xyXG4gICAgaWYgKF8uaXNTdHJpbmcoc3BlY1N0cmluZykgJiYgc3BlY1N0cmluZy5sZW5ndGggPiBndWlkTGVuZ3RoICsgMSAmJiBzcGVjU3RyaW5nW2d1aWRMZW5ndGhdID09PSBcIjpcIikge1xyXG4gICAgICAgIHZhciBpbCA9IGd1aWRzLmlkZW50aXR5Lmxlbmd0aDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlsOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGd1aWRzLmlkZW50aXR5W2ldICE9PSBzcGVjU3RyaW5nW2ldKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG52YXIgZ2V0R3VpZCA9IGZ1bmN0aW9uIChzcGVjU3RyaW5nKSB7XHJcbiAgICBpZiAoIWlzU3BlY1N0cmluZyhzcGVjU3RyaW5nKSkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gc3BlY1N0cmluZy5zdWJzdHIoMCwgZ3VpZExlbmd0aCk7XHJcbn1cclxuXHJcbnZhciBnZXRTdHJpbmcgPSBmdW5jdGlvbiAoc3BlY1N0cmluZykge1xyXG4gICAgaWYgKCFpc1NwZWNTdHJpbmcoc3BlY1N0cmluZykpIHJldHVybiBudWxsO1xyXG4gICAgcmV0dXJuIHNwZWNTdHJpbmcuc3Vic3RyKGd1aWRMZW5ndGggKyAxKTtcclxufVxyXG5cclxudmFyIHNwbGl0U3BlY1N0cmluZyA9IGZ1bmN0aW9uIChzcGVjU3RyaW5nKSB7XHJcbiAgICBpZiAoIWlzU3BlY1N0cmluZyhzcGVjU3RyaW5nKSkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGd1aWQ6IHNwZWNTdHJpbmcuc3Vic3RyKDAsIGd1aWRMZW5ndGgpLFxyXG4gICAgICAgIHN0cjogc3BlY1N0cmluZy5zdWJzdHIoZ3VpZExlbmd0aCArIDEpXHJcbiAgICB9O1xyXG59XHJcblxyXG52YXIgbWFrU3BlY0ZvckFjdGl2aXR5ID0gZnVuY3Rpb24gKGd1aWQsIGFjdGl2aXR5T3JJZCkge1xyXG4gICAgdmFyIGlkID0gXy5pc1N0cmluZyhhY3Rpdml0eU9ySWQpID8gYWN0aXZpdHlPcklkIDogYWN0aXZpdHlPcklkLmlkO1xyXG4gICAgcmV0dXJuIG1ha2VTcGVjU3RyaW5nKGd1aWQsIGlkKTtcclxufVxyXG5cclxudmFyIHNwZWNTdHJpbmdzID0ge1xyXG4gICAgaXM6IGlzU3BlY1N0cmluZyxcclxuICAgIGdldEd1aWQ6IGdldEd1aWQsXHJcbiAgICBnZXRTdHJpbmc6IGdldFN0cmluZyxcclxuICAgIHNwbGl0OiBzcGxpdFNwZWNTdHJpbmcsXHJcbiAgICBhY3Rpdml0aWVzOiB7XHJcbiAgICAgICAgYXNWYWx1ZVRvQ29sbGVjdDogZnVuY3Rpb24gKGFjdGl2aXR5T3JJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFrU3BlY0ZvckFjdGl2aXR5KGd1aWRzLm1hcmtlcnMudmFsdWVUb0NvbGxlY3QsIGFjdGl2aXR5T3JJZCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY3JlYXRlQ29sbGVjdGluZ0NvbXBsZXRlZEJNTmFtZTogZnVuY3Rpb24gKGFjdGl2aXR5T3JJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFrU3BlY0ZvckFjdGl2aXR5KGd1aWRzLm1hcmtlcnMuY29sbGVjdGluZ0NvbXBsZXRlZEJvb2ttYXJrLCBhY3Rpdml0eU9ySWQpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNyZWF0ZVZhbHVlQ29sbGVjdGVkQk1OYW1lOiBmdW5jdGlvbiAoYWN0aXZpdHlPcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYWtTcGVjRm9yQWN0aXZpdHkoZ3VpZHMubWFya2Vycy52YWx1ZUNvbGxlY3RlZEJvb2ttYXJrLCBhY3Rpdml0eU9ySWQpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBob3N0aW5nOiB7XHJcblxyXG4gICAgICAgIGNyZWF0ZUJlZ2luTWV0aG9kQk1OYW1lOiBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFrZVNwZWNTdHJpbmcoZ3VpZHMubWFya2Vycy5iZWdpbk1ldGhvZEJvb2ttYXJrLCBtZXRob2ROYW1lKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBjcmVhdGVBY3Rpdml0eVByb3BlcnR5UGFydDogZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1ha2VTcGVjU3RyaW5nKGd1aWRzLm1hcmtlcnMuYWN0aXZpdHlQcm9wZXJ0eSwgbWV0aG9kTmFtZSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZ2V0QWN0aXZpdHlQcm9wZXJ0eU5hbWU6IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgdmFyIHBhcnRzID0gc3BsaXRTcGVjU3RyaW5nKG9iaik7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0cyAmJiBwYXJ0cy5ndWlkID09PSBndWlkcy5tYXJrZXJzLmFjdGl2aXR5UHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cy5zdHI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY3JlYXRlQWN0aXZpdHlJbnN0YW5jZVBhcnQ6IGZ1bmN0aW9uIChhY3Rpdml0eUlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBndWlkcy5tYXJrZXJzLmFjdGl2aXR5SW5zdGFuY2UgKyBcIjpcIiArIGFjdGl2aXR5SWQ7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZ2V0QWN0aXZpdHlJZDogZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICB2YXIgcGFydHMgPSBzcGxpdFNwZWNTdHJpbmcob2JqKTtcclxuICAgICAgICAgICAgaWYgKHBhcnRzICYmIHBhcnRzLmd1aWQgPT09IGd1aWRzLm1hcmtlcnMuYWN0aXZpdHlJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLnN0cjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBkb3VibGVLZXlzOiBmdW5jdGlvbiAoa2V5MSwga2V5Mikge1xyXG4gICAgICAgICAgICByZXR1cm4ga2V5MSArIGd1aWRzLm1hcmtlcnMua2V5U2VwYXJhdG9yICsga2V5MjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc3BlY1N0cmluZ3M7XHJcbiJdfQ==
