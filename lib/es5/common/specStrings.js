"use strict";
var guids = require("./guids");
var _ = require("lodash");
var guidLength = guids.markers.activityInstance.length;
function makeSpecString(guid, str) {
  return guid + ":" + str;
}
function isSpecString(specString) {
  if (_.isString(specString) && specString.length > guidLength + 1 && specString[guidLength] === ":") {
    var il = guids.identity.length;
    for (var i = 0; i < il; i++) {
      if (guids.identity[i] !== specString[i]) {
        return false;
      }
    }
    return true;
  }
  return false;
}
function getGuid(specString) {
  if (!isSpecString(specString)) {
    return null;
  }
  return specString.substr(0, guidLength);
}
function getString(specString) {
  if (!isSpecString(specString)) {
    return null;
  }
  return specString.substr(guidLength + 1);
}
function splitSpecString(specString) {
  if (!isSpecString(specString)) {
    return null;
  }
  return {
    guid: specString.substr(0, guidLength),
    str: specString.substr(guidLength + 1)
  };
}
function makSpecForActivity(guid, activityId) {
  if (!_.isString(activityId)) {
    throw new TypeError(("Activity id '" + activityId + "' is not a string."));
  }
  return makeSpecString(guid, activityId);
}
var specStrings = {
  is: isSpecString,
  getGuid: getGuid,
  getString: getString,
  split: splitSpecString,
  activities: {
    createCollectingCompletedBMName: function(activityId) {
      return makSpecForActivity(guids.markers.collectingCompletedBookmark, activityId);
    },
    createValueCollectedBMName: function(activityId) {
      return makSpecForActivity(guids.markers.valueCollectedBookmark, activityId);
    }
  },
  hosting: {
    createBeginMethodBMName: function(methodName) {
      return makeSpecString(guids.markers.beginMethodBookmark, methodName);
    },
    createDelayToMethodName: function(id) {
      return makeSpecString(guids.markers.delayToMethodNamePrefix, id);
    },
    createActivityPropertyPart: function(methodName) {
      return makeSpecString(guids.markers.activityProperty, methodName);
    },
    createActivityInstancePart: function(activityId) {
      return guids.markers.activityInstance + ":" + activityId;
    },
    getActivityPropertyName: function(obj) {
      var parts = splitSpecString(obj);
      if (parts && parts.guid === guids.markers.activityProperty) {
        return parts.str;
      }
      return null;
    },
    getInstanceId: function(obj) {
      var parts = splitSpecString(obj);
      if (parts && parts.guid === guids.markers.activityInstance) {
        return parts.str;
      }
      return null;
    },
    isDelayToMethodName: function(obj) {
      var parts = splitSpecString(obj);
      return parts && parts.guid === guids.markers.delayToMethodNamePrefix;
    },
    doubleKeys: function(key1, key2) {
      return key1 + guids.markers.keySeparator + key2;
    }
  }
};
module.exports = specStrings;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwZWNTdHJpbmdzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBRUEsQUFBSSxFQUFBLENBQUEsS0FBSSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsU0FBUSxDQUFDLENBQUM7QUFDOUIsQUFBSSxFQUFBLENBQUEsQ0FBQSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsUUFBTyxDQUFDLENBQUM7QUFFekIsQUFBSSxFQUFBLENBQUEsVUFBUyxFQUFJLENBQUEsS0FBSSxRQUFRLGlCQUFpQixPQUFPLENBQUM7QUFFdEQsT0FBUyxlQUFhLENBQUUsSUFBRyxDQUFHLENBQUEsR0FBRSxDQUFHO0FBQy9CLE9BQU8sQ0FBQSxJQUFHLEVBQUksSUFBRSxDQUFBLENBQUksSUFBRSxDQUFDO0FBQzNCO0FBQUEsQUFFQSxPQUFTLGFBQVcsQ0FBRSxVQUFTLENBQUc7QUFDOUIsS0FBSSxDQUFBLFNBQVMsQUFBQyxDQUFDLFVBQVMsQ0FBQyxDQUFBLEVBQUssQ0FBQSxVQUFTLE9BQU8sRUFBSSxDQUFBLFVBQVMsRUFBSSxFQUFBLENBQUEsRUFBSyxDQUFBLFVBQVMsQ0FBRSxVQUFTLENBQUMsSUFBTSxJQUFFLENBQUc7QUFDaEcsQUFBSSxNQUFBLENBQUEsRUFBQyxFQUFJLENBQUEsS0FBSSxTQUFTLE9BQU8sQ0FBQztBQUM5QixlQUFhLEVBQUEsQ0FBRyxDQUFBLENBQUEsRUFBSSxHQUFDLENBQUcsQ0FBQSxDQUFBLEVBQUUsQ0FBRztBQUN6QixTQUFJLEtBQUksU0FBUyxDQUFFLENBQUEsQ0FBQyxJQUFNLENBQUEsVUFBUyxDQUFFLENBQUEsQ0FBQyxDQUFHO0FBQ3JDLGFBQU8sTUFBSSxDQUFDO01BQ2hCO0FBQUEsSUFDSjtBQUFBLEFBQ0EsU0FBTyxLQUFHLENBQUM7RUFDZjtBQUFBLEFBQ0EsT0FBTyxNQUFJLENBQUM7QUFDaEI7QUFBQSxBQUVBLE9BQVMsUUFBTSxDQUFFLFVBQVMsQ0FBRztBQUN6QixLQUFJLENBQUMsWUFBVyxBQUFDLENBQUMsVUFBUyxDQUFDLENBQUc7QUFDM0IsU0FBTyxLQUFHLENBQUM7RUFDZjtBQUFBLEFBQ0EsT0FBTyxDQUFBLFVBQVMsT0FBTyxBQUFDLENBQUMsQ0FBQSxDQUFHLFdBQVMsQ0FBQyxDQUFDO0FBQzNDO0FBQUEsQUFFQSxPQUFTLFVBQVEsQ0FBRSxVQUFTLENBQUc7QUFDM0IsS0FBSSxDQUFDLFlBQVcsQUFBQyxDQUFDLFVBQVMsQ0FBQyxDQUFHO0FBQzNCLFNBQU8sS0FBRyxDQUFDO0VBQ2Y7QUFBQSxBQUNBLE9BQU8sQ0FBQSxVQUFTLE9BQU8sQUFBQyxDQUFDLFVBQVMsRUFBSSxFQUFBLENBQUMsQ0FBQztBQUM1QztBQUFBLEFBRUEsT0FBUyxnQkFBYyxDQUFFLFVBQVMsQ0FBRztBQUNqQyxLQUFJLENBQUMsWUFBVyxBQUFDLENBQUMsVUFBUyxDQUFDLENBQUc7QUFDM0IsU0FBTyxLQUFHLENBQUM7RUFDZjtBQUFBLEFBQ0EsT0FBTztBQUNILE9BQUcsQ0FBRyxDQUFBLFVBQVMsT0FBTyxBQUFDLENBQUMsQ0FBQSxDQUFHLFdBQVMsQ0FBQztBQUNyQyxNQUFFLENBQUcsQ0FBQSxVQUFTLE9BQU8sQUFBQyxDQUFDLFVBQVMsRUFBSSxFQUFBLENBQUM7QUFBQSxFQUN6QyxDQUFDO0FBQ0w7QUFBQSxBQUVBLE9BQVMsbUJBQWlCLENBQUUsSUFBRyxDQUFHLENBQUEsVUFBUyxDQUFHO0FBQzFDLEtBQUksQ0FBQyxDQUFBLFNBQVMsQUFBQyxDQUFDLFVBQVMsQ0FBQyxDQUFHO0FBQ3pCLFFBQU0sSUFBSSxVQUFRLEFBQUMsRUFBQyxlQUFlLEVBQUMsV0FBUyxFQUFDLHFCQUFtQixFQUFDLENBQUM7RUFDdkU7QUFBQSxBQUNBLE9BQU8sQ0FBQSxjQUFhLEFBQUMsQ0FBQyxJQUFHLENBQUcsV0FBUyxDQUFDLENBQUM7QUFDM0M7QUFBQSxBQUVJLEVBQUEsQ0FBQSxXQUFVLEVBQUk7QUFDZCxHQUFDLENBQUcsYUFBVztBQUNmLFFBQU0sQ0FBRyxRQUFNO0FBQ2YsVUFBUSxDQUFHLFVBQVE7QUFDbkIsTUFBSSxDQUFHLGdCQUFjO0FBQ3JCLFdBQVMsQ0FBRztBQUNSLGtDQUE4QixDQUFHLFVBQVUsVUFBUyxDQUFHO0FBQ25ELFdBQU8sQ0FBQSxrQkFBaUIsQUFBQyxDQUFDLEtBQUksUUFBUSw0QkFBNEIsQ0FBRyxXQUFTLENBQUMsQ0FBQztJQUNwRjtBQUNBLDZCQUF5QixDQUFHLFVBQVUsVUFBUyxDQUFHO0FBQzlDLFdBQU8sQ0FBQSxrQkFBaUIsQUFBQyxDQUFDLEtBQUksUUFBUSx1QkFBdUIsQ0FBRyxXQUFTLENBQUMsQ0FBQztJQUMvRTtBQUFBLEVBQ0o7QUFDQSxRQUFNLENBQUc7QUFDTCwwQkFBc0IsQ0FBRyxVQUFVLFVBQVMsQ0FBRztBQUMzQyxXQUFPLENBQUEsY0FBYSxBQUFDLENBQUMsS0FBSSxRQUFRLG9CQUFvQixDQUFHLFdBQVMsQ0FBQyxDQUFDO0lBQ3hFO0FBQ0EsMEJBQXNCLENBQUcsVUFBVSxFQUFDLENBQUc7QUFDbkMsV0FBTyxDQUFBLGNBQWEsQUFBQyxDQUFDLEtBQUksUUFBUSx3QkFBd0IsQ0FBRyxHQUFDLENBQUMsQ0FBQztJQUNwRTtBQUNBLDZCQUF5QixDQUFHLFVBQVUsVUFBUyxDQUFHO0FBQzlDLFdBQU8sQ0FBQSxjQUFhLEFBQUMsQ0FBQyxLQUFJLFFBQVEsaUJBQWlCLENBQUcsV0FBUyxDQUFDLENBQUM7SUFDckU7QUFDQSw2QkFBeUIsQ0FBRyxVQUFVLFVBQVMsQ0FBRztBQUM5QyxXQUFPLENBQUEsS0FBSSxRQUFRLGlCQUFpQixFQUFJLElBQUUsQ0FBQSxDQUFJLFdBQVMsQ0FBQztJQUM1RDtBQUNBLDBCQUFzQixDQUFHLFVBQVUsR0FBRSxDQUFHO0FBQ3BDLEFBQUksUUFBQSxDQUFBLEtBQUksRUFBSSxDQUFBLGVBQWMsQUFBQyxDQUFDLEdBQUUsQ0FBQyxDQUFDO0FBQ2hDLFNBQUksS0FBSSxHQUFLLENBQUEsS0FBSSxLQUFLLElBQU0sQ0FBQSxLQUFJLFFBQVEsaUJBQWlCLENBQUc7QUFDeEQsYUFBTyxDQUFBLEtBQUksSUFBSSxDQUFDO01BQ3BCO0FBQUEsQUFDQSxXQUFPLEtBQUcsQ0FBQztJQUNmO0FBQ0EsZ0JBQVksQ0FBRyxVQUFVLEdBQUUsQ0FBRztBQUMxQixBQUFJLFFBQUEsQ0FBQSxLQUFJLEVBQUksQ0FBQSxlQUFjLEFBQUMsQ0FBQyxHQUFFLENBQUMsQ0FBQztBQUNoQyxTQUFJLEtBQUksR0FBSyxDQUFBLEtBQUksS0FBSyxJQUFNLENBQUEsS0FBSSxRQUFRLGlCQUFpQixDQUFHO0FBQ3hELGFBQU8sQ0FBQSxLQUFJLElBQUksQ0FBQztNQUNwQjtBQUFBLEFBQ0EsV0FBTyxLQUFHLENBQUM7SUFDZjtBQUNBLHNCQUFrQixDQUFHLFVBQVUsR0FBRSxDQUFHO0FBQ2hDLEFBQUksUUFBQSxDQUFBLEtBQUksRUFBSSxDQUFBLGVBQWMsQUFBQyxDQUFDLEdBQUUsQ0FBQyxDQUFDO0FBQ2hDLFdBQU8sQ0FBQSxLQUFJLEdBQUssQ0FBQSxLQUFJLEtBQUssSUFBTSxDQUFBLEtBQUksUUFBUSx3QkFBd0IsQ0FBQztJQUN4RTtBQUNBLGFBQVMsQ0FBRyxVQUFVLElBQUcsQ0FBRyxDQUFBLElBQUcsQ0FBRztBQUM5QixXQUFPLENBQUEsSUFBRyxFQUFJLENBQUEsS0FBSSxRQUFRLGFBQWEsQ0FBQSxDQUFJLEtBQUcsQ0FBQztJQUNuRDtBQUFBLEVBQ0o7QUFBQSxBQUNKLENBQUE7QUFFQSxLQUFLLFFBQVEsRUFBSSxZQUFVLENBQUM7QUFDNUIiLCJmaWxlIjoiY29tbW9uL3NwZWNTdHJpbmdzLmpzIiwic291cmNlUm9vdCI6ImxpYi9lczYiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxubGV0IGd1aWRzID0gcmVxdWlyZShcIi4vZ3VpZHNcIik7XG5sZXQgXyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5cbmxldCBndWlkTGVuZ3RoID0gZ3VpZHMubWFya2Vycy5hY3Rpdml0eUluc3RhbmNlLmxlbmd0aDtcblxuZnVuY3Rpb24gbWFrZVNwZWNTdHJpbmcoZ3VpZCwgc3RyKSB7XG4gICAgcmV0dXJuIGd1aWQgKyBcIjpcIiArIHN0cjtcbn1cblxuZnVuY3Rpb24gaXNTcGVjU3RyaW5nKHNwZWNTdHJpbmcpIHtcbiAgICBpZiAoXy5pc1N0cmluZyhzcGVjU3RyaW5nKSAmJiBzcGVjU3RyaW5nLmxlbmd0aCA+IGd1aWRMZW5ndGggKyAxICYmIHNwZWNTdHJpbmdbZ3VpZExlbmd0aF0gPT09IFwiOlwiKSB7XG4gICAgICAgIGxldCBpbCA9IGd1aWRzLmlkZW50aXR5Lmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZ3VpZHMuaWRlbnRpdHlbaV0gIT09IHNwZWNTdHJpbmdbaV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0R3VpZChzcGVjU3RyaW5nKSB7XG4gICAgaWYgKCFpc1NwZWNTdHJpbmcoc3BlY1N0cmluZykpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBzcGVjU3RyaW5nLnN1YnN0cigwLCBndWlkTGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gZ2V0U3RyaW5nKHNwZWNTdHJpbmcpIHtcbiAgICBpZiAoIWlzU3BlY1N0cmluZyhzcGVjU3RyaW5nKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHNwZWNTdHJpbmcuc3Vic3RyKGd1aWRMZW5ndGggKyAxKTtcbn1cblxuZnVuY3Rpb24gc3BsaXRTcGVjU3RyaW5nKHNwZWNTdHJpbmcpIHtcbiAgICBpZiAoIWlzU3BlY1N0cmluZyhzcGVjU3RyaW5nKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ3VpZDogc3BlY1N0cmluZy5zdWJzdHIoMCwgZ3VpZExlbmd0aCksXG4gICAgICAgIHN0cjogc3BlY1N0cmluZy5zdWJzdHIoZ3VpZExlbmd0aCArIDEpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gbWFrU3BlY0ZvckFjdGl2aXR5KGd1aWQsIGFjdGl2aXR5SWQpIHtcbiAgICBpZiAoIV8uaXNTdHJpbmcoYWN0aXZpdHlJZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgQWN0aXZpdHkgaWQgJyR7YWN0aXZpdHlJZH0nIGlzIG5vdCBhIHN0cmluZy5gKTtcbiAgICB9XG4gICAgcmV0dXJuIG1ha2VTcGVjU3RyaW5nKGd1aWQsIGFjdGl2aXR5SWQpO1xufVxuXG5sZXQgc3BlY1N0cmluZ3MgPSB7XG4gICAgaXM6IGlzU3BlY1N0cmluZyxcbiAgICBnZXRHdWlkOiBnZXRHdWlkLFxuICAgIGdldFN0cmluZzogZ2V0U3RyaW5nLFxuICAgIHNwbGl0OiBzcGxpdFNwZWNTdHJpbmcsXG4gICAgYWN0aXZpdGllczoge1xuICAgICAgICBjcmVhdGVDb2xsZWN0aW5nQ29tcGxldGVkQk1OYW1lOiBmdW5jdGlvbiAoYWN0aXZpdHlJZCkge1xuICAgICAgICAgICAgcmV0dXJuIG1ha1NwZWNGb3JBY3Rpdml0eShndWlkcy5tYXJrZXJzLmNvbGxlY3RpbmdDb21wbGV0ZWRCb29rbWFyaywgYWN0aXZpdHlJZCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZVZhbHVlQ29sbGVjdGVkQk1OYW1lOiBmdW5jdGlvbiAoYWN0aXZpdHlJZCkge1xuICAgICAgICAgICAgcmV0dXJuIG1ha1NwZWNGb3JBY3Rpdml0eShndWlkcy5tYXJrZXJzLnZhbHVlQ29sbGVjdGVkQm9va21hcmssIGFjdGl2aXR5SWQpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBob3N0aW5nOiB7XG4gICAgICAgIGNyZWF0ZUJlZ2luTWV0aG9kQk1OYW1lOiBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VTcGVjU3RyaW5nKGd1aWRzLm1hcmtlcnMuYmVnaW5NZXRob2RCb29rbWFyaywgbWV0aG9kTmFtZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZURlbGF5VG9NZXRob2ROYW1lOiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlU3BlY1N0cmluZyhndWlkcy5tYXJrZXJzLmRlbGF5VG9NZXRob2ROYW1lUHJlZml4LCBpZCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZUFjdGl2aXR5UHJvcGVydHlQYXJ0OiBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VTcGVjU3RyaW5nKGd1aWRzLm1hcmtlcnMuYWN0aXZpdHlQcm9wZXJ0eSwgbWV0aG9kTmFtZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZUFjdGl2aXR5SW5zdGFuY2VQYXJ0OiBmdW5jdGlvbiAoYWN0aXZpdHlJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGd1aWRzLm1hcmtlcnMuYWN0aXZpdHlJbnN0YW5jZSArIFwiOlwiICsgYWN0aXZpdHlJZDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0QWN0aXZpdHlQcm9wZXJ0eU5hbWU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIGxldCBwYXJ0cyA9IHNwbGl0U3BlY1N0cmluZyhvYmopO1xuICAgICAgICAgICAgaWYgKHBhcnRzICYmIHBhcnRzLmd1aWQgPT09IGd1aWRzLm1hcmtlcnMuYWN0aXZpdHlQcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cy5zdHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0SW5zdGFuY2VJZDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgbGV0IHBhcnRzID0gc3BsaXRTcGVjU3RyaW5nKG9iaik7XG4gICAgICAgICAgICBpZiAocGFydHMgJiYgcGFydHMuZ3VpZCA9PT0gZ3VpZHMubWFya2Vycy5hY3Rpdml0eUluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLnN0cjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBpc0RlbGF5VG9NZXRob2ROYW1lOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICBsZXQgcGFydHMgPSBzcGxpdFNwZWNTdHJpbmcob2JqKTtcbiAgICAgICAgICAgIHJldHVybiBwYXJ0cyAmJiBwYXJ0cy5ndWlkID09PSBndWlkcy5tYXJrZXJzLmRlbGF5VG9NZXRob2ROYW1lUHJlZml4O1xuICAgICAgICB9LFxuICAgICAgICBkb3VibGVLZXlzOiBmdW5jdGlvbiAoa2V5MSwga2V5Mikge1xuICAgICAgICAgICAgcmV0dXJuIGtleTEgKyBndWlkcy5tYXJrZXJzLmtleVNlcGFyYXRvciArIGtleTI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3BlY1N0cmluZ3M7XG4iXX0=
