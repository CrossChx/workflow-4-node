"use strict";
var Activity = require('./activity');
var util = require('util');
var _ = require('lodash');
var fast = require('fast.js');
function And() {
  Activity.call(this);
  this.isTrue = true;
  this.isFalse = false;
}
util.inherits(And, Activity);
And.prototype.run = function(callContext, args) {
  callContext.schedule(args, '_argsGot');
};
And.prototype._argsGot = function(callContext, reason, result) {
  if (reason !== Activity.states.complete) {
    callContext.end(reason, result);
    return ;
  }
  var isTrue = false;
  if (result.length) {
    isTrue = true;
    fast.forEach(result, function(v) {
      isTrue = (v ? true : false) && isTrue;
    });
  }
  if (isTrue) {
    callContext.schedule(this.get('isTrue'), '_done');
  } else {
    callContext.schedule(this.get('isFalse'), '_done');
  }
};
And.prototype._done = function(callContext, reason, result) {
  callContext.end(reason, result);
};
module.exports = And;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLEFBQUksRUFBQSxDQUFBLFFBQU8sRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFlBQVcsQ0FBQyxDQUFDO0FBQ3BDLEFBQUksRUFBQSxDQUFBLElBQUcsRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLE1BQUssQ0FBQyxDQUFDO0FBQzFCLEFBQUksRUFBQSxDQUFBLENBQUEsRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFFBQU8sQ0FBQyxDQUFDO0FBQ3pCLEFBQUksRUFBQSxDQUFBLElBQUcsRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFNBQVEsQ0FBQyxDQUFDO0FBRTdCLE9BQVMsSUFBRSxDQUFFLEFBQUQsQ0FBRztBQUNYLFNBQU8sS0FBSyxBQUFDLENBQUMsSUFBRyxDQUFDLENBQUM7QUFFbkIsS0FBRyxPQUFPLEVBQUksS0FBRyxDQUFDO0FBQ2xCLEtBQUcsUUFBUSxFQUFJLE1BQUksQ0FBQztBQUN4QjtBQUFBLEFBRUEsR0FBRyxTQUFTLEFBQUMsQ0FBQyxHQUFFLENBQUcsU0FBTyxDQUFDLENBQUM7QUFFNUIsRUFBRSxVQUFVLElBQUksRUFBSSxVQUFVLFdBQVUsQ0FBRyxDQUFBLElBQUcsQ0FBRztBQUM3QyxZQUFVLFNBQVMsQUFBQyxDQUFDLElBQUcsQ0FBRyxXQUFTLENBQUMsQ0FBQztBQUMxQyxDQUFBO0FBRUEsRUFBRSxVQUFVLFNBQVMsRUFBSSxVQUFTLFdBQVUsQ0FBRyxDQUFBLE1BQUssQ0FBRyxDQUFBLE1BQUssQ0FBRztBQUMzRCxLQUFJLE1BQUssSUFBTSxDQUFBLFFBQU8sT0FBTyxTQUFTLENBQUc7QUFDckMsY0FBVSxJQUFJLEFBQUMsQ0FBQyxNQUFLLENBQUcsT0FBSyxDQUFDLENBQUM7QUFDL0IsV0FBTTtFQUNWO0FBQUEsQUFFSSxJQUFBLENBQUEsTUFBSyxFQUFJLE1BQUksQ0FBQztBQUNsQixLQUFJLE1BQUssT0FBTyxDQUFHO0FBQ2YsU0FBSyxFQUFJLEtBQUcsQ0FBQztBQUNiLE9BQUcsUUFBUSxBQUFDLENBQUMsTUFBSyxDQUFHLFVBQVUsQ0FBQSxDQUFHO0FBQzlCLFdBQUssRUFBSSxDQUFBLENBQUMsQ0FBQSxFQUFJLEtBQUcsRUFBSSxNQUFJLENBQUMsR0FBSyxPQUFLLENBQUM7SUFDekMsQ0FBQyxDQUFDO0VBQ047QUFBQSxBQUVBLEtBQUksTUFBSyxDQUFHO0FBQ1IsY0FBVSxTQUFTLEFBQUMsQ0FBQyxJQUFHLElBQUksQUFBQyxDQUFDLFFBQU8sQ0FBQyxDQUFHLFFBQU0sQ0FBQyxDQUFDO0VBQ3JELEtBQ0s7QUFDRCxjQUFVLFNBQVMsQUFBQyxDQUFDLElBQUcsSUFBSSxBQUFDLENBQUMsU0FBUSxDQUFDLENBQUcsUUFBTSxDQUFDLENBQUM7RUFDdEQ7QUFBQSxBQUNKLENBQUE7QUFFQSxFQUFFLFVBQVUsTUFBTSxFQUFJLFVBQVMsV0FBVSxDQUFHLENBQUEsTUFBSyxDQUFHLENBQUEsTUFBSyxDQUFHO0FBQ3hELFlBQVUsSUFBSSxBQUFDLENBQUMsTUFBSyxDQUFHLE9BQUssQ0FBQyxDQUFDO0FBQ25DLENBQUE7QUFFQSxLQUFLLFFBQVEsRUFBSSxJQUFFLENBQUM7QUFBQSIsImZpbGUiOiJhY3Rpdml0aWVzL2FuZC5qcyIsInNvdXJjZVJvb3QiOiJDOi9HSVQvbW9uZ28tY3J1bmNoL2RlcHMvd29ya2Zsb3ctNC1ub2RlL2xpYi8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQWN0aXZpdHkgPSByZXF1aXJlKCcuL2FjdGl2aXR5Jyk7XHJcbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgZmFzdCA9IHJlcXVpcmUoJ2Zhc3QuanMnKTtcclxuXHJcbmZ1bmN0aW9uIEFuZCgpIHtcclxuICAgIEFjdGl2aXR5LmNhbGwodGhpcyk7XHJcblxyXG4gICAgdGhpcy5pc1RydWUgPSB0cnVlO1xyXG4gICAgdGhpcy5pc0ZhbHNlID0gZmFsc2U7XHJcbn1cclxuXHJcbnV0aWwuaW5oZXJpdHMoQW5kLCBBY3Rpdml0eSk7XHJcblxyXG5BbmQucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIChjYWxsQ29udGV4dCwgYXJncykge1xyXG4gICAgY2FsbENvbnRleHQuc2NoZWR1bGUoYXJncywgJ19hcmdzR290Jyk7XHJcbn1cclxuXHJcbkFuZC5wcm90b3R5cGUuX2FyZ3NHb3QgPSBmdW5jdGlvbihjYWxsQ29udGV4dCwgcmVhc29uLCByZXN1bHQpIHtcclxuICAgIGlmIChyZWFzb24gIT09IEFjdGl2aXR5LnN0YXRlcy5jb21wbGV0ZSkge1xyXG4gICAgICAgIGNhbGxDb250ZXh0LmVuZChyZWFzb24sIHJlc3VsdCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpc1RydWUgPSBmYWxzZTtcclxuICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7XHJcbiAgICAgICAgaXNUcnVlID0gdHJ1ZTtcclxuICAgICAgICBmYXN0LmZvckVhY2gocmVzdWx0LCBmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICBpc1RydWUgPSAodiA/IHRydWUgOiBmYWxzZSkgJiYgaXNUcnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc1RydWUpIHtcclxuICAgICAgICBjYWxsQ29udGV4dC5zY2hlZHVsZSh0aGlzLmdldCgnaXNUcnVlJyksICdfZG9uZScpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY2FsbENvbnRleHQuc2NoZWR1bGUodGhpcy5nZXQoJ2lzRmFsc2UnKSwgJ19kb25lJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkFuZC5wcm90b3R5cGUuX2RvbmUgPSBmdW5jdGlvbihjYWxsQ29udGV4dCwgcmVhc29uLCByZXN1bHQpIHtcclxuICAgIGNhbGxDb250ZXh0LmVuZChyZWFzb24sIHJlc3VsdCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQW5kOyJdfQ==
