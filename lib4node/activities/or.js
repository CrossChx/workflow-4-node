"use strict";
var Activity = require('./activity');
var util = require('util');
var _ = require('lodash');
var fast = require('fast.js');
function Or() {
  Activity.call(this);
  this.isTrue = true;
  this.isFalse = false;
}
util.inherits(Or, Activity);
Or.prototype.run = function(callContext, args) {
  callContext.schedule(args, '_argsGot');
};
Or.prototype._argsGot = function(callContext, reason, result) {
  if (reason !== Activity.states.complete) {
    callContext.end(reason, result);
    return ;
  }
  var isTrue = false;
  fast.forEach(result, function(v) {
    isTrue = (v ? true : false) || isTrue;
  });
  if (isTrue) {
    callContext.schedule(this.get('isTrue'), '_done');
  } else {
    callContext.schedule(this.get('isFalse'), '_done');
  }
};
Or.prototype._done = function(callContext, reason, result) {
  callContext.end(reason, result);
};
module.exports = Or;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsQUFBSSxFQUFBLENBQUEsUUFBTyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsWUFBVyxDQUFDLENBQUM7QUFDcEMsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUM7QUFDMUIsQUFBSSxFQUFBLENBQUEsQ0FBQSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsUUFBTyxDQUFDLENBQUM7QUFDekIsQUFBSSxFQUFBLENBQUEsSUFBRyxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsU0FBUSxDQUFDLENBQUM7QUFFN0IsT0FBUyxHQUFDLENBQUUsQUFBRCxDQUFHO0FBQ1YsU0FBTyxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQztBQUVuQixLQUFHLE9BQU8sRUFBSSxLQUFHLENBQUM7QUFDbEIsS0FBRyxRQUFRLEVBQUksTUFBSSxDQUFDO0FBQ3hCO0FBQUEsQUFFQSxHQUFHLFNBQVMsQUFBQyxDQUFDLEVBQUMsQ0FBRyxTQUFPLENBQUMsQ0FBQztBQUUzQixDQUFDLFVBQVUsSUFBSSxFQUFJLFVBQVUsV0FBVSxDQUFHLENBQUEsSUFBRyxDQUFHO0FBQzVDLFlBQVUsU0FBUyxBQUFDLENBQUMsSUFBRyxDQUFHLFdBQVMsQ0FBQyxDQUFDO0FBQzFDLENBQUE7QUFFQSxDQUFDLFVBQVUsU0FBUyxFQUFJLFVBQVMsV0FBVSxDQUFHLENBQUEsTUFBSyxDQUFHLENBQUEsTUFBSyxDQUFHO0FBQzFELEtBQUksTUFBSyxJQUFNLENBQUEsUUFBTyxPQUFPLFNBQVMsQ0FBRztBQUNyQyxjQUFVLElBQUksQUFBQyxDQUFDLE1BQUssQ0FBRyxPQUFLLENBQUMsQ0FBQztBQUMvQixXQUFNO0VBQ1Y7QUFBQSxBQUVJLElBQUEsQ0FBQSxNQUFLLEVBQUksTUFBSSxDQUFDO0FBQ2xCLEtBQUcsUUFBUSxBQUFDLENBQUMsTUFBSyxDQUFHLFVBQVMsQ0FBQSxDQUFHO0FBQzdCLFNBQUssRUFBSSxDQUFBLENBQUMsQ0FBQSxFQUFJLEtBQUcsRUFBSSxNQUFJLENBQUMsR0FBSyxPQUFLLENBQUM7RUFDekMsQ0FBQyxDQUFDO0FBRUYsS0FBSSxNQUFLLENBQUc7QUFDUixjQUFVLFNBQVMsQUFBQyxDQUFDLElBQUcsSUFBSSxBQUFDLENBQUMsUUFBTyxDQUFDLENBQUcsUUFBTSxDQUFDLENBQUM7RUFDckQsS0FDSztBQUNELGNBQVUsU0FBUyxBQUFDLENBQUMsSUFBRyxJQUFJLEFBQUMsQ0FBQyxTQUFRLENBQUMsQ0FBRyxRQUFNLENBQUMsQ0FBQztFQUN0RDtBQUFBLEFBQ0osQ0FBQTtBQUVBLENBQUMsVUFBVSxNQUFNLEVBQUksVUFBUyxXQUFVLENBQUcsQ0FBQSxNQUFLLENBQUcsQ0FBQSxNQUFLLENBQUc7QUFDdkQsWUFBVSxJQUFJLEFBQUMsQ0FBQyxNQUFLLENBQUcsT0FBSyxDQUFDLENBQUM7QUFDbkMsQ0FBQTtBQUVBLEtBQUssUUFBUSxFQUFJLEdBQUMsQ0FBQztBQUFBIiwiZmlsZSI6ImFjdGl2aXRpZXMvb3IuanMiLCJzb3VyY2VSb290IjoiQzovR0lUL3dvcmtmbG93LTQtbm9kZS9saWIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEFjdGl2aXR5ID0gcmVxdWlyZSgnLi9hY3Rpdml0eScpO1xyXG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIGZhc3QgPSByZXF1aXJlKCdmYXN0LmpzJyk7XHJcblxyXG5mdW5jdGlvbiBPcigpIHtcclxuICAgIEFjdGl2aXR5LmNhbGwodGhpcyk7XHJcblxyXG4gICAgdGhpcy5pc1RydWUgPSB0cnVlO1xyXG4gICAgdGhpcy5pc0ZhbHNlID0gZmFsc2U7XHJcbn1cclxuXHJcbnV0aWwuaW5oZXJpdHMoT3IsIEFjdGl2aXR5KTtcclxuXHJcbk9yLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoY2FsbENvbnRleHQsIGFyZ3MpIHtcclxuICAgIGNhbGxDb250ZXh0LnNjaGVkdWxlKGFyZ3MsICdfYXJnc0dvdCcpO1xyXG59XHJcblxyXG5Pci5wcm90b3R5cGUuX2FyZ3NHb3QgPSBmdW5jdGlvbihjYWxsQ29udGV4dCwgcmVhc29uLCByZXN1bHQpIHtcclxuICAgIGlmIChyZWFzb24gIT09IEFjdGl2aXR5LnN0YXRlcy5jb21wbGV0ZSkge1xyXG4gICAgICAgIGNhbGxDb250ZXh0LmVuZChyZWFzb24sIHJlc3VsdCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpc1RydWUgPSBmYWxzZTtcclxuICAgIGZhc3QuZm9yRWFjaChyZXN1bHQsIGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICBpc1RydWUgPSAodiA/IHRydWUgOiBmYWxzZSkgfHwgaXNUcnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGlzVHJ1ZSkge1xyXG4gICAgICAgIGNhbGxDb250ZXh0LnNjaGVkdWxlKHRoaXMuZ2V0KCdpc1RydWUnKSwgJ19kb25lJyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjYWxsQ29udGV4dC5zY2hlZHVsZSh0aGlzLmdldCgnaXNGYWxzZScpLCAnX2RvbmUnKTtcclxuICAgIH1cclxufVxyXG5cclxuT3IucHJvdG90eXBlLl9kb25lID0gZnVuY3Rpb24oY2FsbENvbnRleHQsIHJlYXNvbiwgcmVzdWx0KSB7XHJcbiAgICBjYWxsQ29udGV4dC5lbmQocmVhc29uLCByZXN1bHQpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE9yOyJdfQ==
