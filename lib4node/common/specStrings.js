"use strict";
var guids = require("./guids");
var _ = require("lodash");
var guidLength = guids.markers.activityInstance.length;
var makeSpecString = function(guid, str) {
  return guid + ":" + str;
};
var isSpecString = function(specString) {
  if (_.isString(specString) && specString.length > guidLength + 1 && specString[guidLength] === ":") {
    var il = guids.identity.length;
    for (var i = 0; i < il; i++) {
      if (guids.identity[i] !== specString[i])
        return false;
    }
    return true;
  }
  return false;
};
var getGuid = function(specString) {
  if (!isSpecString(specString))
    return null;
  return specString.substr(0, guidLength);
};
var getString = function(specString) {
  if (!isSpecString(specString))
    return null;
  return specString.substr(guidLength + 1);
};
var splitSpecString = function(specString) {
  if (!isSpecString(specString))
    return null;
  return {
    guid: specString.substr(0, guidLength),
    str: specString.substr(guidLength + 1)
  };
};
var makSpecForActivity = function(guid, activityOrId) {
  var id = _.isString(activityOrId) ? activityOrId : activityOrId.id;
  return makeSpecString(guid, id);
};
var specStrings = {
  is: isSpecString,
  getGuid: getGuid,
  getString: getString,
  split: splitSpecString,
  activities: {
    asValueToCollect: function(activityOrId) {
      return makSpecForActivity(guids.markers.valueToCollect, activityOrId);
    },
    createCollectingCompletedBMName: function(activityOrId) {
      return makSpecForActivity(guids.markers.collectingCompletedBookmark, activityOrId);
    },
    createValueCollectedBMName: function(activityOrId) {
      return makSpecForActivity(guids.markers.valueCollectedBookmark, activityOrId);
    }
  },
  hosting: {
    createBeginMethodBMName: function(methodName) {
      return makeSpecString(guids.markers.beginMethodBookmark, methodName);
    },
    createActivityPropertyPart: function(methodName) {
      return makeSpecString(guids.markers.activityProperty, methodName);
    },
    getActivityPropertyName: function(obj) {
      var parts = splitSpecString(obj);
      if (parts && parts.guid === guids.markers.activityProperty) {
        return parts.str;
      }
      return null;
    },
    createActivityInstancePart: function(activityId) {
      return guids.markers.activityInstance + ":" + activityId;
    },
    getActivityId: function(obj) {
      var parts = splitSpecString(obj);
      if (parts && parts.guid === guids.markers.activityInstance) {
        return parts.str;
      }
      return null;
    },
    doubleKeys: function(key1, key2) {
      return key1 + guids.markers.keySeparator + key2;
    }
  }
};
module.exports = specStrings;
//# sourceMappingURL=data:application/json;base64,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QUM5QyxXQUFPLENBQUEsS0FBSSxRQUFRLGlCQUFpQixFQUFJLElBQUUsQ0FBQSxDQUFJLFdBQVMsQ0FBQztJQUM1RDtBQUVBLGdCQUFZLENBQUcsVUFBVSxHQUFFLENBQUc7QUFDMUIsQUFBSSxRQUFBLENBQUEsS0FBSSxFQUFJLENBQUEsZUFBYyxBQUFDLENBQUMsR0FBRSxDQUFDLENBQUM7QUFDaEMsU0FBSSxLQUFJLEdBQUssQ0FBQSxLQUFJLEtBQUssSUFBTSxDQUFBLEtBQUksUUFBUSxpQkFBaUIsQ0FBRztBQUN4RCxhQUFPLENBQUEsS0FBSSxJQUFJLENBQUM7TUFDcEI7QUFBQSxBQUNBLFdBQU8sS0FBRyxDQUFDO0lBQ2Y7QUFFQSxhQUFTLENBQUcsVUFBVSxJQUFHLENBQUcsQ0FBQSxJQUFHLENBQUc7QUFDOUIsV0FBTyxDQUFBLElBQUcsRUFBSSxDQUFBLEtBQUksUUFBUSxhQUFhLENBQUEsQ0FBSSxLQUFHLENBQUM7SUFDbkQ7QUFBQSxFQUNKO0FBQUEsQUFDSixDQUFBO0FBRUEsS0FBSyxRQUFRLEVBQUksWUFBVSxDQUFDO0FBQzVCIiwiZmlsZSI6ImNvbW1vbi9zcGVjU3RyaW5ncy5qcyIsInNvdXJjZVJvb3QiOiJDOi9HSVQvd29ya2Zsb3ctNC1ub2RlL2xpYi8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZ3VpZHMgPSByZXF1aXJlKFwiLi9ndWlkc1wiKTtcclxudmFyIF8gPSByZXF1aXJlKFwibG9kYXNoXCIpO1xyXG5cclxudmFyIGd1aWRMZW5ndGggPSBndWlkcy5tYXJrZXJzLmFjdGl2aXR5SW5zdGFuY2UubGVuZ3RoO1xyXG5cclxudmFyIG1ha2VTcGVjU3RyaW5nID0gZnVuY3Rpb24gKGd1aWQsIHN0cikge1xyXG4gICAgcmV0dXJuIGd1aWQgKyBcIjpcIiArIHN0cjtcclxufVxyXG5cclxudmFyIGlzU3BlY1N0cmluZyA9IGZ1bmN0aW9uIChzcGVjU3RyaW5nKSB7XHJcbiAgICBpZiAoXy5pc1N0cmluZyhzcGVjU3RyaW5nKSAmJiBzcGVjU3RyaW5nLmxlbmd0aCA+IGd1aWRMZW5ndGggKyAxICYmIHNwZWNTdHJpbmdbZ3VpZExlbmd0aF0gPT09IFwiOlwiKSB7XHJcbiAgICAgICAgdmFyIGlsID0gZ3VpZHMuaWRlbnRpdHkubGVuZ3RoO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWw7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZ3VpZHMuaWRlbnRpdHlbaV0gIT09IHNwZWNTdHJpbmdbaV0pIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbnZhciBnZXRHdWlkID0gZnVuY3Rpb24gKHNwZWNTdHJpbmcpIHtcclxuICAgIGlmICghaXNTcGVjU3RyaW5nKHNwZWNTdHJpbmcpKSByZXR1cm4gbnVsbDtcclxuICAgIHJldHVybiBzcGVjU3RyaW5nLnN1YnN0cigwLCBndWlkTGVuZ3RoKTtcclxufVxyXG5cclxudmFyIGdldFN0cmluZyA9IGZ1bmN0aW9uIChzcGVjU3RyaW5nKSB7XHJcbiAgICBpZiAoIWlzU3BlY1N0cmluZyhzcGVjU3RyaW5nKSkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gc3BlY1N0cmluZy5zdWJzdHIoZ3VpZExlbmd0aCArIDEpO1xyXG59XHJcblxyXG52YXIgc3BsaXRTcGVjU3RyaW5nID0gZnVuY3Rpb24gKHNwZWNTdHJpbmcpIHtcclxuICAgIGlmICghaXNTcGVjU3RyaW5nKHNwZWNTdHJpbmcpKSByZXR1cm4gbnVsbDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ3VpZDogc3BlY1N0cmluZy5zdWJzdHIoMCwgZ3VpZExlbmd0aCksXHJcbiAgICAgICAgc3RyOiBzcGVjU3RyaW5nLnN1YnN0cihndWlkTGVuZ3RoICsgMSlcclxuICAgIH07XHJcbn1cclxuXHJcbnZhciBtYWtTcGVjRm9yQWN0aXZpdHkgPSBmdW5jdGlvbiAoZ3VpZCwgYWN0aXZpdHlPcklkKSB7XHJcbiAgICB2YXIgaWQgPSBfLmlzU3RyaW5nKGFjdGl2aXR5T3JJZCkgPyBhY3Rpdml0eU9ySWQgOiBhY3Rpdml0eU9ySWQuaWQ7XHJcbiAgICByZXR1cm4gbWFrZVNwZWNTdHJpbmcoZ3VpZCwgaWQpO1xyXG59XHJcblxyXG52YXIgc3BlY1N0cmluZ3MgPSB7XHJcbiAgICBpczogaXNTcGVjU3RyaW5nLFxyXG4gICAgZ2V0R3VpZDogZ2V0R3VpZCxcclxuICAgIGdldFN0cmluZzogZ2V0U3RyaW5nLFxyXG4gICAgc3BsaXQ6IHNwbGl0U3BlY1N0cmluZyxcclxuICAgIGFjdGl2aXRpZXM6IHtcclxuICAgICAgICBhc1ZhbHVlVG9Db2xsZWN0OiBmdW5jdGlvbiAoYWN0aXZpdHlPcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYWtTcGVjRm9yQWN0aXZpdHkoZ3VpZHMubWFya2Vycy52YWx1ZVRvQ29sbGVjdCwgYWN0aXZpdHlPcklkKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBjcmVhdGVDb2xsZWN0aW5nQ29tcGxldGVkQk1OYW1lOiBmdW5jdGlvbiAoYWN0aXZpdHlPcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYWtTcGVjRm9yQWN0aXZpdHkoZ3VpZHMubWFya2Vycy5jb2xsZWN0aW5nQ29tcGxldGVkQm9va21hcmssIGFjdGl2aXR5T3JJZCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY3JlYXRlVmFsdWVDb2xsZWN0ZWRCTU5hbWU6IGZ1bmN0aW9uIChhY3Rpdml0eU9ySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1ha1NwZWNGb3JBY3Rpdml0eShndWlkcy5tYXJrZXJzLnZhbHVlQ29sbGVjdGVkQm9va21hcmssIGFjdGl2aXR5T3JJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGhvc3Rpbmc6IHtcclxuXHJcbiAgICAgICAgY3JlYXRlQmVnaW5NZXRob2RCTU5hbWU6IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYWtlU3BlY1N0cmluZyhndWlkcy5tYXJrZXJzLmJlZ2luTWV0aG9kQm9va21hcmssIG1ldGhvZE5hbWUpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNyZWF0ZUFjdGl2aXR5UHJvcGVydHlQYXJ0OiBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFrZVNwZWNTdHJpbmcoZ3VpZHMubWFya2Vycy5hY3Rpdml0eVByb3BlcnR5LCBtZXRob2ROYW1lKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXRBY3Rpdml0eVByb3BlcnR5TmFtZTogZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICB2YXIgcGFydHMgPSBzcGxpdFNwZWNTdHJpbmcob2JqKTtcclxuICAgICAgICAgICAgaWYgKHBhcnRzICYmIHBhcnRzLmd1aWQgPT09IGd1aWRzLm1hcmtlcnMuYWN0aXZpdHlQcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLnN0cjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBjcmVhdGVBY3Rpdml0eUluc3RhbmNlUGFydDogZnVuY3Rpb24gKGFjdGl2aXR5SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGd1aWRzLm1hcmtlcnMuYWN0aXZpdHlJbnN0YW5jZSArIFwiOlwiICsgYWN0aXZpdHlJZDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXRBY3Rpdml0eUlkOiBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IHNwbGl0U3BlY1N0cmluZyhvYmopO1xyXG4gICAgICAgICAgICBpZiAocGFydHMgJiYgcGFydHMuZ3VpZCA9PT0gZ3VpZHMubWFya2Vycy5hY3Rpdml0eUluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFydHMuc3RyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGRvdWJsZUtleXM6IGZ1bmN0aW9uIChrZXkxLCBrZXkyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBrZXkxICsgZ3VpZHMubWFya2Vycy5rZXlTZXBhcmF0b3IgKyBrZXkyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBzcGVjU3RyaW5ncztcclxuIl19
